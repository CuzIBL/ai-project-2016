                     On   the  Interaction    between    Inverse   Features    and
                  Path-functional      Dependencies      in Description     Logics    

                                   David Toman   and  Grant  Weddell


                          School of Computer   Science, University of Waterloo
                               ¡


                                david,gweddell       ¢ @uwaterloo.ca

                    Abstract                            This latter observation is important since it enables an in-
                                                      cremental development of terminologies that encode schema.
    We investigate how inverse features can be added  One can begin, for example, with a “relational” terminol-
    to a boolean complete description logic with path- ogy that fails to satisfy the conditions of Boyce-Codd Normal
    functional dependencies in ways that avoid un-    Form. (The approach used in [Calvanese et al., 2001] is not
    decidability of the associated logical implication generally capable of handling such anomalous cases.) Stan-
    problem.  In particular, we present two condi-    dard normalization algorithms and methodology can then em-
    tions that ensure the problem remains EXPTIME-    ploy reasoning services based on our results. Thus, our DL to-
    complete. The ﬁrst is syntactic in nature and limits gether with coherence is better equipped to enable the transfer
    the form that dependencies may have in argument   of results in normalization and emerging object design theory
    terminologies. The second is a coherence condi-   for relational and object-oriented data models [Biskup et al.,
    tion on terminologies that is sufﬁciently weak to al- 1996; Biskup and Polle, 2000].
    low the transfer of relational and emerging object-
    oriented normalization techniques.
                                                      1.1  Related Work

1  Introduction                                       Our coherence condition derives from a similar condition pro-
                                                      posed in [Biskup and Polle, 2003] to enable the develop-
For many applications, there is considerable incentive to en- ment of a sound and complete axiomatization for an object-
hance the modeling utility of feature based description logics oriented data model, which essentially adds inclusion depen-
(DLs) with an ability to capture richer varieties of uniqueness dencies to a data model deﬁned earlier in [Weddell, 1989].
constraints such as keys and functional dependencies [De- The DL we consider in this paper is a further generaliza-
Haan et al., 2003; Khizder et al., 2000; Stanchev and Wed- tion; thus, our EXPTIME-completeness result settles an open
dell, 2003; Toman and Weddell, 2004b]. Unfortunately, in problem on the decidability of the implication problem for
combination with feature or role inversion, the associated log- their model.
ical implication problem quickly becomes undecidable [Cal- In [Calvanese et al., 2001], the authors consider a DL with
vanese et al., 2001]. We investigate conditions under which (relational) functional dependencies together with a general
inverse features can be added to a boolean complete DL with form of keys called identiﬁcation constraints. They show
path-functional dependencies (PFDs) [Weddell, 1989] with- that their dialect is undecidable in the general case, but be-
out any consequent impact on the complexity of the associ- comes decidable when unary functional dependencies are dis-
ated logical implication problem.                     allowed. We show undecidability in a simpler setting, in par-
  Two conditions are presented that ensure this problem re- ticular without the use of number restrictions. Our preﬁx
mains EXPTIME-complete.  The ﬁrst is syntactic in nature condition on PFDs complements and extends their decidabil-
and imposes a preﬁx condition on PFDs that occur in ar- ity result to more general PFDs, and our coherency condition
gument terminologies. The condition complements and ex- serves as an alternative method for regaining decidability.
                [                  ]
tends the results in Calvanese et al., 2001 which considered A form of key dependency with left-hand-side feature
the problem of adding keys and functional dependencies to a paths is considered for a DL coupled with various concrete
DL with predicates in place of roles. The second is a coher- domains [Lutz et al., 2003; Lutz and Milicic, 2004]. The au-
ence condition on terminologies that allows unrestricted use thors explore how the complexity of satisfaction is inﬂuenced
of PFDs, and is sufﬁciently weak to allow the formal speci- by the selection of a concrete domain together with various
ﬁcation of arbitrary relational or object-oriented schema, in- syntactic restrictions on the key dependencies themselves. In
cluding those that fail to satisfy normalization conditions. contrast, we consider a DL that admits more general kinds
  £ The support of Nortel Ltd. and of the Canadian governments of key constraints (and functional dependencies) for which
through NSERC and CITO is gratefully acknowledged.    identifying values can be deﬁned on arbitrary domains.

The remainder of the paper is organized as follows. We begin For the remainder of the paper, we use the following abbrevi-


                                                                       r                   sMs  r


                                                                                           1  5


                          ¢¡¤£¦¥§ 


                                                               1            1        1     1


                                                                                        ?   ?      ? P


by introducing the DL dialect    that will be the focus ated notation: ?¢ is shorthand for           ,


                                                              H            H       H     H




                                                                         
                                                                r          sM     r


                                                                                  5     1




                                                           Ga       G                           t
                                                                                G     G


of the remainder of the paper. The dialect is feature based and     for   P                    for


                                                                                               


                                                       1  5


                                                            %M%M% 


and therefore more functional in style as opposed to the more   P   . We  also identify single feature names


                                                                         
                            ¥¢¡¤¨




common role based derivatives of . As a consequence, it with path descriptions u and allow concatenation of path
                                                                                              jwOv
becomes straightforward to incorporate dependencies into the descriptions, I\v to denote their composition .
logic for capturing PFDs. In Section 3, we show that the com- In addition, we classify constraints by the description on


bination of inverse features and arbitrary PFDs in  ¢¡¤£¦¥§  their right-hand side as PFDs, when the right-hand side is of


                                                                      sM


                                                                     L   L


                                                                   1


                                                                           Q;
                                                                 aO
leads to the undecidability of its associated logical implica- the form     P     , and as simple constraints
tion problem. Our main results then follow in Section 4 in otherwise.
which we consider two ways to recover decidability based


on a preﬁx restriction condition for PFDs in argument termi- 3 Undecidability of xzy9{¢|8x Implication
nologies and on a coherency condition for terminologies. Our We show a reduction of the unrestricted tiling problem to
summary comments follow in Section 5.                 the  ¢¡©£¦¥§  implication problem using a construction sim-


                                                      ilar to that presented in [Calvanese et al., 2001]. An unre-


                                                                                       LuhLM


                                                                                     $,~    '       ~
                                                      stricted tiling problem } is a triple   where   is a


2  Preliminaries                                                             hLM




                                                      ﬁnite set of tile types and -g~iz~  two binary rela-


                             ¢¡©£¦¥§ 


                                                                        ~             4      Q~
                                              


Deﬁnition 1 (Description Logic     ) Let 
 and  be    tions. A solution to is a mapping  N   N       such


                                                                                                    


                                                             L\ L     LY            L\ L L\       


                                                               ' s$][ 'Y'      $s$+ ' s$+ s'\'


sets of feature names and primitive concept names, respec- that $s$+         and


                                                              
                                                                                 
                                                                                            [


tively. A path expression is deﬁned by the grammar “  for all N. This problem is -complete Berger, 1966;


         


                                                                        ]          
               

   ” for . We deﬁne derived concept descriptions van Emde Boas, 1997 .


by a second grammar on the left-hand-side of Figure 1. A
                                                                                              


concept description obtained by using the ﬁnal production of     


                                                                     ©                 ©
                                                                                     
this grammar is called a path-functional dependency (PFD). 89:;?>=<o 89:;?>=<  /89:;?>=<o 89:;?>=< /89:;?>=<


                                                            O                   O                   O


                       ¨


                                                                       


                                                                                                 


An inclusion dependency  is an expression of the form                                      


 "!
                                                                               



       . A terminology # consists of a ﬁnite set of inclu-
                                                                 


sion dependencies.                                                                      


                                                                            ¤                


                                                                                        
                                                                           
                                                           89:;?>=< /89:;?>=<o 89:;?>=< /89:;?>=<o  89:;?>=<


                                                                      O                   O


                                                                     


                                                                                 
                                                                                        



         SYNTAX               SEMANTICS:  “ $&%')( ”


                                                                                                 



                          $+§',(.-0/


    *                                                                                       


       2134¢5           61     95


                                                                                         


                                                                                        


                                                                                    


                          $   ',(678$ ')(


                                                          89:;?>=<o 89:;?>=< /89:;?>=<o 89:;?>=< /89:;?>=<


                              


                                                                                             


     ;:                  /=<>$ ')(


                                  


                         ACB      B    


     @?                     D$ ',(©$ ' $ ',(FE


           1


         IH                        


                          A     B   B   


                                                                  Figure 2: DEFINING A GRID.


     ;G                   $ ',(©$ 'J  $ ',(FE
       


 !                                                      The ﬁrst step in the reduction is to establish an integer grid.


    






                                       KV
              N                                   This can be achieved, for example, as follows.


            1ML L


                         ACB       


                                          PW,X


                                            1


                                                                                        1   5


         K  O+PRQS C?UT $  ')(


                               W          W


                                                                                                 


                                  B                     1. Introduce four disjoint concepts, , , , and  ,


                            $Y ',(J$ 'Z[$\O ',(Z$]T^'


                                     B


                            _                             denoting cell edges.


                                                                   W


                               $Y')(J$ 'J`$\OK',(J$+T^'E


                                                                                          9§©¨OL


                                                                     3    0 +¡^¢¤£¦¥ ¥


                                                                     ¤              


                                       ¢¡¤£¦¥§ 
                                                                                               «


    Figure 1: SYNTAX AND SEMANTICS OF         .         2. Grid cells are mapped to concepts ª and that have
                                                                       




                                                          four incoming and ¬ features, respectively.


                                                                            1                   1


                                                                               W                   W


                                                                          aH                 H 




                                                                    ­
                                                                                        ­




                                                               ª
                                                                         G        «         G°¬  
                                                                                          W+¯


The semantics of expressions is deﬁned with respect to a              W+¯


           L


                                                                                           


        $]/ % (a'     /
                                                                                        M®


structure     , where   is a domain of “objects” and               M®


 
 ')(


$   an interpretation function that ﬁxes the interpretations 3. To ensure that squares are formed, add the following.


                                                                                 


                                                            1  5       3  5      3   5      3  5
                                    /


of primitive concepts  to be subsets of and primitive


                           


                                                                  Qi±    Y±©Q     +¬FQi²   d²ZQ`¬


                             '](b>/cQ  /


features to be total functions $          . The in-


                                                                                 


                                                            5


                                                                        3         3          3


                                                


                                               B B


                                                                a Qi² aY²JQ  a+¬FQi± RY±©Q`¬
                                                          


terpretation is extended to path expressions, $dD'+(egf ,


              


                                                 


                                                                                 


                                                                        3         3          3


$  ',(hi$Y')(kj>$ ')(


                                                                a Qi± aY±©Q  a+¬FQi² ¦d²ZQ`¬


                     and derived concept descriptions     


   !


                                                                                  


                                                                 1       3  1      3   1      3  1


and  as deﬁned on the right-hand-side of Figure 1.            




                                                                 Y²JQi±   Y²JQ     +¬FQi±   Y±©Q`¬
                                                          
                                                            


An interpretation satisﬁes an inclusion dependency gl! if
        !


                                                       4. And force squares to extend to the right and up by in-


  ')(m-[$ ',(                                 #n 


$           . The logical implication problem asks if


                            !


op!                                                     cluding the following.


                       ')(m-q$ ',(


       holds; that is, if $      for all interpretations


                                                                                               O


                                                            1       L           L  5       L


                                                                                             


                                                               ?  ª    ?¬ «      ?O¬ «    ? ª
that satisfy all constraints in # .The accumulated effect of these inclusion dependencies on an it is not sufﬁcient to follow the approach in [Calvanese et al.,
interpretation is illustrated in Figure 2.            2001] of simply requiring unary PFDs to resemble keys. Non-


  The adjacency rules for the instance } of the tiling problem unary PFDs can also cause trouble, as the following example


can now be captured, e.g., as follows:                illustrates.




                    
                                            




            W
                                   W








          
                
                                
                                         






    1
                         L  5
                                                L








      3
             
                             3
                                    










   
       ?O¬ ~
               ?       ~  
                               ?  ~
                                       ?¬    ~ 




                 ¡£¢¥¤§¦ ¢©¨¥

                                        ¡¢¥¤£¦ ¢©¨



                                                      Example 5  Consider the ² -ary PFD


                                            


                                                                              Ms O  




                                                                    1
                                                                          5    1L L




                                                                      
            W                      W




                              
                                       


                         L




      3                      3
                                   




                                                                   
                                                                                     PRQi±




    ?  ~            ~   ?O¬ ~          ~ 
               ?O¬                    ?


                 ¡£¢¥¤§¦ ¢©¨¥
      ¡¢¥¤£¦ ¢©¨



                                                                                                




                                                                                       1
                                                                                             5


                                                                                         




                                                                                      
                                                                                                Q  ±


                                                      This PFD has a logical consequence             and


       W                         W


                                   


                                     ~


where ~  corresponds to a tile type    ; we assume    thus we can construct tiling similar to the one presented in the


 W


                       




                    ¥
  3     b


~                 
     


    ~       for all    . The above constraints form a previous section.
           


terminology # associated with an unrestricted tiling prob-


                                                                              ²                    ²
lem } .                                               The problem with the above -ary PFD is that all the paths
                                                      in the precondition have the same preﬁx,  . To avoid this


                                                      problem, it sufﬁces to impose the following preﬁx condition.


                         }                   #    




Theorem 2 A  tiling problem admits a solution iff 
      


             W


  3            l


       ¢¤§


    $      ~ '
ª                 .


                                                      Deﬁnition 6 (Preﬁx-restricted PFDs) Let


          ¢¡©£¦¥§ 




                                                                             Ms
                                                                    r


                                                                            L   L


Thus, the        implication problem is undecidable for                    1




                                                                                 Oa QS
                                                                      KD
                                                                                     P
unrestricted terminologies.                                                                v




                                                      be an arbitrary PFD where O is the maximal common preﬁx


                                                                                  sM


                                                                                 1KL L


                                                                           A


                                                                                      aOuP E


4  On  Recovering   Decidability                      of the path expressions R        . The PFD is


                                                                           O             


In this section, we present two ways to recover decidability preﬁx-restricted if either v is a preﬁx of or is a preﬁx


       ¢¡©£R¥¦ 
                                                         O
for the       logical implication problem based on a syn- of v .
tactic preﬁx condition for PFDs occurring in argument ter-
minologies and on a coherency condition for terminologies. The above restriction allows us to recover an almost tree-
Decidability in both cases is shown by exhibiting a reduc- model property for the logic. By using this restriction, we
tion of logical implication problems in  ¢¡¤£¦¥§  to decidabil- are able to construct special interpretations that satisﬁes all
ity problems of monadic sentences in the Ackermann preﬁx constraints in a given terminology but falsify a PFD con-
class.                                                straint whenever an interpretation exists at all—essentially,
                                                      the interpretation has the shape of two trees rooted by the

                                              W       two elements of the domain that provide an counterexample



Deﬁnition 3 (Monadic Ackerman Formulae) Let    be


                                 W  W


                               L  L
                              B                       to the given PFD. To capture the effect of equalities implied

monadic predicate symbols and   T     variables. A


monadic ﬁrst-order formula in the Ackermann class is a by PFDs, the two trees are allowed to share nodes that are in


                    Ms       Ms £     


                  ^1         1


                           B                          the range of the same path function applied to the respective


                       G PC? GOT   GOT
formula of the form G                   where  is a
                                   W                  roots. In addition, we are able to bound the indegree branch-

quantiﬁer-free formula over the symbols  .
                                                      ing in such an interpretation.


Every formula with the Ackermann preﬁx can be converted


                                        W
                                       




to Skolem normal form: by replacing variables by Skolem Deﬁnition 7 (Rank of Implication Problem) Let # be a


             W


                                                                                                      L


                                                       ¢¡©£¦¥§           ¨                             ¨


                                                                                           1


            T


                                                                                               D$,#     '


constants and by unary Skolem functions not appearing in      terminology, a constraint. We deﬁne !#"$&%


                                                                                        ¦H r




the original formula. This, together with standard boolean to be the number of occurrences of the G concept con-
                                                                      ¨




equivalences, yields a ﬁnite set of universally-quantiﬁed structors in # and .


                                  B
                                                                 L



clauses containing at most one variable ( ).                      ¨


                                                               $)# '
  It is known that an Ackerman sentence has a model if and The !#"$&% limits the maximal number of different pre-
only if it has a Herbrand model; this allows us to use syntactic decessors needed to satisfy all constraints in the terminology.
techniques for model construction. To establish the complex- The above observations provide the necessary tools for de-
ity bounds we use the following result for the satisﬁability of scribing a single Herbrand interpretation with a ﬁxed branch-
                                                      ing outdegree using monadic sentences that simulate the (spe-




Ackermann formulae:                                                                   ¨


                                                                                 #   
                                                      cial) interpretation showing that  .
Proposition 4 ([Fur¨ er, 1981]) The complexity of the satisﬁ- In the Herbrand interpretation, each term represents two
ability problem for Ackerman formulae is EXPTIME-com- elements, a left element and a right element of the original
plete.                                                interpretation, unless these two elements are made equal by
                                                      the effect of a PFD. We use the following unary predicates


4.1  Preﬁx-restricted PFDs                            and function symbols:
                                                                                                   


Recall that the ﬁrst of our conditions is syntactic and applies Unary function symbols  (representing a feature ) and


                                                            Ms '(*)+


                                                            L   L


                                                           1
                                                                        .



to the argument PFDs occurring in a terminology. This condi-          ¡£,-¦ (representing the possible inverses of


                                                                           


tion complements and extends the results in [Calvanese et al., ) for each feature 
 . These function symbols are
2001]. However, because of “accidental common preﬁxes”,   used, together with the constant £ denoting the two roots

                                                                                                                                                                                                                                                                                                           


                                                                                                                                                                                                                                                                                0§F                      6!!J


                 in       the          original                     interpretation,                                   to       form               terms.                    We            over-                                                                                                            I


                                                                                                                                                                                           £


                                                                                                                                                                                                                                                                                                                      X


                                                                                                                                                                                                                                                                                                                              ]&%Z !^0§F:                                     &%A56!!!!


                                                                                                                                                                                                                                                                                                                                                                                       I
                                                                                                                                                                                               '


                 load             the         notation                      for         path             descriptions                              and            use           s$               to


                                                                                                                                                                                                                                                                                                                                      


                                                                                                                                                                                                                                                              0_`"                       ()>BF                                           >C


                                                                                                                                                                                                                                                                                                                                                  L


                                                                                                                                                                                                                                                                                            $


                                                                                                                                                                                                                                                                                                                                       TK           R I



                 denote                  terms                as       well.                                                                                                                                                                                                                                                                  U


                                           ¢¡                                        ¤£


                                                                                                                                                                                                                                                                                                                                           X


                                                                                                                                                                                                                                                                                                                                                   ]&%Z6P03F:                                 &%Z6!!!




                                                                                                                                           
                                                        $'                                    $'
     Predicates                                                     and                                       true            for                 representing                                ele-                                                                                                                                                                                               I
                 ments                 that           exist            in       the         left         and            right            parts              of       the         original
                                                                                                                                                                                                                                7.         Satisfaction                                of           simple                      constraints                              in           the            terminol-
                 interpretation;                                  these              emulate                      partiality                      of       the         inverses.


                                                                                                                                                                                                                                           ogy            (GCDs):                           enforce                      simple                   subsumption                                   constraints


                                               ¡                                    £


                                              ¥                                    ¥




                                                    $ '                               $'                                                          


     Predicates                                                and                                   that          are         true           for             that          represent                                                                                        #


                                                                                                                                              r                                                                                            present                   in             .


                                                                                                                                                                                                                                                      F:          ,-F:                         


                 elements                       belonging                          to      the         description                                    in      the         respective                                                        


                                                                                                                                                                                                                                                                                                                                                          Eced


                                                                                                                                                                                                                                                                                                                                      ]b


                                                                                                                                                                                                                                                           IL                                I,O
                                                                                                                                                                                                                                                                                                                                                    a
                                                                                                                                                                                                                                                                                                                    for          a


                 parts             of       the         original                    interpretation.
                                         §¦©¨


                                         !                                                                                                                                                                                      8.         Satisfaction                             of       preﬁx-restricted                                       PFDs                by        inverses:                       disal-
                                                                                              


     Predicates                                        $'      true           for               whenever                          the          two           elements                        de-                                        low           violations                        of       preﬁx-restricted                                       PFDs                due           to       existence
                                                                                    


                 noted                by            agree               on                   in      the          original                    interpretation.                                                                             of      multiple                      inverse                   features                    agreeing                       on        a     node.


                                                                                                                                                                                                                                                                     2                             4                                    9<;                            9<;


                                                                                                                                                                                                                                                      ./               0§                      03.[8                          6P08                       !!0


 To        ensure                  a    ﬁnite              number                      of      assertions,                          we          assume                    in       the         fol-                                         


                                                                                                                                                            


                                                                                                                                                                                                                                                                       F:2                                      6!P03F4                                                  !
                                                                                                                                                                                                                                                                                                                                                                 L


 lowing                   that           concept                      descriptions                              and            features                             are          subcon-                                                                                                          L


                                                                                                                                                                                                                                                                                              U                                                             U


                                                                                                                                                                                                                                                                            T©f!gDfhgji               R G>L                                Tkfhgkfhgli              R G,O
                                                                                                                                                                                     ¨




cepts               of        concepts                       or        are          features                     appearing                          in       #        and                .      We


                                                                                                                                                                                                                                                  ./               0§                      03.[8                          6P08                       !!0


                                                                                                                                                                                                                                                                     2                             4                                    9<;                            9<;
                                                                                                                                                ,



call          the         following                         collection                        of       assertions                                     (assertions                          with


                                                                                                                                                                                                                                                                       F:2                                      6!P03F4                                                  !


                                                                                                                                                                                                                                                                                                  L                                                              L


                                                                                                                                                                                                                                                                                              U                                                             U


                                                                                                                                                                                                                                                                            T©f!gDfhgji               R G,O                                Tkfhgkfhgli              R G>L
                                                                                                                                                                                    



a     superscript                           
        stand              for         a    pair           of       assertions,                         one           with                      sub-


                                                                                                                                                                                                                                                  ./m 03F:                                                             !0


                                                                                                                                                                                                                                                                                                                         L


                                                                                   


                                                                                                                                                                                                                                                                                                                    U


                                                                                                                                                                                                                                                                                                   TkfhgDfhg                R G>L


stituted                   by                and           one           by               ):                                                                                                                                                                                                                      i


                                                                                                                                                                                                                                                                       Y&%A56!!P03F:                                                                  @%A !!!


                                                                                                                                                                                                                                                                                                                                                         L


                                                                                                                                                                                                                                                                                                                                                    U


                                                                                                                                                                                                                                                                                                                                                            R G,O


       1.        Totality                    of      features:                       each             object                must              have             one           outgoing                                                                                                                                              TkfhgDfhgji


                                           


                                                                                                                                                                                                                                                                                                  


                                                                                                                                                                                                                                                  ./                 03F


                 feature                       .                                                                                                                                                                                                                                                                                      !0


                                                                                                                                                                                                                                                                                                                         L


                                                                                                                                                                                                                                                                                                                    U




                                                                                                                                                                                                                                                                                                   TkfhgDfhgji
                                                                                                                                                                                                                                                                                                                            R G,O


                  !                                                               #"            &%'()+*


                                                                                                                       $




                                                                                                                                                                                                                                                                                         %                                        
                                                                                                                                                                                                                                                                                                                                                                             %




                                                                                                                                                                                                                                                                                         56!!P03F
                                                                                                                                                                                                                                                                                                                                                                              !!!




                                                                                                    for                                                                                                                                                                                                                                                  L


                                                                                                                                                                                                                                                                                                                                                    U




                                                                                                                                                                                                                                                                                                                                   TkfhgDfhgji
                                                                                                                                                                                                                                                                                                                                                            R G>L


                                               %                                 


                                        !,-                            




                                                                                                                                                                                                                                                  ./m@%A!0§F:
                                                                                                                                                                                                                                                                                                                                                   @%A!!0


                                                                                                                                                                                                                                                                                                                                     L


                                                                                                                                                                                                                                                                                                                                 U




                                                                                                                                                                                                                                                                                                               Tkfhgkf!gli
                                                                                                                                                                                                                                                                                                                                        R G>L


                                                                                                                                                                                                                                                                                                                        


                                                                                                                                                                                                                                                                                    ©n@6!P03F                                                        ©n@!!



       2.        Functionality                                 of        features:                      Each               element                     has          at       most              one                                                                     


                                                                                                                                                                                                                                                                                                                                               L


                                                                          


                                                                                                                                                                                                                                                                                                                                          U


                                                                                                                                                                                                                                                                                                                                                  R G,O


                 outgoing                        feature                       .                                                                                                                                                                                                                                         Tkfhgkfhgli


                                                                                                                                                                                                                                                                   r                        r                                 Ms                                                


                                                                                                                                                                                                                                                                                                                          L              L


                                                                                                                                                                                                                                                                          18                     5                   1


                 ./                     0§                        &%'!!


                                                                          


                                                                                                                                                                                                                                                                                                         R                                          Q                             #


                                                                                                                                                                                                                                           for         all                                                                                          P                                                 such              that


                                                                                                                                                                                                                                                                                                                                                                                       sM


                                                                                                                                                                                                                                                                                                                                                                                1KL                L


                                                                                                                                                                                                                                                                        Yv     v                                                                                                                YP
                                                                                                                                                                                                                                           RYv                                  is     the         common                         preﬁx                 of                                                  .
       3.        Rules                of       equality:                       equalities                        propagate                         through                     function                                         9.         Path             agreements:                                  extend                    the          simple                   equality                      to        asser-
                 application,                               equal                 nodes                  have               the           same                predecessors,                                                                tions             of       two            nodes                 agreeing                       on         a     path;              this          is      necessary
                 must              exist,              and           must              belong                   to      the          same               descriptions.                                                                      to      avoid               exponential                             blowup                     in      the         length                 of       the         path            de-


                 12 !03§4/56!!,78:9<;=>-8:9?;=!!                                                                                                                                           scriptions                        in      the          PFDs.


                 12 @%!0§4>@%A!!,B                                                                 9<;@&%A!>C                           9?;=6!


                                                                                                                              8                                              8


                                                                                                                                                                                                                                            l2P03§4/0§#"                                                       &%'()!


                                                                                                                                                                                                                                                                                                                            $


                                                                                                                                                                                                                                                                                                                                                               DRfhg                                 fhg


                                    9<;                                   2                             4


                 D8                  6>B                           03                      !


                                                                                                                                                                                                                                                                                                                                                                          /C                           56!!


                                                                                                                                                                                                                                                                                                                                                         8                                       8


                                                                                                                                                                                                                                                                                                                                                             +Rfhg                                              fhg


                 D8E9<;@6>BF:2                                    6>CHF4                      !


                                                                                                                                                                                                                                                                2          %                              4          %                                                          %


                                                                                                                                                                                                                                            l                       6!o0[                            !!,B8                                         !>CH8                          !


                                                                        G                                G


       4.        Concept                        formation—boolean                                                     constructors:                                  enforce                     the                                       where                        ranges                  over             all       preﬁxes                     of       path             descriptions                              in


                 excluded-middle                                            law            and            the           correct                   behavior                        of        con-                                           #     ’s      PFDs.


                 junction.                                                                                                                                                                                                  10.            Preﬁx-restricted                                        PFDs:                    enforce                     PFDs                  between                       the          left


                 7F:                                      J§F:                      !
                                                                                                          I


                                                                       I                                                                                                                                                                   and           right            parts              of       the         interpretation.


                                                                                                      K






                                                                                                                                                                                                                                                  F:2
                                                                                                                                                                                                                                                                                        6P03F4
                                                                                                                                                                                                                                                                                                                                             0


                 ./F:                                         0§F:                      !




                                                                                                                                                                                                                                                                          L
                                                                                                                                                                                                                                                                                                                               L




                                                                                                                                                                                                                                                                      U
                                                                                                                                                                                                                                                                                                                           U






                                                                                                                                                                                                                                                           Tkfhg   i
                                                                            I                                  I                                                                                                                                                              R IL                             Tkfhgli
                                                                                                                                                                                                                                                                                                                                   R I,O


                                                                                                           K


                                                                                                                                                                                                                                                                                                                           fhgL                                               fhgjq                                 f!g


                                                                                                                                                                                                                                                                                                                     8               6P0©©p0§8                                   ,8                         


                                                                                                                                                       


                                  7F                                        >C-F                           6P03F                       6!!


                                                                       IL!MNI,O                                         IL                             I5O


                                                                                                                                                                                                                                                  F4                               6P03F:2                                          !0


                                                                                                                                                                                                                                                                          L                                                    L



                                                                                                                                                                                                                                                                      U                                                    U


                                                                                                                                                                                                                                                           Tkfhg              R IL                             Tkfhg              R I,O


                                                                                                                                                                                                                                                                   i                                                    i


                                                                                                                                                                                                                                                                                                                           fhgL                                               fhgjq                                 f!g


                                                                                                                                                                                                                                                                                                                                     6P0©©p0§8                                   ,8                         
       5.        Concept                       formation—value                                               restrictions:                              assert               value               re-                                                                                                                 8


                 strictions                       for        pairs             of       neighboring                                nodes.




                                                                                                                                                                                                                                                                                      r                                          Ms                                                                   
                                                                                                                                                                                                                                                                 r




                                                                                                                                                                                                                                                                                             5                           1   L              L
                                                                                                                                                                                                                                                                        1


                                                                                                                                                                                                                                                                              


                 10§ !!,7F:                                                                       >CSF:                        !!


                                                                                                                                                                                                                                                                                                                 O                            Yv^YPRQSYv^                                          #


                                                                                                                                                                                                                                           for        all                                         KO&v                                                                                                              .


                                                                                                                       QCDR    I                               I


                                                   %                                                                                         %


                 1                        !03                        !,BF                                        !>CHF                          !


                                                                                                                                                                             


                                                                                                                                                                                                                         The              above                   assertions                           simulate                        the           constraints                              implied                      by


                                                                                                                         Q   DR I                                            I
                                                                                                                                                                                                                                                                                                                                                                                                                 ¨




                                                                                                                                                                                                                          #      .             To            capture                       the             violation                          of          the             constraint                                       we




                                                                                                                                                                                                                                                                                              L                                                       L
                                                                                                                                                                                                                                                                                                                           L                                                            L




                                                                                                                                                                                                                                                                   A& ¤¡              £                 ¡                      ¢£             £                      £                                      £
                                                                                                                                                                                                                                                                                                                   £                                                            £


                                                                                                                                                                                                                                                                                                                                                                                           ![r!s


                                                                                                                                                                                                                                             .


                                                                                                                                                                                                                                                                                                       ¥                                                            ¥


                                                                                                                                                                                                                                                                                                            L                                                            O




                                                                                                                                                                                                                                                                                  $      '                                              $      '      :-                                             $      'uE
                                                                                                                                                                                                                                                                                                                       '                                                     $      '


       6.        Concept                       formation—existential                                                         restrictions:                              satisfy                 ex-                       set                                                                                   $                                                                                                          for






                                                                                                                                                                                                                                                                                                                                                                          L
                                                                                                                                                                                                                                                                                                                                               L                                                       L
                                                                                                                                                                                                                                                                                                                                                                                                                                   L






                                                                                                                                                                                                                                                                                                                                                   ¤£              £                ¡
                                                                                                                                                                                                                          ¨                                                                                         A@ ¤¡              £                                                       £                 £
                                                                                                                                                                                                                                                                                                                                                                                                                           £


                                                                                                                                                                                                                                                                                           .
                                                                                                                                                                                                                                                                                                                                                                                   ¥






                 istential                    restrictions                            for         inverses.                         Note               that           in        the          case                                                                                                                                                                                                              ¥
                                                                                                                                                                                                                                                                                                                                                                                         L
                                                                                                                                                                                                                                                                                                                                                                                                                    O




                                                                                                                                                                                                                                                                                                                                                                $      '      
                                                                                                                                                                                                                                                                                                                                  $      '                                                $      '      
                                                                                                                                                                                                                                                                                                                                                                                                                               '


                                                                                                                                                                                                                                   ordinary                         and                                                                                                                                                 $


                                                                                                                                                                                                                                                                                     q


                                                                                                                                                                                                                                        L


                                                                                                                                                                                                                                                          sM




                                                                                                                                                                                                                                                                                                    L
                                                                                                                                                                                                                                                      L              L






                                                                                                                                                                                                                                                                                                                                                        ¨
                                                                                                                                                                                                                                                                                            £                                 £
                                                                                                                                                                                                                                              £


                                                                                                                                                                                                                          §¦©¨                                          !_¦©¨                                 !_¦©¨


                 of       the         left         and           right             sides             of       the         interpretations                                   agreeing,                                     !


                                                                                                                                                                                                                                                                                         $      '      :                    $      'uE
                                                                                                                                                                                                                                                  '
                                                                                                                                                                                                                                           $                                                                                                for               a     PFD.


                 the          appropriate                             predecessor                              can           be         on        either                side           of        the
                                                                                                                                                                                                                                                                                                                                                                                                        ¨
                 interpretation                                 (ﬁrst             two           assertions).                                                                                                                                                                                                 ¢¡©£R¥¦ 


                                                                                                                                                                                                                          Theorem                           8       Let           #        be         a                                       terminology                                and                   a      con-


                                                                                                                                                                                                                                                                                         ¨


                 D8E9<;@ !,BF:                                                        56!>C


                                                                                                                                                                                                                                                                                                                                                   ,#t                 .


                                                                                              L


                                                                                   TKVU          R I


                                                                                                                                                                                                                                                                                                                                                               


                                                                                                                                                                                                                          straint.                 Then               #S                       if     and           only            if                                      is      not         satisﬁable.


                                                    2                            2                                    4                            4


                                                     0F                     !JW                        6P03F                     !!J


                                                                                                                                                                                                                                                                                                                                                                           ,vt                  .


                                                                                I                                                                 I


                                                                                                                                                                                                                                                                                                                                                                                         


                                                                                                                                                                                                                          Proof               (sketch):                           Consider                        a     model                  u           of                                       .    We           con-


                                                                                             X


                                                                                                     Y&%A56!P03F:                                     &%Z !!!!


                                                                                                                                                                                                                                                                                                                                            


                                                                                                                                                                                                                                                                                                                                     L


                                                                                                                                                                                                                                                                                                                                                                                                                           £


                                                                                                                                                             I


                                                                                                                                                                                                                                                                                                        =n$]/                           $    '](     '                                                          Y     $      '


                                                                                                                                                                                                                          struct               an        interpretation                                 w                                                   as       follows:                      Let                             ,


                                                                                                                                                                                                                             ¡       £                            £        £                                                                                                                        £


                  !0§.[8\9<;@!,7F:                                                                                      !>C


                                                                                                                                              L


                                                                                                                                  TKNU          R I


                                                                                                                                                                                                                                   $      '                            $      '                                                                                                              s$       '
                                                                                                                                                                                                                                            ,   and                                be        distinct                  values                 for         each             term                           .

      A  £              £


                    r!s


                  !


                            t


        


        $ '@u    $s$ 'Y'E


 /                                                    The translation, in itself polynomial, therefore provides


      A ¡ £         ¤¡  £            £


                            


                               !_r!s


                                        t


         $ '@u    $s$ '\' : $s$ 'Y'E


                                                     an EXPTIME   decision procedure by appealing to Proposi-


      A £ £         ¤£  £            £


                             


                               !_r!s


         $ '@u    $s$ '\' :  $s$ 'Y'E


                                                     tion 4. Completeness follows from EXPTIME-hardness of


                                                                                            


                                                                                          L




                                                                                              
                                                                                 AC 1¤3z95


             ¡       ¡       ¡       ¡


                                        


                 L                L


           A    £      £        £       £
                                                                                                E


                                                      the implication problem for the      ?     fragment


                                                t


 $ ')(     $  $ ' $ $ 'Y'Y'  $ ' $ $ 'Y' / E


                ¡     ¡       ¡       ¡


             W                      W


                                          


                     L            L


                  £      £      £        £


           A                                          [Toman and Weddell, 2001; 2004b].


                                                 t


            $ $  $ 'Y'  $ 'Y'  $ ' $ $ '\' / E


                                       


                 L              L


           A £ £       £    £ £      £


                                                                                             ¢¡©£R¥¦ 


                                             t


              $ ' $Y $ 'Y's $ ' $Y $ 'Y' / E


            $                                         Corollary 9 The implication problem for        with


                                      


                 L              L


           A ¡ £      £     ¡ £      £


             $ '  $Y $ 'Y'  $ ' $Y $ 'Y' / E


            $                                         preﬁx-restricted PFDs is EXPTIME-complete.


         


              L L


           A £


                                                                                    1




                ¦E
       

                                                                                     r


    for            ,                                                              RH


  r                                                                             G


        A   £         ¤¡  £      ¡   £


                                                      Using similar techniques, the     concept constructor


                                        t


                                 ¥


 $ ',(4 Y $ '@u   $ s$ 'Y'  $s$ 'Y'E


        A ¡ £         ¤¡   £     ¡   £



                                                      can be generalized to more general number restrictions re-


                                         t


                                 ¥


           $ ' u    $s$ 'Y'  $ s$ 'Y'uE


        A £ £         ¤£   £      £  £




                                                      quiringlower and upper bounds (coded in binary) on the num-


                                                            


                                 ¥


            $ '@u    $s$ 'Y'  $ s$ '\'uE
                                                     ber of  predecessors while still maintaining the complexity


It is easy to verify that this interpretation satisﬁes all con- bound.




                                 ¨
                     ¨


        #                   #   


straints in and violates . Thus  .                   4.2  Coherent  Terminologies


                                        wS g#
Conversely, given an interpretation w such that and



    ¨                                                 The second of our conditions for recovering decidability is to


                            , t   .


w                            


    , we construct a model of     as follows.        impose a coherency condition on terminologies themselves.




        r
              r       MM




          1
                5   1KL  L




   ¨
            


     
                          YPUQ;


For              D             a PFD, there must  The main advantage of this approach is that we thereby regain


                                   r           


            1ML 5              1       1       5


              ¢    /          ¢     $  ')(    ¢


be elements ¢         such that           and         the ability for unrestricted use of PFDs in terminologies. The


                 W           W


 r


                                            §




  1                                   £ ¥
                     1           5






$  ')(                                       ²
              $Y
                 £¢   '¤ $Y ')(J$£¢ '


      such that  ',(Z$             for          but   disadvantage is roughly that there is a “single use” restriction


       1          5


$Y')(J$£¢ ' `$\OK',(J$¤¢ '
                  .                                  on using feature inversions in terminologies.


We ﬁrst deﬁne a part of the interpretation that consists of suc-


          1     5



                                                      Deﬁnition 10 (Coherent Terminology) A terminology # is
               ¢


cessors of ¢ and :


                                   r


                               1




             L                                        coherent if
  A& ¢¡   £    ¡    £


                                                                     1          1         1


                                         t


               ¥


                                                                    H          H         H


                                                                                      


                                                                         3      !          p34!


       $\OC$ 'Y'  $Ys$ 'Y'$Y',(J$¤¢ ' $ ',(FE


                                    r


             L                  5


  A& ¢£   £     £    £


                                                            #S $]G   '  $+G     '   G    $     '


                                         t


               ¥


       $\s$ '\'  $\ $ 'Y' $\OK',($£¢ ' $ ',(FE


                                                                        L


                                                                        !


       i


                         1             5




  A
           £
   !


     ¦©¨                                              for all descriptions  that appear as subconcepts of con-


       $\OC$ 'Y' $YRv',(J$¤¢ 'J $YYvN')(J$£¢ 'uE - u




                                                      cepts that appear in # , or their negations.


                     ¨


                         1
                                                 #


This part of u violates and satisﬁes all constraints in


                        H


                         


                           


                                                                       1          1          1


                                                      Note that we can syntactically guarantee that # is coherent


                      G                 u


                                                                    IH       aH       IH 


                                                                            3       !         `3 !


with the exception of the   . We extend    to satisfy                   


                                                                          '   $+G    '   G     $     '


                                                      by adding the $]G                               as-


                                                                                   L
                                                                                    !


the existential restrictions as follows:                                          
                                                                                                  #


                                                      sertions to # for all descriptions that appear in . This


                            


                                       ¡




                         £                  £
       £


                   r!s


                 !




                     $Ys$ 'Y' u      $Ys$ 'Y'
    s$ '


 for     such that              and          . We    restriction allows us to construct interpretations of non-PFD


           §         L                       1


                      ¨


              ! "$ %a$,# '           $Y'](J$£¢ '
    chose ¥             predecessors of        that   descriptions that have the following property:


    satisfy all implied existential restrictions. and identify


                             sM                                                  


                      1       L  L                                                  L


                           £           £


                            '\'    &$\OC$ 'Y'                                  $+/ $ '](a'


    these with the terms $\s$           and set    Deﬁnition 11 An interpretation      is coherent if, for


                                                                                                   


                                                                                  L


                                                                                B                  B


          W




       ¡             ¡
                                ¡


                                                              
                    T   /  T   $  '](




         
                                             




                  L
                             L


               £


                                          £           any       , description and        ,         if


                                   L
©


                                                                        


                       ¤




                      ¡§¦ ¡ ¡ 
©
©
                                B
                                 ¦




                    ¥
                                ¨   ¥


                                  U






        $  $Ys$ 'Y'\' 
                              
                                      $YC$ '\' u


                        ¦©¨


                                                         ',(   $ ')(©$ '$ ',(©$]T°'




                                                      $    and                 .
                          


                   r


                                          1


                                               £2¥


                                                                                            ¨


                                   £¢      '


    for all the chosen predecessors of $YK')($ for


                        W


                       


     §
                             £


                                                      Lemma  12  Let # be a coherent terminology, a simple con-


                                                                                                       ¨


      ¥
                              'Y'


        . For all the terms $Ys$ we extract a tree inter-


                                                                w                       w[ =#   w   


                                                      straint, and an interpretation such that and     .
                                     u


    pretation from w . Similarly, we extend on the right


                                                                                       w          w   i#
                                                                                                   v
                                                      Then there is a coherent interpretation v such that


    side.                                                      ¨


                                                          w  
                                                            


                                                      and  v    .


                            


       £                 £



                  ! r!s




                                                                                                       
    s$ '          $\s$ '\' u                                                    


                                                                                    L
                                                                                                      B


 for     such that                we follow the same                              B
                                                                                        /


                                                      Proof (sketch): Consider distinct T  such that (i)


                                                                                          (


                                                                                           



                                                                      5


    steps as above for the left part only.               1

                                                                                     B


                                                      $         T   $             $ ')(J$ '>n$ ')(J$]T°'
                                                                       ',(


                                                          ',( , (ii)     , and (iii)              . Then,


                                                                                           


                                                                             1    5             1     5


                                                                       B      3¢        B     3  


            w        #




                                                                                                1
Note that since satisﬁes all (translations of) ordinary con-                 1




                                                                           $                  $    :
                                                                                   ')(                 ')(


                                                      since # is coherent,           . For,




                                                                                               H
                                                                            H




                                                                                              W
                                                               W           W






                                                                                                 
                                                                                            
                                                                        




                                                                                                  95
                                                                                613 95 3


straints are satisﬁed and no pair of nodes on the left/rightsides  B






                                                                                                     ',(
                                                                               $     :   '  G
                                                                ',(J$ '  $+G
                                                      leads to $                                      , a
can violate a preﬁx-restricted PFD thus satisfying constraints contradiction. Thus, as models of  9¡¤£¦¥ have the tree model
generated from PFDs (8-10 above).                                                      B


                                                      property, we can remove the farther of or T and all its de-




               r
         r




                 5
          1


            
   ¨



For              a simple constraint, there must be an scendants, where the distance is measured from the node fal-


                         r            r


                             1             5


                                                             ¨


       ¢   /          ¢    $  ',(   ¢    $  ')(


                                       
                                                                                                       #


element       such that          and          . We    sifying  in w . The resulting interpretation still satisﬁes
                                                                 ¨



deﬁne u  using the same process as above noting that the and falsiﬁes . Repeating this process yields a coherent inter-


         1     5


        ¢     ¢                  w               
two roots  and  are already equal in .                pretation.                                       



As a side-effect of the above construction, we can now trans- By restricting logical implication problems for  ¢¡©£¦¥§  to
                                                 ¨


form an arbitrary interpretation that satisﬁes # and violates cases in which terminologies are coherent, it becomes possi-


to an almost-tree interpretation informally referred to above ble to apply reductions to satisﬁability problems for Acker-


                                        ,      .
                                             
in order to motivate the monadic assertions in  and . man formulae.