       faithful integration description logics logic programming∗                            boris motik                               riccardo rosati               department science          dipartimento di informatica sistemistica                 university manchester uk            universita di roma “la sapienza” italy                          abstract                          consequences dl lp respectively                                                        component unlike existing approaches ap      integrating description logics dl logic pro                                                        proach allows user freely switch open      gramming lp produce powerful                                                        closedworld views arbitrary predicates dl lp      useful formalism dls lp based                                                        means example argue logic produces      quite different principles achieving seam                                                        intuitive practically useful consequences      integration trivial paper intro                                                          base approach logic minimal knowledge      duce hybrid mknf knowledge bases faithfully                                                        negation failure mknf developed lifschitz      integrate dls lp using logic minimal                                                         unify major approaches nonmonotonic      knowledge negation failure mknf lif                                                        reasoning obtain intuitive consequences hybrid      schitz  reasoning algorithms                                                        logic modify certain technical aspects mknf regard      tight data complexity bounds inter                                                        ing universe discourse equality      esting fragments logic                                                          functionfree logic programs usually decidable                                                        rules safe decidable dls exist    introduction                                       show restrictions dl lp sufﬁcient  integrating description logics dls logic programming obtain decidable hybrid formalism interaction  lp common framework produce powerful dl negationasfailure obtain decidability  formalism example lp rules used model apply wellknown notion dlsafety motik et al  straints exceptions dl knowledge bases adding  makes rules applicable individuals  rule layer dlbased web ontology language known present reasoning algorithms  owl currently central task development cases general positive negationas  semantic web language stack rule interchange failure nondisjunctive positive nondisjunctive strat  format rif working group world wide web iﬁed nondisjunctive necessarily stratiﬁed dl  sortium wc currently working standardizing safe rules finally present tight data complexity bounds  language dls lp based fundamen each case show combining dls lp  tally different assumptions dls fragments ﬁrstorder does increase data complexity lp  logic employ openworld semantics lp pro  approach related nonmonotonic exten  vides negationasfailure closedworld semantics sions dls donini et al  propose mknf    approaches integrating dls lp pro based extension dl alc lp rules  posed recently rosati  proposes approach unique assumption una baader hollun  terprets predicates dl knowledge base der  propose extension dls dlsafe default  openworld predicates occurring lp rules rules subsumed approach treat  closedworld semantics eiter et al  propose ment equality wellknown embedding default  loose coupling dls lp extending lp rules logic mknf lifschitz  finally bonatti et al  special atoms interpreted queries dl knowledge base  present extension dls circumscription    paper introduce hybrid mknf knowledge bases allows nonmonotonic reasoning unnamed individuals  integrate arbitrary description logic dl dis unary predicates decidability desired  junctive logic programs negationasfailure inte leave detailed proofs motik rosati   gration faithful sense provides exactly present proof sketches    ∗     work partially funded epsrc project reol  preliminaries  epc eu project tones fet fp    approach actually applicable ﬁrstorder fragment description logics approach applicable  work motivated primarily knowledge representa ﬁrstorder fragment dl satisfying conditions each  tion fragment description logic   knowledge base o∈dlcan translated formula                                                    ijcai                                                     πo functionfree ﬁrstorder logic equality iiit aruler nondisjunctive  positive   supports aboxes—assertions form aan fact   safe variables occur  predicate ai constants dlandiii satisﬁability positive body atom program ﬁnite set mknf  checking instance checking checking entailments rules hybrid mknf knowledge base pair                       form     aan  decidable assume fa deﬁne semantics translating ﬁrst                                                    miliarity standard dl notation baader et al   order mknf formula follows                                                        deﬁnition  let hybrid mknf knowl  mknf   ﬁrstorder version mknf lifschitz                                                         edge base extend π follows  understood variant ﬁrstorder modal logic                                                        vector free variables  preference relation models implements                                                           πr∀x  ∨ ∨ ⊂  nonmonotonic semantics syntax mknf obtained                                                                                             ∧ ∧ ∧ b− ∧ ∧ b−                                                                                                extending ﬁrstorder logic modal operators  πp       πr     πkk   πo ∧ πp  formula ttnwhereti terms ﬁrst      r∈p  order atomforϕ  mknf formula ϕ ϕ                                                                                                  satisﬁable mknf model π ex  modal     atoms respectively ϕ ground does ists entails closed mknf formula ψ written ψ  contain variables ϕ positive does contain                                                        πk mknf ψ  ϕtx formula obtained ϕ replacing  free occurrences variable term     mknf deﬁned  lifschitz  considers arbitrary    assume apart constants used mknf models consider herbrand models sec  formulae countably inﬁnite supply constants tion  introduce restriction obtain intuitive  used formulae  denote herbrand logic compatible dls lp  universe signature assume signa der semantics lifschitz aa  mknf ∃x  ax  ture contains special equality predicate ≈ interpreted aa does ﬁx interpretation to  congruence relation anmknf structure triple remedy interpret constants  imnwherei   herbrand ﬁrstorder interpretation standard data management applications donini et al  andm   nonempty sets herbrand ﬁrst  reiter  order ensure model large  order interpretations  satisﬁability closed mknf assume countably inﬁnite supply constants  formulae mknf structure imn deﬁned fol consider inﬁnite models dif  lows ﬁrstorder atom                        ferent constants interpreted different objects                                                          equalityfree ﬁrstorder formula satisﬁable ar  imn       iff true  imn   ¬ϕ       imn  ϕ                    bitrary model iff satisﬁable herbrand model                    iff                                 inﬁnite supply constants occurring formula  imn   ϕ ∧ ϕ iff imn  ϕ imn  ϕ  imn   ∃x  ϕ iff imn  ϕαx α ∈ fitting  theorem  equality  imn   ϕ   iff  ϕ ∈    distinguish arbitrary herbrand models com  imn   ϕ iff  ϕ ∈  patibility dls need ≈ clearly                                                        terpret identity interpret congruence    symbols true false ∨ ∀and⊂ material implication ﬁrstorder formula equality satisﬁable model  interpreted usual mknf interpretation “true equality” iff satisﬁable model ≈  nonempty set ﬁrstorder interpretations letϕ ordinary predicate interpreted congruence fitting  ψ closed mknf formulae mknf interpretation    theorem  approach fully compat  model ϕ written  ϕifimm  ϕ ible dls  ∅thenk ϕ iff ϕ  each ∈ mknf model ϕ ﬁrstorder formula ϕ similarly logic fully compatible  model ϕ ii imm   ϕ each  ⊃ lp ground atom αifo  ∅thenk α iff  i ∈  socalled preference semantics mknf entails α stable model semantics lifschitz   ﬁnally ϕ entails ψ written ϕ mknf ψifimm  ψ  believe treatment equality matches com  each mknf model ϕ ∈                 mon intuition negationasfailure version                                                        mknf  lifschitz  ϕ  aa ∧¬not ab    hybrid mknf knowledge bases                        model singleton universe                                                         entails ≈   consider quite unintuitive                                                              ϕ          deﬁnition  let dl knowledge base ﬁrstorder did say expect                                       ≈                                   functionfree atom ttn occurs different problems semantics      called dlatom atoms called nondl lp commonly based herbrand models follow  atomsanmknf rule   following form hi          −                                            practice approach ϕ mknf unsatisﬁable  bi  bi ﬁrstorder functionfree atoms       satisﬁable explicitly stating ≈        ∨ ∨ hn ←                                motik rosati  allow rules                             −          −              bm bk        tain modal nonmodal atoms order general                                                        ize known extensions dls rules swrl                                  −  sets hi bi  bi  called rule dllog rosati  show gen  headthepositive body negative body respectively eral rules converted rules modal atoms                                                    ijcai                                                     furthermore mixing modal nonmodal atoms produces  marriedjohn  notmarriedjohn respec  unintuitive semantics good practice use fully tively let  ∪ clearly ⊂  nonmodal fully modal rules                          marriedjohn   marriedjohnin                                                        tuitively contains “more knowledge” pref  dlsafety making rules safe usually sufﬁces make erence semantics mknf gives following semantics                                                            functionfree lp decidable show  mknf model mknf formula  ϕ                                                                                                  does hold mknf rules note mknf rules contain minimal knowledge justiﬁed values atoms                                                                                                 modal atoms existing undecidability results ﬁrstorder example assuming married john true                                                                                                        combinations dls rules directly applicable implies consequences notmarried john                                                         each consequence justiﬁed sense  theorem  safe hybrid mknf knowledge base                                                        longs minimal knowledge entailed knowledge  ground atom checking undecid                                                        base each notatom replaced value  able dl allows express axiom c                                                          understand open closedworld reasoning    c   makes equivalent inﬁnite set                               ∃                                                                  teract formalism let assert spouse  elements accessed rules pbill nowbill married different people dif  rules safe words safety sufﬁcient ferent models  ensures marriedbill holds  condition domain independence ensure decidability models precondition  satisﬁed  apply wellknown dlsafety restriction makes derive notmarriedbill highriskbillin  rules applicable individuals known way reasoning performed openworld seman  abox indepth discussion motik et al  tics modal operators allow “closedworld  deﬁnition  mknf rule dlsafe variable glasses” consider consequences models  occurs nondlatom body finally let assert spousebob ann pboband  hybrid mknf knowledge base dlsafe rules pann  derive discountbob  dlsafe                                          trast derive discountbill  rule     note dlatoms interpreted way non differs ﬁrstorder implication  requires  dlatoms dlsafety merely provides syntactic restriction spousex known—that hold ﬁrst  ensuring decidability hybrid mknf knowledge base order models spouse different different   pletpg obtained replacing each models   spousebill value yandthe  rule variables constants possible rule  “ﬁre” dlsafe  ways knowledge base kg pg called ground example expressed existing combinations  instantiation                                   dls lp rules eiter et al   lemma  dlsafe hybrid mknf knowledge base rive new dl facts approach rosati   kg ground instantiation ψ ground mknf dl predicates interpreted openworld seman                                                                                    formula ψ iff kg  ψ                     tics occur     example                                               reasoning algorithms  consider determining car insurance premium based given nonground hybrid mknf knowledge base  various information driver convention dl algorithms ﬁrst compute ground knowledge base kg  predicates start uppercase nondlpredicates obtain mknf theory modal operators quan  lowercase letter let following hybrid mknf tiﬁers program variables step exponen  knowledge base predicate means “person”      tial nondisjunctive datalog combined                         notmarried ≡¬married        complexity higher data complexity exponen                                                                                                          notmarried   highrisk      tial factor dantsin et al   expected                              ∃                       logic mknf knowledge base                             spouse    married       just consider data complexitywhichis       notmarriedx ←  px marriedx     measured size facts size abox    discountx ← spousex px py   denote data complexity reasoning dl                                                               np    e⊆np           let assert pjohn ﬁrstorder seman   andset                                                                           simplicity write oandp instead πk  tics models contain married john                           tain notmarriedjohn  applies closed π  andπ     mknf models  clearly inﬁ  worldassumptiontomarried default people  nite devise convenient ﬁnite representation                                                                                                           sumed married marriedjohn does adopt approach used rosati                                                        represent mknf model using ﬁrstorder formula  hold models  rule  “ﬁres” derives                 notmarriedjohn  implies highriskjohn ϕ   ϕ  formalize follows    preference semantics mknf strongly related deﬁnition  let hybrid mknf knowl  notion gelfondlifschitz reduct used edge base set katoms written kakisthe  ﬁne stable models let mknf interpre    smallest set contains iallkatoms pg iia  tations consisting ﬁrstorder interpretations modal atom ξ each modal atom ξ occurring pg                                                    ijcai                                                       subset kaktheobjective knowledge algorithm  entailment general hybrid mknf kbs              ob     o∪                          formula kp       ξ∈p ξ partition algorithm notentailsdlkψ  kak consistent obkp   ξ each ξ ∈  input    let ϕ mknf formula  partition   dlsafe hybrid mknf knowledge base                                                          ψ               ¬  kak formula ϕkpn  obtained ϕ     ground formula                    true    ∈           false       output  placing each ξ      ξ       oth     true  ψ false  erwise ϕnotpn obtained ϕ replacing each              ξ true ξ ∈ false ﬁnally                                                                  let ground instantiation  ϕ   ϕ   pn      pn                            partition nofkakg ∪k exists                            dl    set modal atoms subset dlatoms  pgp evaluates trueand                                        ξ  ξ ∈ sdl   sdl                                                                           o∪pdl  satisﬁable                                                                     mknf model strongly related particular parti  o∪pdl  ξ each ξ ∈ ndland  tion kak                                                                                                                                                each qaan ∈ qbbn ∈                                                                       deﬁnition  mknf interpretation induces par    o∪pdl   ai ≈ bi  ≤ ≤              kak     ∈                                                                     tition       ξ    implies      ξ        γ  pgnotpn each partition   ξ ∈ implies   ξ                                    ∅                                                                             following key lemma shows each mknf model       γp ∪  evaluates falseor                                      kak                       b   represented partition              o∪pdl  unsatisﬁable                                                                o∪pb    ξ       ξ ∈   lemma  let  mknf model kg            dl          dlor                                                                                                      b  partition kak induced equal qaan ∈ qbbn ∈                             ob                                      b  set interpretations     kp                         o∪pdl   ai ≈ bi  ≤ ≤    ﬁnd mknf model kg need ﬁnd      following conditions holds  partition kak different ways ψ  ∈  different types rules                                  ii ψ  ¬ ∈                                                          return true return false  general case disjunctive datalog gen  eral case guess partition kakthisis  captured algorithm                               contradiction mknf model kgfi                                                        nally condition  ensures   ψsokg   ψthe⇐  theorem   let dlsafe hybrid mknf knowl                                                        direction analogous  edge base ψ ¬  ground atom                                                           notentailsdlkψ returns true iff   ψ runs computed polynomial time size                                                                                                 data complexity                                    nonground rules bounded partition                                                        guessed condition  checked time polyno  proof sketch ⇒ifnotentailsdlkψ returns truea mial size kg checking conditions –   partition kak satisfying conditions al requires polynomial number calls oracle running  gorithm  exists show    obkp  steps performed disproving                                                                                                mknf model kg condition  dition  requires guessing partition  poly  sistent dlatoms condition  nomial number calls oracle running  sistent nondlatoms nondlpredicate performed validating condition                                                                                           ee  obkp  qaan hold qbbn ∈ performed  algorithm runs   obkp  ai ≈ bi condition    ∅  condition  imm  pgp each ∈  furthermore values katoms determined positive programs positive hybrid mknf knowl  nsoimm    pg clearly imm    edge base iff  each smodel                                                                                                            imm   kg assume mknf   each msincek positive mknf model                                        model—that mknf interpretation exists exists  ⊆ analogous case                                            ⊃    kg each ∈    positive disjunctive datalog words positive                                induces partition  kak   queries need ensure preference semantics                                                                                ξ implies  ξwehavep   ⊂   mknf let  notentailsdl algorithm                                     represent  ∪   partition algorithm  condition                                      ∅ lemma     obkp   adapting proof theorem  following                ∅ obkp  satisﬁable condition  validated imm  γp n ∪  each i ∈  theorem  let positive dlsafe hy                                           ∪        brid mknf knowledge base ground atom  invalidates condition ﬁnally                   clearly consistent invalidates conditions notentailsdl returns true iff    condition  hold n ∪ which runs data complexity                                                    ijcai                                                     positive nondisjunctive programs nondisjunctive • each body atom ξ reachp ⊆ headkλr                                                                                                  ≥λr  positive construct deterministically obkp   ξ each ⊆ headk ei  bottomup fashion easily show     ther obkp ∪p    ξ obkp ∪p  unsatisﬁable   implies ∪  mknf interpreta                                                           stratiﬁed stratiﬁcation λ exists stratiﬁ  tions immediately implies following                                                        cation λ partitions strata σi   λrithese  theorem  each positive dlsafe nondisjunctive hybrid quence strata σσn identiﬁed λ  mknf knowledge base mknf model     called stratiﬁcation  deﬁnition  positive nondisjunctive dlsafe hy stratiﬁcation ensures deriving atom ξ stra  brid mknf knowledge base rk dk tk oper tum σi does change values kandnot  ators deﬁned subsets kak follows      atoms strata iand  ≤  respectively exam     ss  ∪k                                  ple consider knowledge base dl propositional                     contains rule form         ≡   ∨   ∧  ≡¬                    bi ∈ each  ≤ ≤   logic               contains rules                                                          ←        ←                                                                                        ordinary datalog    dksk   ξ  ξ ∈ kak o∪sdl  ξ∪         stratiﬁed evaluating ﬁrst rule derive raf            qb   qa  ∈                                           dl      ter evaluate second rule derive sbut                  o∪sb     ≈    ≤ ≤                   dl                       objective knowledge ∧ ∧oand implies ¬q    tksrks   ∪ dks                               invalidates atom body ﬁrst rule                                                        intuitively deﬁnition  ensures interaction    operator tk monotonic lattice subsets                                                      tween  derived facts does happen clearly  kak ⊆ implies tks ⊆ tks  rk                                                        checking stratiﬁcation difﬁcult general  monotonic similarly case datalog dk                                                        employs una rule contains dlatom  monotonic ﬁrstorder logic monotonic                                                        head stratiﬁcation checked usual  knastertarski’s theorem tk ﬁxpoint                ω                                       case interesting allows deﬁne complex  denote  easy show following                                                      straints dl knowledge bases show  theorem   let positive nondisjunctive dlsafe compute models stratiﬁed program                                        ob   ω   hybrid mknf knowledge base         ktk                 ∅                                    deﬁnition  let σσk stratiﬁcation dl  iifm   thenm  single mknf model   safe mknf knowledge base  sequence subsets  iiifk mknf model model equal           ka                           ∅                                   ω     pc             uuk    σ  inductively deﬁned  iii data complexity computing tk             ≤         ω               ∪                                                                  ui  tχi χi  ui−   σi σi ob                                            ω                                            true         proof sketch clearly  tk ﬁx tained σi replacing each ξ ui− ξ                                                                                         ω  point tk  pgifm mknf model   false finally let uk  uk                                          mknf interpretation ⊃  kg     following theorem analogous case ordinary  each i ∈  exist induce partition                                                   stratiﬁed datalog   kak ⊂  clearly tkp                                                     theorem  let stratiﬁed dlsafe mknf knowl    ∈pgorp                        ω                                edge base    obku ω  regardless  consistent minimal ﬁxpoint tk                    ω                                                          stratiﬁcation used compute  following claims hold  proof ii analogous iii ordinary datalog                uk                                                        iifm   ∅thenm  mknf model kiiifk  rks computed polynomial time number                                                        mknf model model equal iiithe  atoms kak linear size pg computing                      ω                                                             data complexity computing uk   dks  requires polynomial number calls oracle  running finally number iterations bounded  size kak implies claim           nondisjunctive nonstratiﬁed programs                                                        nondisjunctive nonstratiﬁed knowledge base                               obkt ω     entailment checking     iff       aand    knowledge base γ  pgnotpn algo  ¬      ob   ω            iff  ktk                                rithm  nondisjunctive positive use                                                        orem  ensure preference semantics mknf  stratiﬁed programs ﬁrst deﬁne notion stratiﬁca deﬁne nondisjunctivenotentailsdlσ ψ                                                                                               ω   tion appropriate mknf programs                    algorithm  replace condition  tγ   deﬁnition  let nondisjunctive hybrid theorem  nondisjunctive nonstratiﬁed hybrid                                                                                 ¬  mknf knowledge base λ  pg →  function assign mknf knowledge base  ψ        ground                                                                         nondisjunctive entails dlk               ∈pg                                     atom algorithm                       ψ  ing each     positive integer λ  integer                                                 ∈ ≤≥letheadk set head turns true iff   ψ runs data complexity ep   atoms rules ∈pg λr     λ  stratiﬁcation conditions hold each ∈pg  data complexity                                                ≤λr    • each body atom ξ reachp ⊆ headk         determine data complexity—the complexity                                            λr      obkp   ξ each ⊆ headk ei  measured sizes abox facts p—      ther obkp ∪p    ξ obkp ∪p  unsatisﬁable checking entailment hybrid mknf knowledge base                                                    ijcai                                                     
