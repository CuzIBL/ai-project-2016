                   understanding drawings compositional analogy                                    patrick yaner     ashok goel                           college computing georgia institute technology                                          atlanta ga                                         yanergoelccgatechedu                        abstract      analogical method constructing      structural model unlabelled line draw      ing source case represented schema      contains line drawing lines      tersections drawing shapes drawing      structural model device depicted          drawing given target drawing relevant      source case method ﬁrst constructs graphical      representation lines intersections      target drawing uses mappings      level line intersections transfer shape rep      resentations source case target      uses mappings level shapes transfer      structural model device source      target archytas implements           evaluates method compositional analogy                                                        figure  sample source drawing piston                                                        crankshaft assembly target drawing    motivation goals                               vice piston range motion  view task interpreting drawings construct  ing model drawing depicts model enables  higherlevel nonvisual inferences regarding drawing best ﬁrstorder spatial relations  picted content drawing example context tween geometric elements context map  cad environments input task unanno ping longer principal product analogy  tated vector graphics line drawing depicting kinemat goal align representations exactly infer  ics device output structural model single additional relation target transfer en  device speciﬁcation conﬁguration compo tire structural model device depicted drawing  nents connections device current methods fergu involve relations need   son forbus  alvarado davis  extract method analogically recognizing shapes target  ing model drawing rely domainspeciﬁc rules drawing  scheme organizing shape struc  paper propose derive model analogy tural models source drawing way enable  similar drawing model known requires  transfer structural model based shapelevel differ  analogical mapping source known target ences target source drawings  drawing basis shapes spatial relations let consider task mapping source drawing il   transfer adaptation model source drawing lustrated ﬁgure similar target drawing illustrated  target                                        ﬁgure ﬁgure  shows target drawings    structuremapping theory falkenhainer et al  views lowlevel geometric reasoner recognize ge  analogybased comprehension process mapping ometric elements spatial relations  dividual relations source target candidate treat representation labelled graph contains  inferences mappings guided higherorder adjacent graphtheoretic method  relations causal relations works analogybased recognition used ﬁnd  certain domains clear higherorder relations sistent mapping graphs representing source  geometric spatial information explicitly encoded target drawings method runs difﬁculty                                                    ijcai                                                                                                                          figure  multilevel hierarchy drawing basic shapes  figure  illustrate additional target drawings composite shapes related structural model  ushaped cylinder three rectangles left components connections com  single polygon thinner ponents basic shapes depict components composite                                                shapes basic shapes depict connections                                                        components                                                          happen iteratively loop working each subse                                                        quent level abstraction                                                          archytas implements method compo                                                      sitional analogy analogical reasoning general                                                        involves tasks retrieval mapping transfer evaluation                                                        storage archytas presently implements tasks                                                        mapping transfer given target drawing archytas                                                        knows source drawings relevant target                                                           structural shape models                                                        structure shape drawing source case form  figure  sample target drawing piston abstraction hierarchy structural model speciﬁcation  crankshaft assembly sample target drawing components structural relations properties  crankshafts single piston cases source height width variable parameters position  ﬁgure                                   angle each structural model similar repre                                                        sentation structure structurebehaviorfunction models                                                        goel chandrasekaran  figure  illustrates  target drawings shown ﬁgure  ﬁgure graph representing connections components  source drawing problem number compo structural model piston crankshaft device  nents number shapes different ﬁgure addition each component user spec  graphtheoretic method relax constraint iﬁes coordinates basic shape corresponding  onetoone mapping analogy component each structural relation connection  performed twice order transfer model successfully user speciﬁes composite shape composition basic  ﬁgure ﬁgure          shapes depicting components involved connection    address difﬁculties method composi produces drawingshapestructure abstraction hierar  tional analogy performs analogy multiple levels abstrac chy shown ﬁgure   tion figure  illustrates organization knowledge  source case structural model device  lines circles arcs intersections  source drawing speciﬁes components depicted ﬁrst step process match each shape  vice interconnections model related source target drawing need robust  drawing intermediate abstraction shape model canonical representation shapes robust face  method ﬁrst gathers individual lines circles inter visual binding problem line segments match  section points shapes ﬁnds mappings gardless drawn vector graphics ﬁle  source target level intersections single vector instance rectangle corre  groups mappings transfers shapes source sponding upper half cylinder ﬁgure  target ﬁnds mapping shape level drawn perpendicular lines lines  ﬁnally transfers structural model mapping transfer edge touching piston three segments instead                                                    ijcai                                                                                                                  figure  illustration structural model  rounded boxes represent components ovals represent  nections components properties variable pa  rameters components speciﬁed slot values each  component frame                                                                                                  figure  example line drawing piston  shape match way achieved using crankshaft ﬁll patterns layering ignored  graphtheoretic notion intersection graph  archytas corresponding line intersection graph    archytas takes each line segment circle circular representation stand line circle arc  arc set geometric points plane  k edge labels omitted clarity addition each         i ⊂  treats each vertex line intersection bounded region face represented separate node  graph vel vgs adds edge ∈   shown linked vertices edges boundary  ij i ∩  ∅ each set line dotted lines indicate collinear disconnected lines  segment vertex edge  vertices corresponding sets intersect each  basic composite shapes  edge ∈ labelled point lep ∈ i ∩ jso  graph multigraph general multiple edges depending perspective drawing particular  distinguished point labels important circles component depicted actual shape regarded  intersect lines circles points shape set connected lines arcs component  treated subgraph representation mapping depicted shape subgraph si intersec  process looks shapes subgraphs target tion graph each component model shown ﬁgure                                                         linked subgraph intersection graph called “basic    archytas represents intersections ba shape” connection components model  sic elements line drawing line segments circles union entities each connection linked  circular arcs using graph ﬁrst reads drawing subgraph called “composite shape” composite shape  ﬁll patterns layering ignored preprocessing union “basic shapes” forming larger sub  input drawings archytas look like line segments graph intersection graph forms multilevel  taken maximally connected collinear segments hierarchy shown ﬁgure   likewise cocircular connected arcs archytas cal  culates intersection points ele  ments form vertices line intersection graph  analogical mapping transfer  intersection points labelled edges figure shows goal mapping stage align shapes repre  example line intersection graph              sentations source target drawings ﬁnding corre    line intersection graph represents basic topo spondences basic composite shapes  logical information drawing reduce search augmented line intersection graphs particular archytas  space analogical mapping archytas augments graph attempts ﬁnd mappings each basic composite  additional spatial information firstly each inter shape subgraph target drawing’s line intersec  section pair line arc sets archytas adds ﬂag tion graph mapping exact each element  each edge intersection indicating lines shape description match algorithm  perpendicular prevents archytas matching say subgraph isomorphism  rectangle rhombus secondly each topological face source drawing divided basic composite  drawing bounded cycle line arc sets repre shapes drawing ﬁgure instance fol  sented special vertex linked points lines lowing depicted components each basic  boundary represents planar dual input draw shape associated piston ii connecting rod iii  ing regarded plane graph                      crankshaft iv cylinder addition following struc                                                    ijcai                                                    figure  multilevel hierarchy shown ﬁgure  transferred target ﬁrst generating line intersection  graph input drawing matching ﬁrst composite shapes composites overlap appropriately  basic shapes each basic composite shape implies component structural relation respectively suggesting  hypothetical structural model target    tural relations shown drawing each shape chose wrong pair  composite shape associated cylindrical joint pistons instead connected connecting  tween piston cylinder ii revolute joint piston rod connected cylinder clearly  connecting rod iii revolute joint connect error reasoning  ing rod crankshaft three composite shapes note various mappings single shape  overlap basic shapes crankcase it’s target symmetric let mm  →  structural relations recall undepicted         mappings shape ve source shape    order match shapes ﬁgure ﬁg ve target intersection graph leaving aside  ure archytas ﬁrst begins trying compute sub edge labels moment general  graph isomorphism each composite shape target map source shape different areas target  intersection graph ﬁnding archytas breaks incompatible instance  composite shape mappings corresponding basic shape          maxmay  mappings composites basic shape                                                                    bymbx  common overlap mapping basic shape                              inferred target                        relationship generalizes pair mappings    stated formally let’s say composite source shape mappings symmetric certain sense  sx basic shapes sa sbsothatsx  important perspective transfer target shape  sa ∪ sb source composite shape sy identical mappings effectively                                                                                          →  sy  sb ∪ sc overlap equivalent mappings mi  symmet  composites just basic shape com ric equivalent perspective transfer                                                                                       mon  ∩    mappings    rng mi    rng whererngm   range                                                           ∃        msx  msy  look overlap rng    way saying  msx  ∩ msy  expect mappings permutations each  valid mapping basic shape sbthatismsx ∩msy  group symmetric mappings sets gx  msb true infer set symmetric mappings composite shape sx  analogy basic shapes  ands composite shape sx composed basic shapes sa sb                                                                      ∈  composites sx sy present target       each mapping mi  gx divided map                                                        pings basic shapes mia mib    symmetric mappings                               division mia mib symmet  ﬁgure composite shape corresponding ric mapping sets ga gb mind archytas  pistoncylinder connection potential mappings compute mappings each composite shape target  target pistonconnectingrod connection divide sets symmetric mappings  rectangles circles constituents each set archytas compute sets symmetric  mappings target each basic shape mappings each composite mapping  overlaps properly each mapping pistoncylinder divided transfer composite shape                                                        target each composite shape mapping set basic    strictly speaking composition basic shapes shape each basic shape mapping set algorithms  tain additional edges basic shape sa ∪ sb ⊆ sx presented section                                                    ijcai                                                      shape mapping transfer                          shapeanalogy bct                                                            input   source basic shapes  goal shape transfer algorithm structure                            target drawing use patterns divide lines  source composite shapes  intersections basic composite shapes inform       target line intersection graph  archytas visual patterns depicting components struc output shapelevel mapping source shapes  tural relations important compute mappings   new target shapes  given shape relationships each                                                                    ∅                        mapping group informs new shape target result  let    basic shape mapping sets                                                                    ∅                            shapelevel mapping mapping level  let      composite shape mapping sets                                                                     ∅                     shapes individual lines intersection points  let  shapelevel mapping                                                                       ∈  transfer structural elements—components  each                                                                                               →  structural relations—can place                    consistent mappings mc                                                                                                  ∈    algorithm shape matching basic backtrack   each composite shape mapping mc                                                                        ∈  ing constraint satisfaction algorithm modiﬁcation  let bi  basic shapes  assignments values variables returned instead   composed                                                                           ∈     ∈     just ﬁrst variables intersec  let mbi     mc  bi                                                              let   xy ∈  ∈   tion points ep ∈ es source composite shape treated                       edge units pair line segments arcs  basic shape mapping set each mbi                                                                   gb creating new  intersection connects ep  i ij ∈ vsfor     ∈ es ∈ et wheree                 adding each mapping respective set                                                    ∈         and   ∈ vs distinct  gc   procedure                                                       ∈  dividual maps assignments                             each gb                                                              let mb mapping gb                     m    →                                                       let  ∈ et  ∃x ∈ es mbxe                     m jk  → wz                        let  ∈ vt   ∃y ∈ vs mbyv                                                             let tb ev new target basic shape  consistent xy∩wz                                                               create new shapelevel map mb  → tb  exactly line arc set common source           ∈  intersections exactly linearc set common  each gc                                                             let mc mapping gc   instance y  w rest tar                                                             let  ∈ et  ∃x ∈ es mcxe  vertices distinct maps consistent         ∈     ∃ ∈           mapping actually twolevel mapping  let         mc                                                                let tc ev new target composite shape  edge mapping mep  → er meq  → esandthere                                                             create new shapelevel map mc  → tc  implied vertex mapping mix m jy  w                                                            return  mkz    addition max mby ab ∈ es  xy ∈ et ifab boundary common  face region drawing xy target fi table  algorithm computes shape analogy mapping  nally singulary constraints  perpendicu transfer ﬁrst individual shapes transferred  lar intersections map perpendicular intersections non mapping source shapes newly instantiated target  perpendicular intersections map perpendicular shapes  nonperpendicular intersections  lines map  lines circles circles arcs arcs          note general shapelevel mapping    set state shape transfer algo onetoone idea mapping ﬁg  rithm outline algorithm follows    ure ﬁgure algorithm    apply each composite shape matching tar described table       drawing times possible using backtrack      ing constraint satisfaction composite shape ele  transfer structural elements      ments variables target intersection graph elements                                                        archytas mapping basic com      values matching graph structure constraints                                                        posite shapes source drawing newly instantiated        • group symmetric composite shape mappings      shapes target drawing needs transfer struc    each composite shape mapping break ba tural model source target shape      sic shape mappings                                level mappings hypothesize shapes match        • group symmetric basic shape mappings          depict component                                                        likewise composite shapes connections steps    each set symmetric basic composite shape begin mapped shapes transfer com      mappings instantiate new shape target drawing ponents connections depicted mapped shapes    return mapping source shapes target reconstructing model iteratively      shapes each instantiated                   input structure transfer process archytas set                                                    ijcai                                                    
