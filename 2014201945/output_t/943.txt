  dynamically constructed bayes nets multidomain sketch understanding                                   christine alvarado∗   randall davis†                                                mit csail                                           cambridge ma                                       calvaraddaviscsailmitedu                          abstract                          user say symbol drawing                                                        approach kara stahovich  assumes      paper presents novel form dynamically   diagram feedback control consists shapes      constructed bayes net developed multidomain linked arrows true domains      sketch recognition sketch recognition engine   systems proven useful respective      integrates shape information domain knowl    tasks aimed create general independent      edge improve recognition accuracy vari drawing assumptions domain      ety domains using extendible hierarchical ap designed instead applied number symbolic      proach bayes net framework integrates mains giving descriptions shapes commonly oc      ﬂuence stroke data domainspeciﬁc context  curring combinations shapes use descriptions      recognition enabling recognition engine threestage constraintbased approach recognition      handle noisy input illustrate behavior ﬁrst relies rough processing user’s strokes      qualitative quantitative results domains generate number interpretation hypotheses sec      handdrawn family trees circuits             ond stage uses novel form dynamically                                                        structed bayes net determine each hypothesis ﬁts    introduction                                       data stage uses evaluation guide fur                                                        ther hypothesis generation paper focuses speciﬁcally  gap people naturally express ideas second stage exploring hypothesis evaluation  ability computers use information ex stages described alvarado   ample sketching provides natural way record using bayes nets hypothesis evaluation offers  sign ideas domains sketches unavoidably static advantages previous constraintbased recognition ap  pictures aided design tools hand proaches futrelle nikolakis  hammond  offer powerful capabilities require designers interact davis  interpret drawings  through buttons menus hardware draw develop identifying shapes complete  exists missing element computer’s abil second system’s belief hypothesis inﬂuenced  ity interpret handdrawn symbols domain address strokes context shape ap  problem constructing general sketch recognition pears allowing cope noise drawing  architecture applicable number domains capable constructed sketch recognition engine used  parsing freelydrawn strokes real time interpreting domains family tree diagrams circuit diagrams  depicting objects domain  show bayes net successfully allows domainspeciﬁc    sketch recognition involves related subproblems context help overcome noise stroke data  stroke segmentation symbol recognition segmentation reducing interpretation errors compared baseline  determines strokes grouped form single  symbol symbol recognition determines symbol given  dynamically constructed graphical models  set strokes represents    difﬁculty doing segmentation recognition si timebased graphical models dynamic bayes  multaneously led previous approaches place nets widely used suitable sketch  straints user’s drawing style focus tasks understanding reasons model shapes  assumptions greatly reduce segmentation complexity based twodimensional constraints touches  example multimodal approach wu et al  temporal constraints follows second mod  sumes each symbol drawn independently els simply unroll time data arrives                                                        necessarily predict order user draw    ∗     currently harvey mudd college claremont ca  strokes things drawn previously changed    †this work funded mit icampus project supported difﬁcult use bayes nets model spatial  microsoft mit project oxygen                  relationships static bayes nets suitable task               primitive hypotheses                   language shape use mean pattern recog                         ellipsefits                     nizable given domain shapes compound                                                linefits                        composed subshapes ﬁt according constraints                                                      subshapes compound shapes                linefits                                                       nonrecursive shape decomposed                  linefits                                                        subshapes line called primitive shape primi    arrow hypothesis    subshapes                                          tive shapes named subcomponents used                                                        describing shapes endpoints line    line hypotheses ll    constraints                                        “p” “p” used figure      coincident linefitsp linefitsp     refer each shape description template     coincident linefitsp linefitsp   slot each subpart shape hypothesis template     equallength linefits linefits        associated mapping slots strokes generated     shorter linefits linefits            during recognition process similarly constraint hy     acuteangle linefits linefits        pothesis proposed constraint user’s     acuteangle linefits linefits        strokes partial hypothesis hypothesis                                                        slots bound strokes    cs hypothesis cs                                                         introduce bayes net model begin considering    subshapes                                                        model current source hypothesis cs stokes     arrow hypothesis ellipse hypothesis    constraints                                        figure  current source compound shape cs                                                        volves lowerlevel shape hypotheses—e ellipse hy     contains ellipsefits shapefitsss                                                        pothesis stroke arrow hypothesis involving                                                        strokes s—and constraint hypothesis—c  figure  single current source hypothesis cs asso dicating ellipse ﬁt stroke contains strokes  ciated lowerlevel hypotheses                        compound broken  predict priori number strokes three line hypotheses constraint  symbols user draw sketch recognition hypotheses cc according description ar  lated dynamic tasks models reason speciﬁc problem row determining strength hypothesis cs  instances particular sketch dynamically transformed problem determining strength  structed response input problem known number lowerlevel shape constraint hypotheses  task knowledgebased model construction kbmc      bayes net used evaluate cs shown figure     early approaches kbmc focused generating bayes node network each hypothesis each  nets probabilistic knowledge bases glessner node represents boolean random variable true  koller  haddawy  recently proposed repre corresponding hypothesis correct probability each  sentation uses generic template knowledge directly bayes hypothesis inﬂuenced through children stroke  net fragments instantiated linked data through parents context appears  runtime laskey mahoney  finally koller et allowing handle noise drawing  al developed number objectoriented frameworks nodes labeled oo represent measurements  koller pfeffer  pfeffer et al  getoor et al stroke data correspond constraint shape   models represent knowledge terms rela linked variables corresponding  tionships objects instantiated dynamically nodes positive real numbered values discretize                                                                          response number objects particular situation implementation  example variable mea    frameworks powerful di surement squared error stroke  rectly suitable sketch recognition best ﬁt ellipse stroke raw value later discretized  size networks encounter desirable ranges  maximum possible error  generate complete network prune nodes stroke ellipse ﬁt stroke boxes labeled                                                            network reasoning nodes network bayes net serve indicate  account fact network stroke strokes each measurement oiis                                                                                                  fully generated relevant information pruned taken measured cs ev sim                                                                       alvarado  details second pre ply pcsev  ev evidence observed  vious models optimized responding speciﬁc user’s strokes represents probability hypothesis  queries single node network contrast cs correct  model provide probabilities set possible direction links counterintuitive  terpretations user’s strokes                  important reasons links directed                                                        higherlevel shapes lowerlevel shapes instead    network structure                                  opposite direction higherlevel hypothe                                                        sis true directly inﬂuences lowerlevel hypoth  bayes net model built hierarchical descriptions  shapes domain described language called lad bn software used did support continuous variables  der  hammond davis  basic unit   paper means true means false                                                                                                                                                                               cs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         figure  partial sketch family tree quadrilaterals                                                        represent males ellipses represent females                                                        arrows indicate parentchild relationship                                   figure  bayes net verify single current source hy net model applied recognize shape size  pothesis labels come figure                   position orientation cs represents hypothesis                                                        ss form current source symbol exact posi                                                        tion orientation size symbol determined directly  esis true example arrow hypothesis stroke data   true extremely likely three line hypotheses second model competing higherlevel        true second representation allows terpretations lowerlevel shapes example  model lowerlevel hypothesis conditionally independent consider stroke line turn ei  given parents reduces complexity data ther arrow quadrilateral line hypothesis  needed construct network                      does include higherlevel shapespeciﬁc constraint    each shape description constrains subshapes rela formation arrow hypothesis node quadrilateral  tive example arrow hypothesis node point line hypothesis node  three lines satisfy necessary constraints based hypotheses alternate competing ex  observation representation models symbol’s sub planations line hypothesis discuss  shapes separately constraints ex hypotheses combined  ample node represents hypothesis stroke  line value true user intended  recognizing complete sketch  line line regardless position size orientation                                                        recognize complete sketch create bayes net similar  separately represents hypothesis line ﬁttos                                                        each shape each bayes  line ﬁttos length    conditional independence shapes nets shape fragment combined create  straints bit strange ﬁrst example complete bayes net evaluating sketch  lines length given set hypotheses user’s strokes hypothe                                                                                                        pend fact lines observation sis generation described alvarado davis                                                                        nodes constraints calculated way alvarado   instantiates corresponding  value dependent true interpretation stroke shape fragments links form complete  example calculating lines bayes net called interpretation network illustrate  length ﬁrst ﬁt lines strokes regardless process consider piece network generated response  actually look like lines measure strokes   example figure  figure  shows  length lines ﬁt original strokes bayes net representing hypotheses  considered calculation                   generated strokes low level processing rec                                                        ognizes strokes   lshaped polylines breaks    fact edge constraint nodes each individual lines  meet  shapes constrain important implication                        using model perform recognition guaran  linking shape fragments  tee bayes net constraints measured                                                        bayes net fragments linked during recognition  correct subshapes model allows sub                                 shapes constraints detected independently ex each node hn parents sm each                                                        parent represents possible higherlevel interpretation hn  ample want figure  indicate  lines head arrow length use noisyor function combine inﬂuences                                                        parents hn produce complete conditional proba  simply lines length satisfy                    requirement ensure measured bility table cpt hn sm  noisyor func                                                       tion models assumption each parent indepen  strokes measured  use separate mechanism ensure legal bind dently cause child observed example single  ings created strokes observation nodes  orientationdependent symbols downwardfacing ar    way model shape constraint information row recognized including orientationdependent  important advantages recognition bayes straints descriptions vertical belowstroke quadrilateral arrow                interpretations favor interpretation stroke                              line set hn     parents                                                                                                         hn required subshape constraint set  phn  sk  parents sk hn                                                               constraints          constraints constraints                                                                                  optional subshape constraint consequence val              ues  ⇒ phnssm                                                                           observations observations  hn required exactly intended            observations        experimented noisyxor  construct imple  mented using “gate node” similar described                stroke stroke  boutilier et al  noisyor semantics  simpler fact produced better results effect figure  portion interpretation network generated  noisyor node bayes net low prior probabilities recognizing sketch figure   behaves nonaggressive xor fact parent  true does actively prohibit parents correct lowlevel hypotheses proposed  true causes probabilities tend prior cause lowlevel recognition errors partial hypothesis  values “explaining away” phenomenon   high probability cues examine sketch                                                        possible missed lowlevel interpretations during hy    signal level noise                               pothesis generation step  layer network deals signal level noise  modeling differences user’s intentions  implementation bayesian inference  strokes draws example user updates structure bayes net response  intends draw stroke likely match ex each stroke user draws using offtheshelf open  actly model account variation consider source bayes net package java called bnj bnj   pol  recall discretized continuous val generating modifying bnj networks time  ued variable user drew perfect lines dis consuming exponential size cpts  tribution    error   nodes use techniques improve performance  people draw perfect lines networks generated needs  inaccurate pen muscle movements dis evaluate likelihood hypothesis ondemand  tribution allows error high struction efﬁcient continuously updating net  close zero fall gets larger wider work batch construction cpts  distribution error tolerate efﬁcient incremental construction second  information perfect line provide         modiﬁes portion network changed    distribution needed pol   tween strokes creating scratch time  probability distribution line error given user did experimented inference methods  intend draw line distribution close loopy belief propagation loopy bp weiss   uniform dip  indicating user specif successful data loopy bp al  ically does intend draw line draw ways converged messages initialized  run node val  shape probably won’t draw resem ues stable  limited algorithm’s  bles line details determined conditional running time ways terminated algorithm  probability distributions primitive shapes  seconds converged second al  straints corresponding observation nodes given lowed each node  parents   alvarado                            higherlevel hypotheses considered single hy                                                        pothesis ensuring limit complexity graphs    missing strokes                                  produced restrictions little impact recognition                                                        performance family tree domain complex  partial hypothesis—it represents hypothesis                                                      mains circuit diagrams efﬁcient inference algo  stroke  arrow line                                                       rithms graph simpliﬁcation techniques needed im  drawn line nodes representing lines                                                        prove recognition results  drawn linked observation  nodes stoke measure  observations refer nodes correspond  application results  ing hypotheses virtual                           applied implemented  nontrivial    fact partial hypotheses probabilities allows domains—family trees circuits—and ca  assess likelihood incomplete interpreta pable recognizing sketches domains  tions based evidence seen far fact programming qualitative quantitative evaluation  virtual nodes probabilities corresponding proba  bility user eventually intends draw shapes junction tree jensen et al  slow  drawn diagram gibb’s sampling did produce meaningful results                                                                                               wire                                                              wire battery wire ground battery                                                                                                                                  line                                                         line                                                                                line                                                           aligned                        parallel                                                                           parallel aligned                                                                                                    sqerr                                                          sqerr smaller nextto                                                                                    smaller nextto                                                      meas        meas  meas         meas                                                                 meas meas  sqerr meas meas       figure  three possible ground symbols                                                        figure  bayes net produced response strokes                                                        each ground symbol figure  shaded area shows  illustrates strengths previous approaches network produced response ﬁrst strokes  suggests extensions    applying particular domain involves               pshapestroke data  steps specifying structural descriptions shapes           strokes   strokes  domain specifying prior probabilities                 level shapes domain patterns wire           parents bayes net each domain wrote  wire                 scription each shape pattern domain hand wire na  na   na           estimated priors each domain pattern level shape battery          based intuition relative prevalence each battery na na  na          shape example familytree diagrams estimated  ground            marriages likely partnerships                                                        table  posterior probabilities network fig  set pmar ppart  priors represent                                                        ure  each sketch figure   probability group strokes chosen random  page represent given shape cases  relatively low setting priors hand wires resistors ground symbols batteries figure   tedious through experimentation sys shows bayes nets produced response user’s ﬁrst  tem’s recognition performance relatively insensitive ﬁrst three strokes ﬁrst strokes net  exact values priors example circuit work contains nodes shaded area three  diagrams increasing priors order magnitude strokes contains nodes shown continuous variables cor  did affect recognition performance matters instead responding observation nodes discretized three  relative values prior probabilities    values  low error stroke data strongly supports shape    capable recognizing simple sketches constraint  medium error stroke data weakly supports  nearly perfectly familytree circuit domains shape constraint  high error stroke data does  tested performance complex realworld support shape constraint  data standard test corpus sketch recog posterior probabilities given table  rel  nition collected sketches atively clean ground symbol figure stroke data  available online encourage compare results strongly supports shapes constraints shaded                                          presented oltmans et al   total nodes figure  value  ﬁrst strokes  tested  family tree sketches  circuit battery symbol ground symbol equal weight  diagram sketches   strokes each counterintuitive strokes user                                                        drawn appears complete battery    qualitative results                              drawn piece ground symbol recall  qualitative analysis reveals bayes net mechanism bayes net models drawn  successfully aggregates information stroke data user intends draw strokes equally likely  context resolves inherent ambiguities drawing user process drawing ground symbol af  updates weighting various existing hypotheses ter stroke ground symbol’s probability increases  new strokes drawn show through example evidence support bat  bayes net scores hypotheses correctly respects tery’s probability decreases fact ground symbol  prefers group subshapes fewest number preferred battery illustrates prefers  terpretations allows competing interpretations inﬂuence interpretations result fewer symbols okham’s razor  updates interpretation strengths response interpretations involve user’s strokes  new stroke data allows stroke data context support higher score bayes net fact  inﬂuence interpretation strength                     battery symbol gets weaker ground symbol gets    illustrate points consider stronger results “explaining away” behavior  responds user draws three sets strokes bayes net conﬁguration each lowlevel components  figure  ground symbol simplify example lines constraints effectively “explained”  consider reduced circuit domain users draw existence ground symbol battery longer
