                      scenariobased stochastic constraint programming              suresh manandhar armagan tarim                                   toby walsh                  department science                    cork constraint computation centre                     university york england                      university college cork ireland                  email sureshatcsyorkacuk                          email twcuccie                               abstract                              compiled conventional nonstochastic con•                                                                straint programs using scenariobased interpretation        model combinatorial decision problems involv•         compilation allows use existing constraint solvers with•       ing uncertainty probability extend           modification power hybrid        stochastic constraint programming framework pro•         solvers combine constraint solving integer pro•       posed iwalsh  number impor•          gramming techniques propose number tech•       tant dimensions multiple chance constraints     niques reduce number scenarios generate ro•       range new objectives provide     bust solutions implemented framework de•       new equivalent semantics based scenarios       cision making uncertainty language called stochas•       using semantics compile stochastic          tic opl extension opl constraint modelling        constraint programs conventional non         language ihentenryck et al  finally        stochastic constraint programs allows       wide range problems modelled stochastic        exploit power existing constraint solvers   opl illustrate potential        implemented framework decision        making uncertainty stochastic opl lan•        stochastic constraint programs        guage based opl constraint mod•       elling language hentenryck et  il•        stage stochastic constraint satisfaction problem        lustrate potential framework model       stochastic csp decision variables set        wide range problems areas diverse fi•      stochastic variables stochastic variables independent        nance agriculture production                       decision variables values probabilities given                                                                 probability distribution models situations                                                                 act observe later example de•   introduction                                                cide nurses duty later   decision problems contain uncertainty data        discover actual workload easily invert instan•  events past known exactly errors  tiation order application demands stochastic   measuring difficulties sampling whilst data events variables set decision variables constraints   future simply known certainty ex• defined traditional constraint satisfaction relations   ample scheduling power stations need cope   allowed tuples values constraints im•  uncertainty future energy demands second example    plemented specialized efficient algorithms con•  nurse rostering accident emergency department re•   sistency checking   quires anticipate variability workload final ex• allow hard constraints sat•  ample constructing balanced bond portfolio   isfied chance constraints satisfied   deal uncertainty future price bonds deal   possible worlds each chance constraint   situations walsh  proposed exten•    threshold  constraint satisfied   sion constraint programming called stochastic constraint  fraction  worlds stage stochastic csp satis  programming distinguish decision vari•   fiable iff exists values decision variables   ables free set stochastic observed given random values stochastic variables hard   variables follow probability distribution   constraints satisfied chance constraints   framework combines best features      satisfied given fraction worlds note   traditional constraint satisfaction stochastic integer program• iwalsh  allowed global chance constraint   ming stochastic satisfiability                          definition stochastic constraint programming     paper extend expressivity framework strictly general   considerably adding multiple chance constraints   range objective functions like maximizing down•  side show stochastic constraint programs       constraints                                                                                                           given random values vsl values   certain decision variables shared scenarios    vd given random values vs hard constraints stage decisions example shared scenar•   satisfied chance constraints sat• ios great advantage approach use    isfied given fraction worlds note conventional constraint solvers solve stochastic constraint      values chosen second set decision variables vd programs need implement specialized solvers    conditioned values chosen set de• course price pay number scenar•     cision variables vd random values given    ios grows exponentially number stages    set stochastic variables vs model situations results show scenariobased approach feasible    items produced consumed     problems observe better perfor•   stock later consumption future production depends   mance using approach production planning exam•   previous production earlier decision variables  ple introduced walsh  addition discuss    previous demand earlier stochastic variables            later developed number techniques like latin      stage stochastic csp defined analogous way    hypercube sampling reduce number scenarios con•   stage stochastic csps note walsh       sidered     insisted stochastic variables values inde•   pendently each prevents representing num•  stochastic opl    ber common situations example market goes                                                                  implemented framework opl con•   quarter probably likely                                                                  straint modelling language hentenryck et al     second quarter second stage stochastic variable                                                                  opl model consists parts set declarations    representing market index dependent   followed instruction declarations define data    stage stochastic variable representing maiket index types input data decision variables opl in•   semantics given stochas• struction satisfy set constraints maxi•   tic constraint programs solution methods proposed  mizeminimize objective function subject set con•   walsh  used assumption al•  straints extended declarations include    low later stage stochastic variables values declaration stochastic variables instructions in•  conditioned earlier stage stochastic variables         clude chance constraints range new goals like max•     stochastic constraint optimization problem stochastic    imizing expectation objective function   cop stochastic csp plus cost function defined   decision stochastic variables walsh     variable declaration   goal considered solution satisfies                                                                  declare decision stochastic variables   stochastic csp minimizes maximizes expected                                                                  stochastic variables set according probability distri•  value objective function extend                                                                  bution using command form   wider range goals example wish limit   downside maximize value cost function   stoch type id dist   minimize spread minimize difference be•    type decision variables data type   tween largest value cost function   range values enumerated list values                                                                  id decision variables variable    scenariobased semantics                                     dist defines probability distribution stochas•                                                                 tic variables probability distributions include uniform   walsh  semantics stochastic constraint pro•   poisson lambda user defined list nec•  grams given based policies policy tree de•    essarily normalized values types distribution   cisions each path policy represents different possi•   supported needed insist stochastic variables   ble scenario set values stochastic variables arrays index describing stage   values assigned decision variables scenario examples   satisfying policies walsh  presents backtracking   stoch  marketyears uniform   forward checking algorithms explores implicit     stoch  demandquarter    andor graph stochastic variables nodes   policy satisfies values whilst deci•  variable each year takes   sion variables nodes need satis•   value equal probability de•  fying value                                                   mand variable each quarter takes value        alternative semantics suggests alternative so•  cases    cases  remaining   lution method comes scenariobased view birge      cases   louveaux  scenario possible set values   constraint posting   stochastic variables scenario associated   each path policy each scenario con•  post hard constraints opl chance   ventional nonstochastic constraint program solve     constraints chance constraints hold neces•  simply replace stochastic variables values taken    sarily scenarios posted using command   scenario ensure values de•  form   cision variables consistent scenarios note     probconstraint arithop expr                                                                                                              constraints constraint opl constraint                         prob    arithop arithmetically comparison                   demandi  productionistocki    operations    expr arith•                    metic expression contain decision variables     compiled sum constraint form   just rational float range   example   following command specifies chance constraint       sumj scenarios pj   each quarter demand stochastic variable does         demandij    exceed production decision variable plus stock              productionijstocki    carried forward each quarter auxiliary modelled             conventional constraint programming decision       scenarios set scenarios   prob•  variable  probability                                ability scenario demand  demand sce•    foralli                                            nario quarter note bracketing         probdemandi                                         inequality reifies constraint takes value                    productionistocki                        satisfied                                                              hard constraints transformed consider exam•                                                                 ple hard constraint   constraints chance constraints hard                                                                   wealtht  bondst  stocks    hold possible scenarios example stock   carried forwards computed hard constraint          compiled forall constraint form     foralli                                              forallj scenarios         stocki  stocki  productioni                        wealthtj  bondstj  stockstj                                          demandi             wealth wealth time scenario                                                                  maximization minimization instructions    optimization                                               transformed consider example optimization instruc•  stochastic opl supports stochastic constraint satisfac•   tion   tion optimization problems maximize mini•        maximize expectedwealthn   mize expectation objective function example     subject    book production example walsh    minimize expected cost storing surplus books each      compiled instruction form   book costs  quarter store specified    maximize sumj scenarios   following partial model                                     pj wealthn     minimize expectedcost                                       subject      subject                                                   rest stochastic opl model transformed sim•       cost                                                     ilar manner           sumi ln maxstocki        foralli                                          value information stochastic           stocki  stocki  productioni                      solutions                                           demandi                                                                  stochastic optimization problems compute statis•  stochastic opl supports number optimization    tics quantify importance randomness value   goals example                                            stochastic solution vss difference objec•    minimize spreadprofit                                      tive function stochastic problem stochas•    maximize downsideprofit                                    tic solution ss objective value determinis•    minimize upsidecost                                        tic problem computed replacing stochastic variables                                                                  expectations expected value solution evs   spread difference value objective                                                                  vss  ss  evs computes benefit know•  function best worst scenarios whilst downside                                                                  ing distributions stochastic variables clearly vss   upside minimum maximum objective function value                                                                  nonnegative compute expected value   possible scenario                                                                  waitandsee solution wss calculate                                                                  stochastic variables values according probability dis•   compilation stochastic opl                                tributions best values decision vari•  stochastic extensions compiled conven•     ables difference wss ss expected   tional nonstochastic opl models automatically exploit•   value perfect information evpi evpi  wss  ss   ing scenariobased semantics compiler written      measures expect win   lex yacc graphical interface visual     perfect information stochastic components   compilation involves replacing stochastic variables   problem words evpi measures value   possible values decision variables ragged array   knowing future certainty   decision variables each possible scenario consider   spent gathering information uncer•  chance constraint                                   tain world       constraints                                                                                                                                                                            production planning                                                                  problem comes walsh  results table                                                                   show scenariobased approach offers better per•                                                                 formance problem forward checking back•                                                                 tracking tree search algorithms introduced paper                                                                  problem involves planning production quarters                                                                  each quarter expect sell   copies                                                                  book customers happy want satisfy de•                                                                 mand quarters  probability prob•                                                                 lem modelled stage stochastic csp                                                                    decision variables xi representing production each quar•                                                                 ter stochastic variables representing                                                                  demand each quarter limit stock carried forward                                                                  use simple heuristic picks smallest possible val•                                                                 ues decision variables alternative convert                                                                  problem optimization problem cost                                                                  books store explore option                                                                  easy implement stochastic opl                                                                  compare results forward checking                                                                  backtracking algorithms walsh                                                                    portfolio management                                                                  portfolio management problem birge louveaux                                                                   modelled stochastic cop suppose                                                                  invest  investments wc wish exceed                                                                  wealth investment periods calculate util•                                                                 ity suppose exceeding equivalent income                                                                  excess meeting goal equivalent                                                                  borrowing cost short defines                                                                  concave utility function  uncertainty                                                                  problem rate return random variable                                                                  each investment each period objective deter•                                                                 optimal investment strategy maximizes                                                                  investors expected utility                                                                    problem  stages  scenarios com•                                                                 pare effectiveness different scenario reduction al•                                                                 gorithms adopt step procedure step                                                                  scenario reduced problem solved periods de•                                                                 cision observed solve fullsize non scenario                                                                  reduced problem optimality decision fixed   finally implemented scenario reduction method used    difference objective values so•  stochastic programming dupacova growekuska        lutions normalized range optimal solution observed   romisch dupacova et al  report power pro•         worst solution normalized error committing   duction planning problems method offers       scenario reduced decision fig    accuracy sampling  scenarios  accuracy        dupacova et als algorithm effective latin hy  sampling just  scenarios method heuristically    percube sampling small distance   deletes scenarios approximate closely possible    far ahead likely scenario method requires   original scenarios according fortetmourier metric approximately half scenarios decision   stochastic parameter space                                    correctly                                                                     yield management    examples                                                                  farmers deal uncertainty weather   illustrate potential framework decision mak• factors affect crop yields example taken   ing uncertainty wide range prob•   birge louveaux  decide   lems modelled problem compare   acres fields devote various crops   scenariobased approach previous tree search meth•    planting season certain each crop required   ods solving stochastic constraint satisfaction problems cattle feed purchased wholesaler   three problems illustrate effectiveness raised farm crop excess cattle feed   different scenario reduction techniques                       sold eu quota excess quota                                                                                                              constraints                                                               production capacity constraints stochastic demand                                                                 objective minimum expected cost policy                                                                 cost components account holding costs backlogging                                                                 costs fixed replenishment setup costs unit produc•                                                                tion costs optimal policy gives timing replen•                                                                ishments ordcruptolevels exact                                                                 order quantity known realization                                                                 demand using scenario dependent orderuptolevel deci•                                                                sions problem  stages  scenarios fig                                                                  dupacova et als algorithm latin hy                                                                percube sampling effective                                                                 small distance ahead likely scenario method                                                                    robust solutions                                                                 inspired robust optimization methods operations re•                                                                search kouvelis yu  stochastic opl allows                                                                 robust solutions stochastic constraint programs   sold low price crop yields uncertain de•                                                                solutions similar decisions   pending weather conditions during growing season                                                                 different scenarios impossible undesirable   problem  stages  scenarios fig                                                                  decision variables robust identify   dupacova et als algorithm latin hyper                                                                decision variables values wish identical   cube sampling effective far ahead                                                                 scenarios using commands form   likely scenario method requires approximately   scenarios decision cor•   robust var   rectly                                                        example productioninventory problem sec                                                                 decision variables orderuptoievels replenish•   productioninventory control                              ment periods declared robust variables values   uncertainty plays major role production inventory    sets decision variables fixed   planning simplified productioninventory planning    beginning planning horizon robust solution damp•  example single product single stocking point  ens nervousness solution area active      constraints                                                                                                          
