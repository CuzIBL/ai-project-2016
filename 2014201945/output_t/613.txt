         framework decentralized qualitative modelbased diagnosis∗            luca console claudia picardi                              daniele theseider dupre´                 universitaditorino                             universita del piemonte orientale             dipartimento di informatica                            dipartimento di informatica      corso svizzera   torino italy               bellini  alessandria italy             lconsolepicardidiunitoit                                dtdmfnunimpnit                        abstract                          subsystems each having local diagnoser su                                                        pervisor associated overall aim      paper propose framework decen   coordinating local diagnosers producing global diag      tralized modelbased diagnosis complex systems noses approach computes set partial diagnoses      modeled qualitative constraints    kleer et al  represents consistencybased      models distributed subsystems    diagnoses designed avoid commitment parts      assume local diagnosers associated    model unnecessary explain observations      subsystems coordinated super   way local diagnosers queried global hypothe      visor acts diagnoser complex ses contribution irrelevant      local diagnosers supervi       paper organized follows section      sor communicate standard interface share decentralized architecture propose section       common modeling ontology diagnostic    introduces type models used diagnosis run      architecture connections subsystems ning example discuss decentralized diag      need known runtime allowing dy nostic process carried approach section       namic reconﬁguration             analyze complexity section  ﬁnally conclude      approach designed compute partial hy   discussion related work      potheses order avoid unnecessary queries      local diagnosers                                    architecture                                                        propose supervised diagnostic architecture    introduction                                         • local diagnoser associated each subsystem  developing diagnostic software complex systems   model subsystem private  challenging task especially composed                                                          • supervisor diagnostic process associated  subsystems coming different suppliers                                                            coordinates work diagnosers  common situation industry decomposition                                                            optimizing invocations during diagnostic session  recognized important leverage manage architec  tural complexity systems diagnosed deﬁnition consider general case  approaches focus hierarchical decomposi supervisor needs apriori knowledge  tion genesereth  mozetic  decentraliza subsystems paths interaction  tion explored frequently pencol´eand reconstructed run time local diagnosers  cordier  hand new problems necessarily know each ensures subsys  faced independently manufactured subsystems  tems addedremovedreplaced independently  sembled each subsystem come possibly   each time  embedded diagnostic software details  disclosed customers diagnostic software com ii each local diagnoser implement given commu  plex account subsystems nication interface supervisor reason  diagnosers structure able assemblersupplier relationship  paths interaction subsystems deﬁned stati iii possible hierarchical architecture  cally change dynamically redundant supervisors corresponding hierarchical decom  design software systems like web services       position    paper propose decentralized supervised ap                                                          architecture deﬁnes communication interface  proach diagnosis assume formed                                                        tween local diagnosers supervisor    ∗this work partially supported eu wsdiamond share modeling ontology allows each lo  project ist miurprin quadrantis project cal diagnoser use modeling language assump                                                    ijcai                                                     tions provided able map common                                                                                     cockpit  during communications                                  independent                                                            power    local diagnosers awakened subsystem                       Δx                                                            supply                             Δy                                                                        dc power  Δc               leds  charge anomaly fault detected                          hydraulic  explain fault locally blame                        extraction                                                                    Δ     power   Δ            Δ  landing                                                            engine               subsystem   received subsystem communicate             transmission                gear  supervisor explanations disclosing  tails possible local failures supervisor                                                         figure  landing gear section aircraft  voke local diagnoser blamed subsystem asking  generate explanations supervisor ask lo                                                                 cal diagnoser check predictions               ld     ldn   order obtain loosely coupled                                                        tegration supervisor assumes each ldi stateless  models                                               invocation local diagnoser independent                                                        interaction deﬁned  section discuss modeling ontology used • interface each local diagnoser implement  interface common modelbased diag discussed section  role each local diag  nosis consider componentoriented models each  nosers consists generating hypotheses consistent  component correct behavior possibly model subsystem corresponding obser  faulty behaviors each behavior component modeled vations  relation set variables                                                          •    consider qualitative models variables algorithm supervisor computes diag  ﬁnite discrete domain representing discretiza noses coordinating local diagnosers through  tion corresponding physical quantity abstrac interface explained section  role  tion properties implies model supervisor propagate hypotheses neigh  component  ﬁnite relation including mode    bors local diagnoser         cm  variable    ranges set behavior modes  extend interface  ok ababn component                                                        assume each local diagnoser ldi reasons    example paper use deviation models                 malik struss  each physical quantity rep model subsystem point view                                              Δq        supervisor interactions local diagnosers each  resented model corresponding variable rep      resenting qualitative abstraction deviation model relation set variables  respect expected value particular sign abstrac • mode variables denoted sim express behavior  tion −   expressing lower equal mode components si  higher expected value                      • inputoutput variables express values quantities    paper deal atemporal diagnosis si exchanges subsystems  suming models abstract away temporal informa • additional internal private variables  tion course restrictive brusoni et al     running example use simpliﬁed air interface supervisor local diag  craft concerned landing nosers single operation called extend  gear figure  represents highlevel view supervisor invokes local diagnosers  terms subsystems ones pictured dashed line abnormal observation local diagnosers autonomously  directly example shown execute extend send results supervisor  sake completeness                                   goal extend explain andor verify consis    hydraulic extraction hes creates pressure tency observations andor hypotheses lo  mechanically pushes landing gear extract cal diagnosers input extend invoked                                                        ldi set hypotheses values inputoutput  ing hes connected leds cock      pit show subsystem powered variables hypotheses represented set  order create pressure hes takes power partial assignments variables  sources main source power transmission particular case extend autonomously ex  aircraft engine actually powers main pump ecuted local diagnoser receiving abnormal ob  hes secondary source used transmit pilot servation subsystem set hypotheses contains  command cockpit light leds inde assignment domain                                                          each hypothesis α received input ldi ﬁrst  pendent power supply produces lowamperage dc             α  current                                              check consistent local diagnostic model                                                        mi  local observations ωi extension ldi                                                        perform interpreted follows causal    decentralized diagnostic process                   terms backwards verify hypothesis needs  section diagnostic process assumptions supported mi ωifor  carried mentioned super wards hypothesis consequences  visor coordinates activities local diagnosers subsystems used discard conﬁrm                                                    ijcai                                                                                                                   pm pΔc pΔv pΔf pm pΔc pΔv pΔf           hydraulic extraction subsystem                        ok            stuck       −                                                                 ok            stuck       −       Δx                 wire                 Δy    dc power                                  dc power           ok     −    −   stuck   −    −      input                                 output           ok            stuck       −       Δc                                                        ok            stuck       −    dc power                         pressure                    ok     −    − stuck  −   −   command pump                     pipe    valve   chamber   Δe                ok  −       −   stuck −      −       Δv                                     extraction             −       −    −       −   main power                                                    ok               stuck                                                                 ok  −   −    −   stuck −  −    −  figure  closer view hydraulic extraction suppose extend called mp having                                                        assignment α domαpΔf                                                            αpΔf  −                        α    let consider example hydraulic extension              veriﬁed ad                                                        missible minimal admissible extensions α wrt  figure  suppose local diagnoser ldhes  associated hes receives input assignment  assigns value ”−” output data variable hesΔe               pm pΔc pΔv pΔf                                                                        γ stuck        −  representing mechanical extraction landing gear           γ     −        −  value means landing gear did extract           γ          −   −  expected ldhes respect local γ γ γ express three possible explanations  model following happened       Δf    − pump stuck powered    • internal component failed example pump did receive command each three assign      stuck pipe leaking                  ments unassigned variables value irrele                                                        vant explanation    • inputs pump wrong exam      ple pump powered received  supervisor algorithm      command                                                        supervisor started local diagnoser lds sends    means partial assignment hesΔe  − results extend operation executed conse  extended ways assigning hesm  stuckor quence abnormal observation  hesm   leakingorhesΔv    −orhesΔc    −         during computation supervisor records follow    important regarding extensions ing information  include said given hypothesis • aseth assignments representing current hypotheses  said words                                                          • each assignment α each variable ∈  interested knowing given assignment   α                αx  strains variables model does dom  amodiﬁed bit mdf        following deﬁnition captures formalizes notion assume given input output vari                                                        able mentioned local diag  deﬁnition  let mi local model local observations nosers supervisor able determine variables  ωiandletγ assignment say γ admissible connxconnkx connected make  respect mi ωi                         assumption information known apri                                                        ori supervisor retrieved dynamically    γ extension ωi                                                        provided local diagnoser      γ                  ii  consistent                             supervisor initializes data structures   iii miγ model obtained constraining mi γ sults initial extend operation awakened                                        γ      restriction variables assigned equivalent •hcontains assignments sent lds                           restriction variables result extend                          ≡                           iγ varmidomγ  varmidomγ         • each α ∈h each ∈ domα supervi                                                            sor extends α connxconnkx assigning    each assignment α received input ex                                                            αconnjx  αx super  tend operation local diagnoser ldi returns set                                                            visor sets mdfαconnjx    assignments eα contains minimal admissible exten  sions α respect mi ωi restricted input modiﬁed bits used supervisor understand  mode variables mi notice α invoke local diagnoser accord  inconsistent observations model eα ing following                                                                                               αx     minimal admissibility avoids unnecessary commitments rule subsystem variable mdf                                                                 α                                      α  values variables concretely constrained thenldi candidate invocation  current hypothesis                               passed extend    order illustrate deﬁnitions let consider initializing data structures supervisor loops  simpliﬁed model mp pump model   following steps  includes variables pm represents behavior mode step  select ldi invoke supervisor se  pΔv  power supply pump pΔc command      lects local diagnosers ldi  turns pump pΔf ﬂow coming  assignment α meeting rule  pump extensional representation mp        loop terminates                                                    ijcai                                                     step  invoke extend ldi invoked need  establish relation      fore diagnostic process input extend consistencybased diagnoses let ﬁrst extract diagnostic      set assignments restricted variables information assignments      mi input consists      signments α meet rule                     deﬁnition  let α assignment end                                                                                                Δα  step  update supervisor receives output diagnostic process diagnostic information associ                                                                α      extend  ldi each α input extend ated restriction mode variables      returned possibly set extensions eα                                                           consequence theorem       γγkthenα   replaced set      assignments ββk βj obtained                                                        proposition  set Δα  α ∈his complete set        • combining α each γj ∈ eα                partial diagnoses kleer et al  wrt model        • extending result combination observations ω meaning total mode assignment          nected variables each ∈ domγ rep completing Δα consistencybased diagnosis          resenting inputoutput variable βjconnx  ω consistencybased diagnosis completion          βjx                                        Δα      implies rejected assignments having exten                                                      corollary  let set diagnoses obtained com      sions removed  step follow         Δα      ing place exactly way extend pleting ok assignments set minimal                                                        diagnoses coincides set minimal consistency      operation invoked supervisor                 ω      autonomously executed local diagnoser based diagnoses       ceiving alarm treated extension                                        α               notice supervisor algorithm role mode      assignment applicable      variables peculiar variables local  step  update mdf bits each assignment βj added given supervisor communicates      step  mdf bits set follows            value local diagnoser different originating                                                        needed crossconsistency checks       each variable belonging mi                                                        main reasons need supervisor          ∈ domβj ∈ domα mdfβjx set                                                        aware                                                                    •      ii each variable belonging mi ∈ provide connection different invo          domβj mdfβjx set                   cations local diagnoser having su                             ∈     β  ∈    α        pervisor record send subsequent      iii variable dom    dom            calls allow local diagnosers stateless          mdfβjx  mdfαx                                                          • supervisor needs compute globally minimal    notice diagnostic process terminates new requests diagnoses  extend generated assignments properly  extended assignments extended indeﬁnitely notice goals values    prove following                         mode variables need explicit local diagnosers                                                        associate each fault mode coded id use value                                                        mode variables way information hap  theorem  let  denote global model let ω pened inside subsystem remain private  note set observations obtained during diagnostic let sketch scenario execution supervisor al                                             process end supervisor loop set par gorithm figure  suppose ldlg  tial assignments following properties        tices landing gear did extract blames    each partial assignment α ∈his admissible hydraulic extraction supervisor asks      spect ω                                 ldhes explanation receives extensions                                                        hes takes responsibility prob                                          ω   ii set extensions complete wrt  lem pump stuck pipe leaking                            γ                    ω      each total assignment consistent    blames respectively power transmission                α ∈h          γ                α      exists    extension     Δv  dc power input Δc                                                          local diagnoser power transmission    proof theorem relies following property asked explain blame observation conﬁrming  admissible extensions                             input Δt ok explain                                                        ternal failure local diagnoser dc power  proposition  let denote interacting mod asked explain blame dc power explain  els observables ω ω let α partial internal failure states type er  signment   denotes composition ror produce problem output Δxat  models α admissible wrt mω point ldhes invoked verify consequences  wrt mω admissible wrt  mω  ω  prediction states problem Δx                                                    ijcai                                                     produce similar problem Δy  local diagnoser having minimal extensions impact three  leds subsystem discards possibility thanks lo aspects diagnostic process contents ex  cal observations causes failure changed messages hypotheses set larger  hydraulic extraction power transmis second local diagnoser invoked  sion                                                 information provide irrelevant diagnostic pro                                                        cess section relaxedex    hierarchies supervisors                       tend  lower complexity extend tradeoff  section discuss problem having multi taken account selecting diagnostic archi  layered hierarchical structure diagnosers tecture  section  relevant impact complexity  issues                                               complexity    let consider supervisor s intermediate level                                                     section discuss complexity proposed al  hierarchy charge portion global model gorithm diagnosis npcomplete ex  observations ωwhens invoked higher                                                      pect better  level supervisor  loop starts data structures initial approach core diagnostic process  ized follows                                      supervisor loop task composed activities    •hcontains assignments asked extend invocations local diagnosers merging results    • each α ∈h each ∈ domα  s sets  depends size results      mdfαx                                      need recall supervisor builds set par                                                        tial assignments worst case exponential                                s    general end loop does compute number variables merging activity  minimal admissible extensions initial assignments worst case exponential local diagnoser invoca         ω    wrt      fact theorem  guarantees tions each invoked each interface  returned extensions admissible each input variable model denote ki number vari  assignment complete set extensions returned                  ˜                                                        ables model mi ki ≤ ki number interface  extensions minimal                                                        variables mi express complexity    possible sufﬁcient condition supervisor  guarantees minimality provides way es                                                                                ˜  timate distance returned extensions mini          oe okicldki  mality intuitively minimality guaranteed                                                                 context subsystem operating subsys ld denotes complexity local diagnoser  tems connected limits possible behaviors wrt invocation model ki variables  described model                                 let consider extend operation performed    formally let consider supervisor local local diagnosers given model input assign                                                             α                                         α  diagnosers model partitioned mmn ment  task ﬁnding admissible extension                                                         each owned different ldiletm   denote     essentially satisﬁability problem sufﬁces ﬁnd                                    var                                       projection variables mi  total assignment satisfying α task exponential    ≡                                      number involved variables                 varmi supervisor actually  computes minimal admissible extensions mi  unfortunately ﬁnding minimal admissible extensions                                                                                       np  larger  varmi farther returned extensions harder nphard belongs np does  minimality                               appear complete class    operation computed supervisor model   analyzing complexity expression   observations ω general case model split subsystems upper  laxedextend   each input assignment α returns bound number variables each ki  complete set admissible extensions α wrt ω treated constant complexity overall                                                                                  replacing extend relaxedextend   effect algorithm goes oe   correctness algorithm theorem  does componentoriented systems models decompo  exploit assumption extensions returned local sition straightforward components usually reasonably  diagnosers minimal                               sized complexity systems depends number                                                        components complexity individual  proposition  local diagnosers involved diagnos components suggests best way tackle  tic process implement relaxedextend operation complexity extend increase number local di  supervisor coordinating implements relaxedex agnosers decrease size models care  tend                                         case multilayered architecture section                                                         proﬁtable particular split models obtained    multilayered hierarchy supervisors possible projecting global model case split  choosing treat subsystem multiple local efﬁciency reasons subsystem privacy  diagnosers result nonminimal loss quality results complexity  admissible extensions                                algorithm lower                                                    ijcai                                                     
