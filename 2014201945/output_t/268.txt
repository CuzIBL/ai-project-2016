                       automated design multistage mechanisms∗             tuomas sandholm                   vincent conitzer                   craig boutilier       carnegie mellon university             duke university                university toronto     science department         dept science        dept science         sandholmcscmuedu               conitzercsdukeedu              ceblycstorontoedu                          abstract                          strategic behavior agents classical mechanism                                                        sign provides general mechanisms certain      mechanism design study preference ag   assumptions satisfy notion nonmanipulability      gregation protocols work face    maximize objective typically mechanisms      selfinterested agents present ﬁrst    rely probabilistic information agents’      generalpurpose techniques automatically  preferences vickreyclarkegroves vcg mecha      signing multistage mechanisms reduce   nism    easily applied distribution      elicitation burden querying agents preferences     general algo      formation relevant given answers rithms work restricted settings require      previous queries ﬁrst show turn given possibility side payments work speciﬁc ob      automatically designed using constrained op jectives reﬂect designer’s objectives      timization techniques singlestage mechanism                                                          recently automated mechanism design amd      efﬁcient corresponding multistage mech                                                        proposed means design mechanisms automatically      anism given speciﬁed elicitation tree                                                        setting hand   approach based      present greedy dynamic programming dp al                                                        constrained optimization produces optimal specialpurpose      gorithms determine elicitation tree opti                                                        mechanisms settings good general mech      mal dp case show query                                                        anisms known impossibility results pre      savings inherent multistage model                                                        clude existence good general mechanisms class      used design underlying singlestage mecha                                                        instances amd relatively new approach      nism maximally advantage approach                                                        started adopted applications ex      finally present negative results design                                                        ample strategic sourcing reserve price setting      multistage mechanisms correspond                                                        set recovery recommender systems howeverall      dominantstrategy singlestage mechanisms                                                        prior work generalpurpose amd focused single      optimal multistage mechanism general                                                        stage mechanisms agents reveal prefer      randomize queries hide information                                                        ences completely simultaneously problematic      agents                                                        reasons foremost agents need                                                        invest signiﬁcant computational cognitive    introduction                                       sources determine preferences outcomes                                                           instance bidding trucking tasks com  multiagent settings outcome presidents binatorial reverse auction agent needs solve each  joint plans allocations resources chosen based subset tasks complex vehiclerouting problem second  preferences set agents preference agents lose privacy preferences  aggregator generally does know preferences apri require large communication  ori agents report preferences aggregator reason applies space possible preferences  unfortunately agent incentive misreport large ﬁrst reasons signiﬁcant settings  preferences order mislead aggregator select outcomes possible preference functions  ing outcome desirable agent  outcome selected agent revealed pref computation communication privacy                                                        loss unnecessary certain aspects agent’s pref  erences truthfully                                                        erences inﬂuence ﬁnal outcome instance    mechanism design concerned creation prefer                                                        second agent perform task lower cost  ence aggregation rules lead good outcomes spite                                                        ﬁrst need determine precisely suboptimal assign     ∗this material based work supported na ing task ﬁrst agent unfortunately singlestage  tional science foundation itr grants iis iis mechanisms advantage apriori   sloan fellowship ibm phd fellowship rule need know ﬁrst agent’s precise preferences                                                    ijcai                                                    task—this apparent receiving report general mechanisms choose  formation second                            come randomly mechanism consists distribu    solution use multistage mechanisms tion selection function Θ × × Θn → Δowhere  aggregator queries agents certain aspects Δo set probability distributions mech  preferences chooses query ask anism dominant strategy mechanism truthtelling op  ask based answers earlier queries non timal regardless agents report words  gametheoretic setting multistage protocols agent type vector θθiθn  alter  yield exponential savings bits communicated         ˆ  ∈                                 ≥                                                        native report θi Θiwehaveeoθθiθn uiθio  mechanism design settings yield expo    ˆ                                                             eoθθiθn θ telling truth optimal  nential savings communication aggregator’s com given agents truthful bayesnash  putation                                                         equilibrium bne mechanism bne mecha    multistage mechanisms manually designed                ∈                         ˆ ∈                                                      nism θi Θi alternative report θi Θi  applications voting   singleitem auc                                              ≥  tions  combinatorial auctions reviews  eθθi−θiθn θi eoθθiθn uiθio                                                          θ θ θ θ θ   ˆ          automated design multistage mechanisms  i−   eoθθiθn θ  addressed speciﬁc settings parallel work  settings participation voluntary amd    prior work studied design multistage mulation includes participation individual rational  mechanisms strategic multiparty computation  ity constraints agent worse participating  issues setting agent tempted mechanism techniques handling single  invest effort necessary determine private stage amd applied multistage case  formation different address modiﬁcation  paper introduce ﬁrst general techniques automated given mechanism allowed choose  design multistage mechanisms adopt speciﬁc come random problem designing optimal single  methodology ﬁrst design singlestage mechanism using ex stage mechanism solved polynomial time given  isting techniques amd converted mul number agents constant using linear program  tistage mechanism using techniques pro ming  decision variables linear program  pose show multistage model used following type vector θ outcome othere  inﬂuence design underlying singlestage mecha decision variable pθ determines probability  nism maximally advantage savings inherent outcome given type vector straightforward  multistage model relying intermediate check incentive compatibility constraints  singlestage mechanism incurs loss                expectation objective linear functions                                                        variables gives linear program gener    model                                          ating solving linear program required                                                        basic approach automatically designing singlestage    automated design singlestage mechanisms      mechanisms fact approach use  subsection review relevant deﬁnitions paper generate singlestage mechanisms  sults singlestage amd literature singlestage  amd setting given  ﬁnite set outcomes  automated design multistage mechanisms  payments tofrom agents outcome  multistage amd input includes—in addition  ﬁnite set agents  each agent ﬁnite set input singlestage amd—a set queries set  types Θi probability distribution γi Θi case answers assuming single answer set  correlated types single joint distribution γ distinct aq each query comes loss gener  Θ ××Θn   utility function ui Θi ×o → ality set special  yes each  objective function Θ × × Θn × → ex query associated particular agent  pectation designer wishes maximize note utility asked answer agent  functions parameterized type ui com answering truthfully given function  mon knowledge types encode private preferences   × Θi → awhereaq θi i’s truthful answer  restriction ﬁnite type space somewhat limiting query i’s type θi implies  continuous spaces handled suitable dis truthful response ∈ each query partitions  cretization type space possible designer objectives agent’s type space receiving answer agent  social welfare maximizing sum mechanism infer assuming truthfulness i’s type  agent utilities chosen outcome              θi ∈ Θi  aq θia    revelation principle  restrict attention multistage mechanism corresponds given single  truthful direct revelation mechanisms agents stage mechanism each type vector θ reported  port types directly incentive mis                                                           paper restrict attention case     discretization ﬁxed advance analysis query agent time approach easily extended  impact incentives efﬁciency recent research limited settings query multiple agents time  revelation auctions  optimized amd note querying agents time leads largest  model point subject current research possible savings number queries                                                    ijcai                                                    agents choose each outcome museum  cut pieces given  probability suppose corresponds husband  cut pieces given wife  truthtelling dominant hard husband wife each possible types type  truthtelling expost equilibrium regardless “low” associated relative indifference  results previous queries revealed vector strategies painting type “high” deep attachment each  expost equilibrium each agent following strat type probability  type probability  egy optimal regardless types agents  maximize social welfare arbitrator like  given strategies truthtelling optimal painting whomever cares  gardless agent’s beliefs agents party cares little prefer having ar  swer queries truthfullythis implies need ran bitrator design appropriate incentives ensure truthful  domize query choice longer holds reporting utility function each party “same”  dominantstrategy mechanism later ex keeping painting gives utility  type lor  post implementation weaker dominant strategies party getting painting gives utility  type  stronger bne note dominantstrategy museum outcome gives utility  lor receiv  mechanism need agent makes answer ing pieces gives utility − getting pieces  dependent history queries asked agent gives utility − type  incentive lie type order inﬂuence goal ﬁnd dominantstrategy possibly ran  queries asked                    domized mechanism payments maximizes ex    reasons apart technical section pected social welfare ﬁnd optimal singlestage  paper focus exclusively multistage mechanisms mechanism solving example using methodology  correspond dominantstrategy singlestage mecha scribed earlier yields following randomized mechanism  nisms restrict mechanisms probabilities rounded  select query deterministically based answers  prior queries need worry incentives       wife            wife    restrictions multistage mechanism deﬁned husband museum         wife keeps   tree nodes edges  each internal                          husband gets pieces  nonleaf node agent query agent  husband  husband keeps  husband keeps  onetoone correspondence possible answers         wife gets pieces  wife keeps  query node children node  each node                        wife gets pieces  outcome probability given reach vwestop spite symmetry husband wife  asking queries choose outcome case mechanism asymmetric course optimal  leaf probabilities sum elicitation lutions exist roles husband wife  tree multistage mechanism outcome probabili interchanged  ties denote iv information set node                                                          consider turn singlestage mechanism  set type vectors consistent answers lead                                                        corresponding multistage mechanism  generally assume elicitation tree complete il                                                        outcome probabilities suppose elicitation  single type vector leaf                                                        tree given wife’s type elicited ﬁrst fig  shows    study variants multistage amd consider                                                        optimal multistage mechanism  possibility starting given singlestage mechanism                                                        come apparent mechanism saves query prob  computed singlestage amd software turning                                                        ability  ·   corresponding multistage mechanism allow  ing multistage perspective inﬂuence choicedesign elicitation tree query order ﬁxed optimal                                                        mechanism given fig  turns greater  underlying singlestage mechanism consider                                                        savings obtained eliciting husband’s type ﬁrst  multistage design elicitation tree query                                     ·  order given impose mechanism saves query probability                                                                        asymmetry single  straints form tree                                                                               stage mechanism starting                                                          suppose queries husband slightly expensive    small example                                    wife save hus  section illustrate various notions automatically band queries unlike previous mechanism allow  designing multistage mechanisms using simple example different optimal singlestage mechanism analog  suppose divorcing couple jointly owns painting husband wife roles switched  arbitrator decide fate painting remains optimal problem symmetry   options  husband keeps painting  wife optimal multistage mechanism corresponds  keeps  painting remains jointly owned hung                                                           problem similarity king solomon’s dilemma     does imply mechanism ask queries dilemma discussed economics litera  uniquely determine type vector concrete outcome probabili ture  assumed rightful mother  ties speciﬁcally possibility terminating interior node women know is—unlike problem agents  typically preclude                         know each others’ types                                                    ijcai                                                                      husband low    museum wp         cess trees tree transformations analog                                                        decision tree learning reordering consid                                                        ered purposes simplicity generalization     wife low                      husband keeps wp  motivation details meaning transfor                    husband high   wife gets pieces wp  mations quite distinct                      husband low    wife keeps wp      converting singlestage mechanism     wife high                     husband gets pieces wp                                                             multistage mechanism             wife keeps wp                                                         section develop methods converting given                    husband high   husband keeps wp                                    wife gets pieces wp  automatically designed singlestage mechanism                                                        equivalent multistage mechanism saves elicita  figure  optimal elicitation tree given singlestage tion costs analog decision trees  mechanism given wife queried ﬁrst structing short decision tree given each complete  internal node probabilityoutcome pair associated instantiation features decided  terminate early node probability want classify examples instantiation  outcome remaining probability ﬁrst subsection develop methods case  query                                       elicitation tree query order given second subsec                                                        tion generalize approach case elicita                                   museum wp         tion tree given chosen endogenously                      wife low                                                          given elicitation tree                                                        ﬁrst solve simplest problems converting    husband low                    wife keeps wp                       wife high    husband gets pieces wp  singlestage mechanism efﬁcient multistage                                                        mechanism given elicitation tree problem                                                        motivated considering exogenous constraints query                      wife low     husband keeps wp  der agents available different times op    husband high                                        timal ordering readily available importantly          husband keeps wp                         setting serves stepping stone general techniques          wife gets pieces wp                       wife high    wife keeps wp   key technique “propagate up” probability                                   wife gets pieces wp  leaves internal nodes possible  figure  optimal mechanism asking husband lemma  let multistage mechanism  correspond  ﬁrst                                                 singlestage mechanism suppose internal                                                        node elicitation tree exit probability ev                                                        outcome leaves subtree tv rooted assign  saves query husband wife prob probability outcome  ability  giving greater cost savings            internal nodes tv exit probability fol    finally willing sacriﬁce optimality lowing modiﬁcation  corresponds  node  singlestage mechanism obtain greater query savings exit probability  − evp  subtract  change mechanism example make probability assigned each leaf tv  divide  cost querying sufﬁciently large optimal outcome probabilities leaves tv  −  ask queries choose outcome                                                       interesting additional motivation automatically proof consider probability pθ  outcome                                                        selected given type vector θ ifθ does  signing multistage mechanisms treebased repre                                              sentation multistage mechanism easier lead clearly pθ                                                          assume does o  outcome exit  derstand human tabular form singlestage                                    mechanism—especially tree relatively small early probability selecting                                                        earlyexit probability plus probability    trees ﬁgures reminiscent decision trees                                                                                    exit early choose outcome later  machine learning  boolean function representation         old                    old                                                         − ppθ  − − ppθ    −  decision tree learning tree classiﬁes example based                 old                                                        total probability pθ   did change  answers sequence queries features                                                                                      probability selecting prob  example similarly multistage mechanism determines                                                        ability exit early choose outcome  outcome particular type vector based answers                     old                old                                                        later  − ppθ   − ppθ    sequence queries agents’ types sig                                                                              θ select probabil  niﬁcant differences form trees                                                        ity  example decision trees typically use randomization  determining classiﬁcation decision trees randomized decision trees circuit complexity literature  determine classiﬁcation internal node sense viewed light representation  tree probabilistically terminate querying pro usually distribution “deterministic” trees                                                    ijcai                                                                                                          use “propagating probabilities up” technique                                                        algorithms discussed later paper    note ability propagate probability  manner distributions leaves iden corollary  multistage mechanism saves maxi  tical makes different standard framework mum number queries type vector θ node  communication complexity theory addition reached mechanism does exit early  restricted query language prior distribution probability reach and exit early given                                                                                 −  inputs                                     θ type vector  minθ∈iv pθ                                                                                   o∈o    propagate probability possible ob                                                        given θ type vector exited early  tain optimal mechanism given tree                                                        node transition node node  theorem  suppose apply lemma  pair probability exiting early nodew                                                          −   −                      −  starting root working way leaves   minθ∈iw pθ    minθ∈iv pθ  resulting multistage mechanism saves        o∈o                    o∈o  queries case different query costs great  endogenously determined elicitation tree  est query cost multistage mechanisms corresponding  given singlestage mechanism given elicitation section develop methods converting single  tree                                                 stage mechanism multistage constraints                                                        elicitation tree query order ﬁrst provide greedy    example derive mechanism fig  algorithm show ways “fail”  start mechanism saves queries fig  yield arbitrarily small fraction query savings avail                                                        able optimal dynamic program                                   museum wp                       wife low                          greedy algorithm                                                        greedy algorithm chooses query each stage    husband low                    wife keeps wp   maximize probability able exit immediately                      wife high    husband gets pieces wp  query given preceding queries responses                                                        letting uiqaq denote information state results                      wife low     husband keeps wp  information state receiving answer                                   wife gets pieces wp     husband high                                        query deﬁne algorithm follows                                                        deﬁnition  greedy algorithm chooses query ask                                   husband keeps wp                       wife high                         node from set                                    wife keeps wp                                                                             arg maxq∈q     ivq  minθ∈uiv qa pθ                                   wife gets pieces wp        a∈a          o∈o    figure  multistage mechanism saves queries greedy algorithm does intend                                                        theorem   greedy algorithm chooses query max    node husband reports “high” husband imizes probability exiting immediately                        ≥  keeps painting  subsequent leaves theorem  greedy algorithm chooses query node  propagate probability fig         time oq·a·o·Θ                                     museum wp           unfortunately greedy algorithm arbitrarily far                      wife low                          optimal queries equal cost                                                        proposition  exist singlestage mechanisms    husband low                    wife keeps wp                       wife high                         greedy algorithm achieves arbitrarily small                                   husband gets pieces wp  fraction possible query savings deter                                                        ministic three players types player                      wife low     husband keeps wp  three outcomes alternatively priors                                   wife gets pieces wp     husband high                                        types uniform three players types          husband keeps wp                         player ﬁve outcomes                      wife high    wife keeps wp     worstcase result likely greedy algo                                   wife gets pieces wp                                                         rithm perform quite practice         figure  probability propagated      dynamic programming algorithm                                                        unlike greedy algorithm dynamic program build    node wife gets pieces painting entire tree program works computing ev  ≥  subsequent leaves propagating ery possible information state minimum possible ex  results mechanism fig                    pected number queries ni point given    following corollary characterizes probability ex exited early let uiqa  iting early given node helpful formation state results receiving answer                                                    ijcai                                                    
