                                            loopy sam                          ananth ranganathan michael kaess frank dellaert                    center robotics intelligent machines college computing                                      georgia institute technology                                   ananthkaessdellaertccgatechedu                        abstract      smoothing approaches simultaneous local      ization mapping slam problem robotics      superior common ﬁltering ap      proaches exact better equipped deal      nonlinearities computing entire robot      trajectory ﬁltering algorithms      perform map updates constant time exist      analogous smoothing method available aim      rectify situation presenting smoothing      based solution slam using loopy belief prop   figure  gaussian markov random field gmrf correspond      agation lbp perform trajectory ing illustrative smoothing mapping sam problem      map updates constant time loop    poses robot trajectory poses graph shown      closed environment slam prob      circles landmarks squares      lem represented gaussian markov ran      dom field gmrf lbp performed                                                        repeated marginalization poses recently introduced tech      prove lbp case equivalent                                                        niques sparse extended information filter seif      gaussseidel relaxation linear                                                        thrun et al  junction tree filter tjtf      ability compute marginal covariances efﬁciently                                                        paskin  present approximations informa      smoothing algorithm previously                                                        tion matrix sparse sparsity representation allows      stumbling block widespread use lbp                                                        constant time update ﬁlter      enables efﬁcient recovery marginal      variances albeit approximately landmarks   contrast ﬁltering approaches      poses ﬁnal covariances overconﬁ   compute current robot pose map smoothing      dent ones obtained spanning tree approach recovers complete robot trajectory map      gmrf conservative making useful     smoothing information matrix naturally stays sparse      data association experiments simulation time need approximations      ing real data presented                      smoothing incorporate new information past robot                                                        poses opposed ﬁltering approaches update                                                        pose marginalized    introduction                                       number variables increases continuously smoothing  problem simultaneous localization mapping  realworld scenarios especially involving explo  slam core competency robotics ration larger matrix contains far entries  tracted large attention classical solution ﬁlterbased methods dellaert eustice et al   slam problem uses extended kalman filter ekf filters efﬁcient smoothing limited  smith cheeseman  maintains joint distri number structure points observed repeatedly  bution current robot pose landmarks map case inability correct previous poses  form gaussian distribution updating lead poor results  variance matrix distribution requires time crucial limitation approaches based  ekf algorithm does scale large maps recent work information form gaussian recovering es  slam problem focussed improving time timate map robot pose involves matrix inversion  complexity solutions commonly used technique computationally infeasible large systems  update information form gaussian distribu case ﬁltering approaches  tion information matrix dense through seif obtaining mean involves matrix inversion                                                    ijcai                                                    solution obtained cases through iterative addition algorithm incremental largely runs  process solves linear constant time advantages graphical slam  number iterations performed each step main  tain runtime bounds algorithm approximation  smoothing mapping  based assumption slam solution evolves                                                        begin reviewing sam framework given del  slowly time relinearization problem                                                        laert  smoothing framework aim  each time step required iterative method                                                        cover maximum posteriori map estimate entire  does yield covariance needed    Δ  maximumlikelihood data association estimate trajectory  xi  ∈  landmark locations                                                                   Δ  uncertainty landmark locations pose map  lj  ∈  given landmark mea    paper deals use loopy belief propagation    Δ  ∈             Δ   lbp weiss freeman  obtain approximate surements                odometry                                                               computed maximizing joint posterior  solution slam problem including marginal                              lz  variances map pose consider case trajectory landmark locations  map consists set features build smooth    ∗  Δ                                                                    Θ      argmax lz          ing mapping sam approach introduced dellaert                   Θ   updates joint distribution robot tra                                                                 Δ  jectory map using square root information form Θ  set unknown variables  gaussian distribution approach based robot trajectory landmark locations posterior  fact sam problem treated graph factorized using bayes law  ical model viewpoint gaussian markov random field                                                           lz ∝   ux lp  gmrf  winkler  inference                                                                                    m  formed using lbp                                                            xixi−ui                                                                         ∝           k                     provide constant time update algorithm                                  zkxi lj   wildﬁre algorithm estimating map robot                                  trajectory including marginal covariances naive xixi−ui motion model parameterized                                                                     implementation lbp requires    time update  odometry iand    ik jk landmark measure  marginal distributions number nodes ment model assuming correspondences ikjk  graph wildﬁre algorithm discards negligibly small mes known prior initial pose taken  sages nodes subsequently nodes constant usually origin priors remaining  received sent signiﬁcant messages updated poses landmark locations assumed uniform  show number nodes involved signiﬁcant assume gaussian motion measurement models  message exchange unless signiﬁcant event standard slam literature motion model  loop closing occurs complete graph given xi  fixi−uiwiwherewi zeromean gaus  dated increasing time bound             sian noise covariance matrix qi similarly measure                                                                                           relinearization gmrf graph required ment equation given ik jk     sam problem nonlinear general performed normally distributed zeromean measurement noise  constant time using technique similar wildﬁre al variance rk  gorithm nodes changed relinearized practice linearized versions motion mea  need periodically differ surement models considered example use  ence current estimate linearization point extended kalman filter ekf approach slam smith et  exceeds speciﬁed threshold relinearization al  multiple iterations used obtain  linear time signiﬁcant update gmrf graph vergence minimum following assume    prove lbp gmrf equivalent gauss good linearization point available  seidel relaxation provides exact map estimates working iteration nonlinear optimization method  nodes covariances overconﬁdent shown dellaert  results sparse  approximate nature inference conservative linear squares problem δΘ                                                                           approximation covariances obtained restricting infer            m  ence spanning tree gmrf graph used ∗                     i−                                                                         δΘ      argmin      f    δxi−  δxi − ai   perform data association                                                                       qi                                                                    δΘ        terms related work closest relaxation based                                                                                                           k  approaches given duckett et al  frese duckett              ik       jk                                                                                  h  δxi   δlj − ck           unable compute marginal                              rk  covariances poses landmarks graphical slam               folkesson christensen  method      i−                                                        fi   sparse jacobian fi lineariza  builds graphical model smoothing problem ap                                                                       Δ −    proach shares common features graphical slam tion point i−      i−  odome                                                                                        ik     jk  including ability modify data association ﬂy try prediction error analogously hk jk respec  increase efﬁciency eliminating variables judiciously tively sparse jacobians hk respect change                                                    ijcai                                                                                                    ik jk  evaluated linearization point ik jk  constant proportionality         Δ                                              using formulation write edge potentials  ck  zk − hkxi lj  measurement prediction                     −                                                     ψxilj ∝n  yij  ηij  Λij  whereyij  error Σ mahalanobis distance respect                                                            vector  xi lj   dropped index  covariance matrix Σ andweusethematrixgi  −id×d                                                         corresponding pair ikjk convenience distribution  dimension xi avoid treating δxi specially                                                        parameters given    solution squares problem  given                                                                                                    ηi           hi  linear aδΘ −                    Δ    ij              −                                                                  ηij                rk  ck         hessian matrix jacobian matrix obtained            ηij          jk                                                                                                        assembling individual measurement jacobians            ii   ij                                                                                          Λ     Λ            hi         hi   vector measurement errors Δ     ij   ij              −                                                                Λij     ji   jj            rk                                                                            Λij  Λij           jk         jk  sam markov random field                                                        potentials edges linking poses deﬁned  show inference posterior  analogously  formed placing sam problem markov random    gmrf potentials singleton cliques similarly  field mrf framework graph mrf undi                      −                                                        deﬁned φyin    yi ηi Λi yi ∈x land  rected adjacency structure indicates variables           −                                                        ηi Λiμi Λi     follows   poten  linked common factor measurement constraint                                                                  tials φyi represent beliefs unknowns    pairwise mrf described factored probability den                                                        uniform prior exists mrf node yi ηi Λi  sity given                                                      set zero note setting Λi zero equivalent            ∝   φyi    ψyiyj           having gaussian prior inﬁnite covariance                                                    ij                     belief propagation  second product pairwise cliques goal belief propagation case ﬁnd  counted posterior  modeled pair marginal probability belief yi node yi ∈ Θ  wise mrf singleton cliques correspond marginal sam graph complete characterization  prior distributions singleton measurements gps belief propagation algorithm gmrfs  unknown variables edge cliques correspond scope paper provide highlevel equations  motion measurement likelihoods respectively  data ﬂow details weiss free    linear case considered previous section man   equations translate                                  beliefs computed using message passing algo                                                      rithm each node passes messages neighbors         − ln φyi ∝    xi − μi                                pi                     turn uses incoming messages compute belief                          i−                       belief propagation guaranteed compute correct    − ln ψxi−xi ∝    f   δxi−  δxi − ai                                            qi      beliefs graphical model does contain loops                                                       proven ﬁnds correct map solution                            ik       jk             − ln ψxi lj  ∝    h  δxi    δlj − ck        gaussian graphical models presence loops                                   rk                                                        means beliefs correct covariances  yi ∈x gives gaussian markov ran incorrect general weiss freeman   dom field gmrf corresponding linearized sam    lbp works repeatedly computing messages  problem note context sam problem liefs node graph starting constant mes  singleton clique factors set unity sages weiss freeman  synchronous  ﬁrst pose clamped origin        asynchronous fashion sweep graph iterated                                                        beliefs converge denoting current iteration    loopy belief propagation sam                   discrete time superscript belief parameters infor                                                                                       use loopy belief propagation lbp sam gmrf mation vector matrix node given                                                                                       t−  solve linear  obtain map          mi      ηi     mji               values unknown variables covariances                        j∈n                                                                                    i  ease computation use information form                           t−  gaussian specify single pairwise clique potentials       mi   Λi         mji              gmrf given  expressed using                      j∈ni  information vector η information matrix Λand parameters message mij yj node yi  deﬁne information form                    node yj                                                                                               −          −        Δ                                              ji   ii       t−          η Λ exp   η −   Λx              mij     ηij − Λij Λij  mi − mji                                                                                                                                                                                              t−                                                                                    ηij  mi − mji       additive constant Λ fullrank equation                                                                                                       jj    ji  ii        t− −  ij   corresponds gaussian density                   mij  Λij   −  Λij Λij  mi − mji     Λij              xΛ−η Λ−n   μ           use deﬁnitions                                                      ijcai                                                    algorithm  wildﬁre algorithm lbp               wildﬁre algorithm running time    push recently added nodes neighbors situations number edges large message devi      sam graph gve queue                 ations true special events                                  loop closures occur shown figure                                                                                                                                                            instances complete graph updated resulting       pop node compute messages myk          ∈n                                          complexity note special clause required handle               using                           instances  algorithm automatically updates            mt  −mt−                  yk    yk      push                  nodes graph message deviations die       update belief using            relinearization sam graph involves comput                                                        ing clique potentials new linearization points                                                        performed using wildﬁre algorithm differ                                                        ence deviations node beliefs                                                        respective linearization points used instead                                                        message deviations case variants                                                        possible technique delay relinearization                                                        belief deviations greater certain threshold                                                        given proportion nodes graph proportion                                                        approaches unity relinearization                                                        formed rarely second strategy perform                                                        linearization regular time intervals remains                                                        choice strategies depends type                                                        application environment size sam graph                                                          components loopy                                                        sam  algorithm each step new pose node new mea                                                        surement links possibly new landmark nodes added  figure  wildﬁre algorithm updates nodes signif sam gmrf ﬁxed number lbp iterations  icant message deviations starting recently added performed using wildﬁre algorithm update  node normal operation left frontier graph  updated during loop closings right graph liefs nodes periodically relinearization performed  updated updated poses shown brown dark using variant wildﬁre algorithm means  changed nodes yellow light robot moving counter pose landmark nodes sam gmrf obtained  clockwise starting                     belief information vector matrix each node                                                        correspond map solutions trajectory                                                        map respectively    constant time loopy sam  each iteration lbp deﬁned  marginal covariances  number nodes graph slow useful show recover approximate marginal  especially trajectory included node count variances nodes lbp beliefs important  improve bound incremen use covariances bound search area possible  tal operation new nodes edges added correspondences data association usually  gmrf                                                 ing projection combined pose landmark uncer    key observation getting constant time algorithm tainty measurement space computation  each step nodes updated ex requires knowledge marginal covariances poses  perience actual change values nodes landmarks  ones recently added graph inverse belief information matrix each node  commence belief updation sweep iteration sam gmrf gives marginal covariance  lbp recently added node new mes general belief obtained lbp overconﬁdent  sages initially seen deviate previous values underconﬁdent proven overcon  large amounts deviations smaller ﬁdent gaussian mrfs pairwise cliques weiss  graph message freeman  overconﬁdent covariances used  viations negligible smaller prespeciﬁed data association results valid corre  signiﬁcance threshold beliefs longer change spondences rejected ﬁrst conservative approxima  remaining nodes need updated                  tion use inverse diagonal blocks    wildﬁre algorithm called message hessian matrix marginal covariances  viations previous iteration spread like wildﬁre results overly conservative estimates  point origin gradually negligible illus better approximation obtained restricting mes  trated figure  algorithm implementation features sage passing spanning tree sam gmrf  queue nodes signiﬁcant message deviations spanning tree obtained deleting edges gmrf  incoming edges pushed summary algorithm inference exact conservative estimate  given algorithm                               true marginal covariances better ﬁrst                                                    ijcai                                                                                                                                update time step                                                                        update                                                                  messages                                                                      beliefs                                                                                                                                                                                                                                                                                                                                  time  sec                                                                                                                                                                                                                                                                                                                                                                   steps                                                        figure  runtime simulation consisting  steps                                                        times message belief computation total update                                                        step shown times obtained ghz linux machine                                                        using implementation algorithm ocaml note                                                        spikes end corresponding loop closures    figure  spanning tree gmrf graph edges col jacobian jande corresponding measurement  ored blue dark linear simulation covariances error result true                                                                                      simulation  ground truth shown blue dark t−             t−    −i  conﬁdent lbp covariances shown green light conserva mj − mij  ηj      mkj   mj  tive covariance estimates obtained restricting bp spanning             k∈nj  tree shown red dark                                                                −i                                                        mj  estimate mj considering node                                                                             t−      −i         −i −i  order approximation maintenance spanning tree yj similarly mj − mij  mj sincemj yj                                                            −i  message passing require extra work span mj holds deﬁnition information form  ning tree extended each step gaussian substituting identities deﬁnitions η  use wildﬁre algorithm overall scheme Λ  message equation  gives  mains constant time figure  illustrates nature result   approximation                                          using  belief equation                                                                                                                                                         mt      η       −      y−i    loopy sam gaussseidel relaxation                                   kj kj       ij                                                                            j∈n          j∈n  prove section computing map solution                                using lbp gmrf equivalent modiﬁed form                                −i                                                                       ηi  bi −   aij yj               gaussseidel relaxation commonly used solve                      j∈n  linear systems relaxation previously used                        context slam duckett et al  capable closely corresponds relaxation equation   recovering marginal covariances shortcoming lbp map computation lbp simply modiﬁed  overcomes equivalence map portion lbp version gaussseidel relaxation  relaxation interesting result connects technique  wellunderstood method linear algebra       results    relaxation solves linear aδΘ−b  encoun  tered section  iterating set equations each linear gaussian simulations  updates value exactly unknown using ﬁrst present results applying approach  current estimate                   trolled simulation devoid nonlinearities simulation                aiiyi    bi −   aij yj             consisted environment randomly placed uniformly                              ji                      distributed landmarks robot followed large shaped                                                        ﬁgure environment run included loop clo                                               ∈  sum variables iand sures “waist” ﬁgure  Θx                                               figure  gives results linear simulation consist                                                   begin proof noting message ing  steps trajectory length  total    given  rewritten                 number nodes sam gmrf                                 −i                                                         mji     jkiek − aij yj             veriﬁed algorithm  spikes        −i                                              graph corresponding loop closures clearly vis  yj estimate yj considering node ible spikes occur lbp update makes sweep  yi index measurement linking yi yj through graph instances                                                    ijcai                                                    
