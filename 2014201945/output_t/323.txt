              extracting certiﬁcates quantiﬁed boolean formulas                     ∗                                               marco benedetti                           istituto la ricerca scientiﬁca tecnologica irst                                sommarive   povo trento italy                                              benedettiitcit                          abstract                          commonly accepted representation                                                        current solvers return little satunsat answer       certiﬁcate satisﬁability quantiﬁed      despite issues satcertiﬁcates qbfs ex      boolean formula compact representation    tremely desirable thank potential beneﬁts appli      models used provide solver cations solvers example certiﬁcate conclu      independent evidence satisﬁability addition sive means judge conﬂicting answers given different      inspected gather explicit information solvers instance clearly event reveals      semantics formula    ﬁner problem bug implementation      intrinsic nature quantiﬁed formulas cer think worth considering happens fairly      tiﬁcates demand care efﬁciently ex    long treat solvers black boxes      tracted compactly represented easily queried proofofsatisﬁability approach realistic way      show solve problems          tell truth quote le berre et al                                                             question check answer qbf                                                            solvers effective way unanswered     introduction                                           question good certiﬁcate satisﬁa  term “certiﬁcate” fairly general meaning originat bilityunsatisﬁability  remains open point  ing language recognition complexity theory ver issue qbf evaluation  iﬁed certiﬁcate proves string refers actually implementation  sound  belongs language applied logic term ness problems  qbf solvers   denotes means providing evidence unsatisﬁability certiﬁcate way ensure satisﬁ  given statement refutationallycompete ability inspected gather semantics  ductive approach essence verify given logical derlying formula paramount importance appli  formula belongs language unsatisﬁable statements cations certiﬁcates add valuable information mere    natural certiﬁcate satisﬁability satcertiﬁcate satunsat answer example sat answer proposi  formula explicit representation mod tional prop encoding negation desired prop  els formula satisﬁable model erty logic circuit means circuit faulty wrt  makes evaluate true validity certiﬁcate property takes certiﬁcate outline deﬁnite  veriﬁed knowledgeable evaluation scenario fault shows opposed qbf  apparatus logic deductive capabilities unneces certiﬁcates prop certiﬁcates easy represent  sary independently obtained          verify wide application    paper focus satcertiﬁcates quantiﬁed relevance certiﬁcates enlarges scope ap  boolean formulas qbfs certiﬁcates plication underlying logic respect qbf  proposed used far number reasons notable case plenty applications problem  intrinsic nature qbf confers treeshaped structure stated twoplayer ﬁnite game modeled  models explicit representation unaf qbf insightful example obtained considering  fordable second theoretical arguments exist make famous game “connect” known player  likely ﬁnd polynomialtime veriﬁcation procedures qbf moves ﬁrst win rules game  satisﬁability pspacecomplete stockmeyer meyer existence winning strategy encoded qbf   finally present qbf solvers ﬁnd impractical instance gent rowley  expected sat  straightforward collect information needed winning strategy certiﬁcate disclose  construct model consequence qbf models feature formation ﬁrst player prevail just inspecting                                                        certiﬁcate each opponent does    ∗this work supported pat provincia autonoma di trento interesting point realworld appli  italy grant                      cations modeled twoplayer games unboundedmodel checking ﬁnitestate systems rintanen   certiﬁcate representation  conformant planning rintanen —just rel  evant examples—have handy qbf formulations           qbf model represented explicitly employing                                                        data structures trees truth tables pur    rest paper brief introduction qbfs                                                        sue compactness expense managing implicit rep  models section  present solverindependent                                                        resentation requiring computation yield values  representation qbf satcertiﬁcates section  ex  pected able verify section  ideal certiﬁcate compact easy manage  complex task extraction addressed explicit easy verify query successful tradeoff                                                                                                      section  conclude discussing implementation obtained employing binary decision diagrams bryant                                                              approach future work section         consider reduced ordered version robdds                                                        just bdds henceforth complemented arcs bdd                                                                                                                                                                 representing total function        qbfs models                              directed acyclic graph root labeled                                                         sink node labeled “” each internal node la  loss generality consider qbfs prenex beled variable      junctive normal form cnf consist preﬁx exhibit children attached outcoming thenarc  ing arbitrary number alternations existentially elsearc elsearc comple  universally quantiﬁed variables followed matrix mented unique path root sink identiﬁed  conjunction clauses example                  assigning value each variable thenarc      ∀a∀b∃c∀d∃e∃f¬b∨e∨f ∧ a∨c∨f ∧ a∨d∨e∧        chosen variables assigned  elsearc followed        ¬a∨¬b∨¬d∨e ∧ ¬a∨b∨¬c ∧ ¬a∨¬c∨¬f∧       function represented evaluates                                                                                   a∨¬d∨¬e ∧ ¬a∨d∨¬e ∧ a∨¬e∨¬f               hψ ψ     ψni ∈ iff number complemented                                                        arcs encountered path deﬁned ψ ψ     ψn   given qbf  denote fe matrix var∃f  fabc example let consider bdd aside  var∀f  set existentially universally quantiﬁed      solid arrows denote thenarcs  variables  var∀f ⊆ var∀f  set uni    dashed dotted arcs used regular com  versal variables preceding dominating ∈ var      plemented elsearcs represents binary func                                             ∃  preﬁx pose δe  var∀f given cnf ma         tion three binary variables  trix fe formula fe ∗ cnf obtained assigning example       literal removing each ¬l literal each       represented function  clause containing notation readily extended sets   written  ∧ ∨ ∧ ¬a ∨ ¬c                                                              literals matrix satisﬁed set literals writ setoriented interpretation bdd represents                                                                 oneset  set having charac   fe fe ∗ formula                   teristic function case stands set    alternations quantiﬁers preﬁx guide ex     evaluates   tending notion satisﬁability matrixes qbfs                                                          bdds utilize ordered reduced  example satisﬁability problem  asks                                                        variable ordering followed each path  each possible consistent combination literals                                                        nodes representing set exist each function  exists way choose literal                                                        canonic representation furthermore ver  possible literals literals exist                                                        sion complemented arcs set denoted  resulting set satisﬁes matrix qbf model                                                        node referred complemented arc  set var  functions each specifying literal            ∃                                             bdd way representing sets regarded symbolic                     chosen ex avoids explicit enumeration sets’ elements        ¬c             istential variable function              ¬d   ¬e                                 favor abstract diagrambased way comput                         choices univer ing characteristic functions representations ex      ¬b         ¬e    sal variables dominating        ¬c                                            ponentially succinct explicit ones wegener              ¬d   ¬e    represent functions  operations setsfunctions rep                       use labeled tree                 ¬e                                 resent uniondisjunction intersectionconjunction   ¬a                    aside depicting                                                    performed manipulating involved bdds bryant              ¬d    ¬f                         model  uni  small abuse notation treat bdds      ¬b         ¬e    versal hypothesis consis                                                      sets represent example ∈                         tent set universal literals                               ¬d    ¬f                                element subset individuated                         equivalently assignment                                                          manage collections bdds canonicity spans   ψ      ψn universal variables set nodes allows sharing  ψi ∈       say informally tree structural information diagrams bdd set  structure like model qbf matrix  fe iff universal hypothesis set existential buning¨ zhao  propositional formulas qbfs  literals collected branch individuated satisﬁes free variables used implicitness issue au  fe ∗ buning¨ zhao  details    thors focus characterizing classes modelsformulasof interconnected diagrams—called forest—is identiﬁed ca ca eabd eabd fabd fabd  complemented arc pointing root node                                                                                           deﬁnition  qbf satcertiﬁcate validity satcerti  ﬁcate qbf var∃f     em var∀f                                 δi δei forest bdds containing                               −                              −  roots hei  ei each  ei ei  deﬁned var∀f eiu     uδi  certiﬁcate                                         −       −          −        cf         hem emi                                                          figure  bddbased satcertiﬁcate qbf                                         −  consistent ∀i ∈  ei ∩ ei  ∅                                          valid hψ     ψni ∈ formula easy impractical way checking certiﬁcate                                    feuψunψn satisﬁed ei ψ     ψδi  ∈ check produces satisfying assignment   functions si  bδi → deﬁned possible universal hypotheses fortunately                                                        symbolic nature certiﬁcate helps perform                                                     hψ      ψ ∈     efﬁcient clause clause bddbased veriﬁcation let                                  δi                                            −          use exclusive “⊗” construct literals vari        ψ     ψδi    hψ     ψδi ∈ ei                        undef               ables ϕ⊗v means ϕ   ¬v ϕ    essence satcertiﬁcate compact explicit repre lemma  algorithm checkvalidity answers true  sentation dependencies exist ex hf ci valid certiﬁcate   istential dependent universal independent variables let consider example clause ¬u ∨ ∨ ∨  order satisfy matrix whichever universal hypothesis ¬e ∨ preﬁx ∀u∃e∀u∃e∃e rele  lemma   cf  valid qbf  satisﬁ vant universal hypotheses clause assigning  able satisﬁable qbf valid certiﬁcate immediately satisfy                                                        clause universal literals remains verify  proof sketch qbf satisﬁable iff assignment    model iff ﬁnd treelike structure like three remaining literals clause true  introduced section  assign universal hypothesis containing     falls  ment  ψ        ψ  universal variables                                 −                                                  oneset ¬e  set existential literals collected branch                                                         twostep check collect  dividuated satisﬁes ∗ given consistent certiﬁ                          −                                                          universal hypotheses  ∪ ∪  cate  insert literal ei label clause satisﬁed existential literal check  node reached following  ψ     uδi  ψδi path hypotheses existential literal satis                      iff hψ     ψδi ∈ ei dually ¬ei appears label ﬁes clause assign                        −  iff hψ     ψδi ∈ ei  construction certiﬁcate clause satisﬁed universal literal  valid according notion validity given deﬁni meaning successful veriﬁcation twofold  tion  treelike structure obtained model  ensured formula sat certiﬁcate en    valid satcertiﬁcate  depicted figure  codes model conversely veriﬁcation fails                                                        certiﬁcate invalid formula unsat    certiﬁcate veriﬁcation                             tell right away circumstance occurred validity  ﬁrst thing wish consistent certiﬁcate check conpcomplete problem buning¨ zhao   verify validity check choosing  truth values existential variables according  certiﬁcate extraction  certiﬁcate suggests satisfy matrix    certiﬁcate extraction symbolic sense                                                        certiﬁcate want work bddbased repre   function checkvalidityqbf      certiﬁcate     sentation problem representa                                                        tion section  show relates certiﬁcates sec    let var∃f      em                   tion  twostep procedure discussed eval    let var∀f                      −      −          −                 uate instance section  construct certiﬁcate    let       hem emi basis steps taken evaluation section     forall Γ ∈         let Γ ψ⊗ui ∨ · · · ∨ ψh⊗uih ∨                 symbolic formulas skolemization               φ⊗ej ∨ · · · ∨ φk⊗ejk                                −                       skolem theorem shows transform given       ←  ∪φ  ∪ ∪φ                   ji         ji                      order logic fol statement skolemized formula                      ∅ return false       skf                         skf           ui ψuih ψh                                properties   contains exis    return true                                        tential quantiﬁer  skf  satisﬁable iff satis                                                        ﬁable existential quantiﬁers eliminated replacing                                                                                    variables bind skolem functions deﬁnition var∀f  skolem function     ex  domains appositely chosen preserve satisﬁability ample instance  matrix ne satequivalent  outer form skolemization function introduced                                                                                        ∈ var∃f  depends universal variables var∀f ∀a∀b∀d nes bc df   scope prenex formulas univer                                                        propositionally encode deﬁnability  sal variables left preﬁx                                                        skolem terms introduced leveraging noteworthy feature    skolemizationbased solvers replace original formula                                                        map bn  ≥   satisﬁabilityequivalent instance skf                                                         fully speciﬁed boolean parameters  stance longer propositional able                                                        direct cnf representation example denote  capture semantics exceeding expressive power                                                        sc  hα βi ∈ boolean parameters represent  propositional logic explicitly managing truth values αβ                                                        ing truth value sc hx yi obtain sca  interpretation skolem terms each point                                 deﬁnition domains shown benedetti      following propositional skolemization sks  ≡                                                                                                     duty pay possibly exponential blowup a∨b∨s ∧ a∨¬b∨s ∧ ¬a∨b∨s ∧ ¬a∨¬b∨s  size problem bdds come precious keeping                                                                                           space explosion problem control actu replacing each v∈var∃f  sks  obtain skf   ally manage symbolic formula compact bddbased                              representation propositional instance representing ∃s ∃s ∃s ∀a∀b∀d nesks sks  sks                                                                                  ﬁnability set skolem terms introduced skf  ∃s stands ∃s∃s∃s∃s similarly                                                  let denote Ψk kbit long preﬁx Ψ ∈  ≥ functions formula easily turned—clause  notion extended sets ik  ΨkΨ ∈ clause—into cnf distributing connectives  deﬁnition  symbolic formula symbolic formula moving clauses complementary literals eliminating                                                                                              δΓ−m  bddbased representation cnf instance literals universal quantiﬁers obtain  clauses  sists symbolic preﬁx      variables qbf clause Γ universal literals example                           δ    δm                            −  varf       em  ≤ δ ≤ · · · ≤ δm fol obtain   clauses clause a∨c∨f   lowed symbolic matrix fe conjunction symbolic                                                                                  ∨ ∧ ∨ ∧ ∨ ∧ ∨  clauses symbolic clause Γi consistent set    Γ  ϕ ⊗ ei      ϕh ⊗ eih  literals varf clauses coming given qbf clause mention                              δΓ        bdd represented subset  δΓ  maxl∈Γ δl skolem functions makes differ  cnf represented called propositional expansion subscripted indexes allows write                        variables  ∈  Φ ∈ bδei compactly representing function names apart                      Φ                                indexes example clauses suc  deﬁned ropf  ∧Γi ∈f ropΓi                                                         cinctly represented Γi                                             ropΓi     ϕ⊗s     ∨    ∨ ϕm⊗s           ⊆  bδΓ contains element clause ith                           Ψδ            Ψδm                  Ψ∈i                                   component each Ψ ∈  refers universal variable  symbolic formulas inherit semantics proposi ui Ψ ∈ selected each literal obtains  tional expansions ground counterparts subscript projecting Ψ subspace related    noticeably consistent set  li      lmim  ﬁrst δl components written Ψδl  example given  symbolic literals satisﬁes  iff expansion Ψ Ψδc Ψ  Ψδf Ψ                                                                         ropm∪l ∈mp roplj  satisﬁes ropf                                                                       fs∨s property allows recover  deﬁnition  symbolic skolemization symbolic sko ground meaning factored clause through rop func  lemization symbskf  qbf    var∃f     tion factored representation symbolic soon                                                        represent manipulate sets indexes bdds      em symbolic formula preﬁx eδei · · ·                                                        var  obtaining linearsize representation  emδe  having symbolic clause     lhi each ∀                                                      symbskf                                         clause Λ ∈      lh existential literals                                                          example propositional expansion formula  Λ ϕ⊗ei      ϕh⊗eih  universal literals Λ                                                      figure  yields cnf instance equivalent    hψi     ψki ∈  ∀jψij  ϕj  δΛ  example symbolic skolemization  given  symbolic models certiﬁcates  figure  essence symbolic skolemization  connection symbolic model certiﬁcate                                                        close smoothly turned let  symbskf   compact representations purely exis    tential instance ropf having following key property im l∪li ∈mi indexes literal mentioned                                              sat       symbolic model  theorem  qbf  ropsymbskf  ≡                                                         theorem   symbskf   certiﬁcate  proof sketch applying outer skolemization described  benedetti  turn qbf instance                  −       −           −                                                             cm   hce  ce hce  ce     hce  ce  satequivalent purely universal formula substitute ev                                                                                                             −  ery existential variable dominated     ⊆ ce  im ce  im ¬e valid                                                                                       ∧e ∧¬c ∧c ∧¬c¬f ∧¬e¬f ∧¬e ∧¬e ∧e Γi  Γ ⊆ Γ ⊆  condition                                                                                                                                             Γi removed partial subsumption Γ ⊆ Γ                                                                                                                              ⊆  subsumed clause replaced Γ                                                                                                i∩i                                                          • substitution write laj  δl ≤ δa denote                                                                       substitution lΨδφ aΨ each Ψ ∈                                                                                      Γi laj  Γlai∩j ∧ Γi∩j                                                             rules establish primitive manipulation capabilities                                                        solver arranges components following                                                       higherlevel satisﬁabilitypreserving transformations                                                          assignment  lj realized consequence    figure  symbolic propositional skolemization  Ψ ∈  ropf  lΨ formula                                                            simpliﬁed ∗ lj assigning lj  resolving                                                          ¬lj subsuming lj   proof propositional variable sΨ ropf   symbskf   represents each ∈  each Ψ  equivalence reasoning solver discovers proof                                                              hψ     ψki ∈  kδei value skolem function                                                            a↔l ∀Ψ∈j  ropf  aΨδa ↔lΨ en         uk introduced skolemize ei ∈ var∃f  titled simplify applying substitution laj   sumes universal hypothesis uψ     uk ψk redundancy removal subsumption applied eliminate  construction embodies deﬁnability skolem subsumed clauses heavily reduce burden  terms mutual constraints interpretation solver logical equivalence preserved  terms obeyed satisfy ma variable elimination clauses containing variable  trix model way comply   replaced set resolvents clause                     constraints ψ     ψk evaluate  taining each clause containing ¬d figure                        sΨ  ∈ ropm  ¬sΨ ∈ ropm uncon     symbolic elimination rules symbolic variable  strained comparing resulting functions  related ground variables                                                       far concerned solutionbased evaluation pro                                hψ      ψ ∈                                                  cedure algorithm produces memory time af  seψ      ψ            hψ      ψ ∈ c−                                                fordable sequence instantiations rules                    undefined                                                          guarantees end formula sat instances  deﬁnition  valid certiﬁcates thesis follows  contradiction clause unsat formu                                                        las each step backchaining reduction problem     evaluating symbolic formulas                     problem model original instance  devote attention solutionbased procedures biere directly extracted satisﬁability equivalence guar   pan vardi  benedetti  antees each step model model  lifted extract models symbolically consider solver  easily derived  manipulates symbolic clauses through rules designed apparent drawback suddenly turns advantage  achieve Γi result ground rules allows decouple evaluation model recon  obtain applied separately each clause ropΓi  struction overhead clear    • resolution given resolving clauses containing semantics meshes chain      variable opposite polarities construct nected through inference log produced solver      necessary consequence—called resolvent clause—made subsequently read model reconstructor      literals originating clauses apart deﬁnition  inference log trace inference log      ¬e symbolic version produce list entries each describing instantiation      symbolic resolvent step resolve satpreserving transformations contains      variables universal depth clauses                                                         • hassign assignment lj       appear resolvent Γi Γi      e∈Γ ¬e∈Γ δΓδΓδe              • hsubst  gi substitution laj                                                            set clauses containing ¬l ¬a                  Γ  ∪ Γ  ¬e                                               i∩i                   • helim g−i elimination      ∩  ∅ Γ Γ share couples g− sets clauses containing ¬d      complementary literals ¬e resol let denote op formula obtained ap      vent represents set clauses removed plying transformation described entry op                                          • subsumption Γi subsumed Γ                                                        inference log  op op     opt induces infer      ground clauses Γi subsumed clause                                                        ence trace     ft fi  ifi− opi                                                          log called satlog    simplify notation omit projection index             sets derived clauses proper subspaces Γi clearly satlog exists iff sat example    derived clause actually inserted formula ΓiδΓ  reader verify figure  depicts satlog 
