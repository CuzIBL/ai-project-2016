r e a s o n i n g i n t i m e a n d s p a c e 
j i t c n d r a m a l i k and t h o m a s o. b i n f o r d 
computer science department 
stanford university  stanford  california 1 

a b s t r a c t 
this paper describes a new approach to representing and reasoning with temporal and spatial information. a wide variety of temporal and spatial specifications can be converted into linear inequalities relating the midpoints of events or boundary surfaces of objects respectively  linear programming is then used to represent these constraints and perform deductions. the temporal information is modularized into semantically related clusters of events each with its own tableau and related to each other by a reference frame transformation. a similar grouping can be done for objects making the system computationally efficient. for temporal reasoning  the system is formally adequate except for linguistic fuzziness.for geometric reasoning  polyhedra can be represented by allowing paramvtiization. the uniformity of the time and space representation makes this approach particularly 
attractive. 
	i 	i n t r o d u c t i o n 
     most work in artilicial intelligence which deals with real world problems would require some reasoning with time and space. this paper describes an approach to representing temporal and spatial information using linear constraints. deductions can then be performed by using linear programming. 
     the importance of a temporal understanding in the areas of problem solving and natural language understanding has been recognized earlicr l  1 . most problem solving systems have modelled time using a state-space approach. in this approach the world is described as a sequence of snapshots each with a set of facts holding at the time instant. becausc of the inadequacy of this approach  attempts have been made to incorporate time explicitly in planning  1 1 . in particular vere's deviser  is a general purpose planner which generates parallel plans to achieve goals with imposed time constraints in the presence of scheduled external events. the temporal representation and reasoning is ad hoc and tied to the needs of the planner. 
     a more general purpose approach is that taken in the  ystems  1 1  that build time specialists. such a subsystem maintains temporal relations and provides the rest of the system with tools to store  retrieve  delete and reason with the temporal information. there are two major requirements for a time specialist: first  it must be formally adequate  and second it must be computationally effective. the first condition is met if the formal system is coherent and consistent  and contains sufficient mechanisms to be able to represent all temporal specifications and perform all the deductions we want. the second requirement 
 this work was supported under arpa contract n1-c1 and nasa grant nac 1. 
is essential in order to have the program produce answers with a reasonable amount of effort. this paper describes another attempt in this direction. 
     geometric reasoning research has been carried out mainly in the context of robotics and vision. we wish to deduce spatial relationships of objects in three dimensions given some knowledge of their positions  orientations and shapes. in manipulation tasks it is often necessary to plan paths past obstacles. in vision tasks  one needs to identify quasi-invariant characterisations of observables that the object will generate. 
	i i 	t e m p o r a l r e a s o n i n g 
general f r a m e w o r k . 
     temporal information is information about events from the viewpoint of an observer with an internal clock ie a mechanism for judging before and after with an internal metric. scmantically related clusters of events are grouped into one time frame with its own clock. in each time frame  temporal reasoning becomes a linear programming problem which is solved by the simplex method. linear coordinate transforms relate different time frames. 
temporal specifications. 
     in order for the system to be formally adequate it should be possible to represent all reasonable temporal information. this information is organised as a set of temporal specifications. a temporal specificationis a statement that partially specifies in some manner  the time of one or more events. examples are: 
      1  the gas leak started immediately after takeoff. 
      1  john saw mary a while ago. 
      1  my fever lasted 1 days. 
      1  a few days back  i was in las vegas. 
      1  hiroshima was bombed on august 1  1. 
      1  1 will finish my phd in two to three years. 
      1  jack had an accident a month after getting to boston. 
      1  the symptoms start appearing within 1 minutes of the snakebite. 
     it may be observed that except for  1  and possibly  1  all the specifications are linear relations between the end points of events and can be handled by our system. phrases like 'a while' and 'a few' cannot be handled by a time specialist in isolation unless it is done by ad hoc rules of the type used by kahn and corry. we decided not to use such an approach as we believe that a satisfactory solution to this problem can come only in the context of a well-developed natural language understanding ability. 
     temporal information can be given both as relations between endpoints and between intervals. a fact like the bank opens at 1 am is a statement about the startpoint of the event bankis-open. a fact like t h e c u b a n missile crisis took place during kennedy's t e r m is a statement about intervals. the 

1 j. malik and t. binford 
two approaches are equivalent in terms of representational power. for the convenience of the user  both forms of specification are allowed. the internal representation is in terms of endpoints as that is more natural for our representational scheme.relations involving endpoints are inequalities which are converted to equations by introducing slack variables. relations involving intervals are converted to relations involving endpoints as shown in the following table: 
interval relation e n d p o i n t relation before a b 	enda 	  	starts after a b 	ends 	  	starta consecutive a b 	enda 	= 	starts 	during a b 	{starts   start a  a  enda   endb  
representation and reasoning. 
     as may have been observed  all the temporal specifications can be converted to linear relations between the endpoints of the events. this means that we can use linear programming to represent and reason with temporal information. a time 
specialist based on linear programming is guaranteed to be formally adequate -unlike the ad hoc methods. it provides a uniform representation for storing the wide variety of temporal information. the linear programming is done using the simplex algorithm in the version formulated by tucker. in this approach the rows of the tableau have a direct physical meaning they correspond to the endpoints of the events. the system was written in maclisp in the a c r o n y m environment so that it could be used easily as a module for future image understanding work. 
     as the tableau represents all the information in the temporal specifications  the system is complete all deductions that can be made from the constraints can be made from the tableau. the 
general approach is to formulate an expression which is maximized or minimized  while still satisfying the constraints in the tableau. the implemented features include 
     1. satisfiability-as the linear constraints associated with each temporal specification arc entered into the tableau  the existence of a feasible solution is checked. the system refuses to accept a constraint that is inconsistent with the previous set. 
     1. bounds-one can determine the upper and lower bounds for any variable  which corresponds to an endpoint of an event  or a linear expression in these variables. for example  this permits us to find upper and lower bounds on the duration of an event. 
     1. possibility and necessity-if a predicate's being true would not be inconsistent with the constraints in the tableau  the predicate is said to be possible. if a predicate's being false would be inconsistent with the constraints of the tableau  the predicate is snid to be necessary. the temporal predicate is converted into an arithmetic expression in the endpoint variables. by determining the upper and/or lower bounds of this characteristic expression the query can be answered. for example  the characteristic expression for the temporal predicate  before a b  is enda - starts- if this expression is possibly non-positive  ie its lower bound is   1  then the predicate is possibly true. if this expression is necessarily non-positive  then a is necessarily before b. these deductions would be useful to a planner using this time specialist. if event a is necessarily after b  then that ordering can be done right away. possibility considerations can help prevent unnecessary backtracking. 
comparison w i t h other systems. 
     the idea of using linear constraints to provide a uniform representation of temporal information is a major change from the philosophy of earlier systems. kahn and gorry use several different ways of organizing the events with a date-line  using before/after chains  and using special reference events each with a separate procedure for making deductions. allen  l  uses a network of constraints to maintain all possible relationships about how the intervals in it are related. however  in his system no metric information is represented and thus fails to be formally adequate by our criteria. 
     to people conditioned to react with horror to uniform  formally adequate schemes  our representation would immediately raise the specter of inefficiency. indeed  this would be so if all the temporal facts about the domain were to be represented in the same linear programming tableau. recall  however that we can organize the information in semantically related clusterseach with only a small number of constraints.. the system still remains complete because we can do a reference frame transformation to relate events in different clusters. this idea buys us the same advantage as the reference interval conccpt l 1  in a more systematic way. the analogy with the way we organize and reason with spatial information suggests the naturalness of this approach. 
	i i i 	s p a t i a l 	r e a s o n i n g 
one dimension. 
     there is a direct isomorphism between temporal reasoning and spatial reasoning in one dimension.1object a is to the left of object b' corresponds to 'event a is before event b'. the everyday terms left of/right of  front of/behind  below/above are counterparts of before/after by considering respectively the x-axis  y-axis  z-axis instead of the time axis. the notion of different coordinate frames is equally applicable. as in the case of temporal reasoning  we are not considering the linguistic difficulties involved in understanding words like 'near' and 'fear'. 

three 	dimensions -partitionable 
     if information about each dimension can be represented independently which is the counterpart of the assumption that the temporal reasoning can be factored out we have the power to represent and reason with 1 i  parallelopipeds with each dimension parallel to one of the. axes. objects which can be expressed as combinations of such primitive objects can also be represented. three separate linear programming tableaus will be maintained for the three dimensions with no sharing of variables. questions like is a inside b  can be answered by finding the conjunction of three query answers. 
three dimensions-linear constraints. 
     we can extend our representational power by allowing parametrisation with parameters shared between dimensions or equivalently having just one tableau to represent the constraints for all the three dimensions. any convex polyhedral region in space can thus be represented. standard deductions can be carried out using linear programming techniques. 
comparison w i t h other approaches. 
     unlike the temporal domain  there are several schemes in use with greater representational power/ease of use. generalized cones have been found more useful for modelling objects as compared to polyhedra. to increase the power of the constraints approach  non linear constraints have to be allowed as in a c r o n y m     . t h e uniformness of the space and time approach is one of the major attractions of our approach. we have used this approach to study reasoning in the pool table world. reasoning can be carried out equivalently in the time or spatial domain. unfortunately  we are unable to give a detailed account here due to lack of space. 
	i v 	g e n e r a l r e m a r k s 
     much knowledge representation work has been characterised by a confusion between representation and implementation. the representational issue is the question 'what must be repre-
sented '. the answer is in terms of a mathematical structure in our case a set of linear constraints partitioned in a particular way. the implementation stage is where we deal with specific algorithms and data structures in our case the simplex method and its tableau. marr had considerably emphasized the significance of this distinction. as knowledge representational techniques become more precise and specific  eg in vision and robotics research  this point will become even more important. 
r e f e r e n c e s 
 allen  james f.  an interval-based representation of temporal knowledge   proceedings ijcai-1   1   1. 
 brooks rodney a.  symbolic reasoning among 1-d models and 
j. malik and t. binford 1 
1-d images   stanford al laboratory memo aim-1  june 1. 
 bruce b.   a model for temporal 