 
       the jet propulsion laboratory is engaged in a robot research program. the program is aimed at the development and demonstration of technology r e q u i r e d to i n t e g r a t e a v a r i e t y of robntic functions {locomotion  manipulation  sensing and perception  decision making  and man-robot interaction  into a working robot unit operating in a real world environment and dealing with both man-made and natural objects. this paper briefly describes the hardware and software system architecture of the robot breadboard and summarizes the developments to date. the content of the paper is focused on the unique planning considerations involved in incorporating a 
       manipulator as part of an autonomous robot system. in particular  the effects of system architecture  arm trajectory calculations  and arm dynamics and control are discussed in the context of planning arm motion in complex and changing sensory and workspace environments. 
       key terms: robot system; robot system planning; robot breadboard architecture; a r m motion planning; a r m control; a r m dynamics; sensors for manipulation; manipulating in natural and constrained environment. 
1. 1 introduction 
       autonomous goal-directed coordination of locomotion  manipulation  and sensation and perception in a semi-natural environment is the capability being sought by the jpl robot research program. the initial goal of the program is to demonstrate the integration of sensory and motor functions in the autonomous performance of manipulation and locomotion tasks in response to global commands issued by an operator. the long-range goal is to develop  test  and display concepts of robot structure  system integration and operation  and machine intelligence for the design and use of adaptive autonomous machines for advanced space and planetary exploration. the jpl program utilizes results of progress obtained at other institutions engaged in robotics and artificial intelligence work reviewed in ref. 1.  ref. 1 contains an extensive list of related literature.   the robot breadboard itself is a mobile vehicle  similar to that used by the astronauts on the moon  equipped with a six degree-of-freedom manipulator  a modified version of the stanford electric a r m   see ref. 1   a complement of sensors  tv  laser range finder  navigation and guidance sensors  tactile sensors  and  eventually  proximity sensors   and a local mini-computer in communication with remote computers  graphic displays  and operator consoles. 
*this paper presents the results of one phase of research carried out at the jet propulsion laboratory  
california institute of technology  under contract no. nas1  sponsored by the national aeronautics and space administration. 
       in this paper  we focus on the particular planning considerations involved in incorporating a manipulator as part of a total robot system operating in a complex sensory environment and dealing with 
both man-made and natural objects. 	first the architecture of the jpl robot breadboard and then the 
different aspects of planning manipulator motion are discussed. 
	1. 1 	breadboard system architecture 
       the breadboard is divided into six functional subsystems: locomotion  manipulation  environment sensing and perception  computing and data handling facilities  robot executive  rex   and operator-
robot interface. 	each subsystem contains both hard-
ware and software. subsystem design is based solely on criteria of functional compatibility  performance  growth capability  and convenient interfacing. total robot system integration will be studied experimentally and different concepts wil! be demonstrated in successive stages. 
1. 1 breadboard hardware 
       the major subsystem hardware elements are shown in fig. 1  indicating also the physica  size of the moving part of the breadboard. 

	fig. 1. 	breadboard hardware configuration 
1        the vehicle  on loan from marshall space flight center  provides a flat and relatively stable platform for mounting breadboard elements to be moved around in the environment. total effective load capacity o¡ê the vehicle is about 1 pounds. travel speed will be limited to 1 mile/hour. the vehicle has ackerman-type double steering; the two ends can be steered in the same or opposite directions. alternatively  one or the other end only can be steered. each wheel is independently driven by a dc torque motor. currently  the vehicle has only dynamic braking. the suspension has a modified independent spring action at each wheel. inputs to the vehicle navigation  guidance  and control system are furnished by odometers mounted on the front wheels  providing vehicle center line distance travel information   a  ruggedized  directional gyro compass  providing directional reference   and wheel drive motor tachometers  providing information on vehicle velocity . 
       the manipulator is a modified version of the stanford electric a r m described in detail in ref. 1. it has six degrees of freedom  allowing any desired hand position and orientation in an open or slightly obscured workspace. 	the reachable set of points  the workspace  is within a radius of 1 inches measured from the origin of the manipulator base reference frame. 	 see fig. 1.   	the six joints connecting tv cameras which will provide'digitized stereoscopic input to both scene analysis and operator display  ref. 1 . a 1 by 1 resolution sequential column digitizer furnishes video data for computer-rate digital picture processing and operator display. the tv cameras and laser are mounted on a pan and tilt mechanisms referenced to a common coordinate system and will be used as an integrated scene analysis subsystem. arm-mounted proximity sensors {described in ref. 1  and tactile sensors will at a later date augment the environment sensing and 
perception subsystem. 
	sensor. 	if this proximity sensor is mounted to an 
appropriate place on the hand  the sensitive volume 
will move with and ahead of the hand at a known distance relative to a reference point on the hand. a voltage signal will appear when the sensitive volume  touches  a solid surface as the hand approaches the surface. this voltage signal can be used to guide 
and control the terminal motion of the hand in direct response to sensed relative hand-object position and 
orientation. of course  several proximity sensors can be mounted on the hand  providing several sensi-
tive volumes in a known pattern around the hand and facilitating the design of a versatile conditional terminal guidance and control logic for hand motion. 
       the computing and data handling subsystem architecture is currently based on a remote pdp-1 in the arpa net as an off-line computer. 	this will be connected to a local real time computer perfor-
	ming realtime robot control and i/o functions. 	 see 
fig. 1.   the remote computer system will be used 
fig. 1. 	reference frames      the proximity sensor is a small  about 1. 1 cubic inch  electro-optical device with a small ellipsoid-shaped sensitive volume permanently focused at a distance of a few inches in front of the 

	for .link-joint pairs of 	a r m 
the links from the base to the hand are in the following sequence: two rotary joints  providing shoulder azimuth and elevation action   a linear joint {providing in and out reach action   and three rotary joints  providing the wrist action . the hand is presently a simple parallel jaw mechanism. the joints are driven by permanent magnet dc torque motors geared directly to the corresponding links. depending on the relative position of the links  the arm can handle loads of up to 1 pounds earth weight. the arm servo control utilizes analog position measurements from the joint outputs and analog velocity measurements from the motor shafts. holding torque at each joint is provided by electromagnetic brakes. the arm's structural stiffness and tight 
servo control can provide hand positioning accuracy 
within a few tenths of an inch. a suitable articulated and adaptively controlled hand will be added at a later date. 
       environment sensing and perception is mainly obtained from two sources: tv cameras and laser ranging. the laser ranging device is a gaas pulsed mode laser with fast pulse  ~1 ns . the beam is pointed by a gimballed m i r r o r and detected by a photomultiplier. provisions are made for multipulse averaging using analog integration and variable averaging time. the sensing range is tentatively up to 1 feet. the design is based on previous jpl experiments  ref. 1 . related data handling problems are treated in ref. 1. the vision system consists of two identical and optically parallel vidicon fig. 1. computing and data handling subsystem architecture 
to process tv and laser pictures  to construct the  world model    to operate the different subsystem planning programs  and to execute top-level decisionmaking programs of the robot executive  rex . rex is described in detail below. 
       the realtime computer will interface with the robot through input and output units which contain a / d and d/a converters. 	a cable unit will contain the necessary logic devices allowing the robot to be tethered to the cpu via a 1 foot cable. 	tv data from the robot will interface directly  via the video converter  to the cpu through a separate cable. 	a disk storage unit will be used for fast  random access mass storage and will serve to store the operating 
1 
system routines  robot eupport programs  tv and laser pictures  and status files for the operator terminal. 	a magnetic tape unit will be used for performing system diagnostics and for entering operating system programs and any robot subsystem programs developed in the off-line computer. 	the operator console will allow operator interaction with the system and development of subsystem support programs. 
       the operator-robot interface functions will be performed through an imlac terminal connected to the realtime computer. 	 see fig. 1.  during program development  the imlac will also be used for simulation studies. 	the imlac terminal includes a crt display  a teletype  and a read/write cassette recorder. 
1. z breadboard software 
       the software system architecture is essentially hierarchical with the robot executive  rex  controlling and monitoring the various software subsystems. rex performs problem solving  interacts with the human input command structure  manages the  world model   and calls the major subsystem software modules  vehicle  arm  etc. . the major subsystems are designed to be largely independent of each other. necessary data concerning the state of the robot and environment used by the various subsystems are fur-
nished through the  world model    
       a master control program  mcp  ties the various subsystem programs together and acts as an operating system for them. present plans are to design the mcp in the remote computer using the mechanisms in sail  stanford artificial intelligence language   refs. 1 and 1  for the creation and control of concurrent processes. operating system modifications are also planned based on the use of the tenex paging system  ref. 1  which makes available interrupts of various types not incorporated into sail  subsystem programs can be written in sail or possibly in other languages. sail provides easy linkages to fortran and assembly languages. 
       the total breadboard system is of experimental nature. thus  the software system is intended to be expandable and evolutionary. 
	1. 1 	planning manipulator motion 
       this task involves three separate efforts: system architecture effects  trajectory planning  and manipulator dynamics and control. these are  r e spectively  planning for manipulator motion  planning 
o{ motion  and execution of planning. planning tor manipulator motion occurs at the system level in the selection  design  and placement of robot hardware. planning of motion involves the selection and implementation of methods of specifying particular motions and motion constraints. execution planning deals with motion control implementation schemes. we now consider each of these three separately. 
1. 1 	system architecture effects 
       placement of the manipulator along the center line of the vehicle about 1 inches from the front edge of the vehicle platform allows a reasonable workspace for the manipulator on the ground  which is 1 inches below the platform  while still permitting access to tools and sample storage bins near the center of the platform. this placement does  however  give rise to several motion constraints; the manipulator can easily collide with the platform  the front edge of the platform  the wheels  and the wheel drive motors  even though the basic vehicle was modified extensively to minimize this problem. 
       the selection and placement of sensors give rise to additional motion constraints for the manipulator as well as allowing the manipulator to know its world. 	the manipulator makes use of both external and internal sensors. 	in the initial configuration of the robot  the primary external sensors to be used by the manipulator are the dual tv and laser range finder. 	these are used to determine a priori manipulator targets and are assumed to have sufficient 
resolution in the initial simplified robot environment 
for effective target specification. later operation of the robot in richer and more perceptually complex environments rendering the sole use of these sensors open to question will be accompanied by the use of conditional arm control loops regulated by direct inputs from tactile and proximity sensors. use of these latter devices in conjunction with an adaptive  articulated terminal effector will permit the arm to respond directly to relevant aspects of the environment. 
       fig. 1a shows a proximity sensor mounted on the hand   while fig. 1b shows the concept of proximity sensor application for terminal guidance and control of hand motion in  distance seeking  and  distance keeping  modes of operation. a more detailed treatment of proximity sensor application to manipulator control can be found in ref. 1. 
i ¡ö uniform distance between a 
fixed point on the hand and 
solid objects during motion 

concept of proximity sensor application for closed-loop guidance and control 
op hand motion 
	fig- 1. 	terminal guidance and control 
of hand motion using proximity sensing 
       our robot-hand application calls for handling a variety of both regular  man-made  and irregular  natural  objects of different size and weight in various manipulative tasks. therefore  a versatile hand-finger mechanism will ultimately be required. an articulated and adaptively controlled hand  using design and control principles similar to those applied in prosthetic hand research; see refs. 1 and 1  will not require detailed a priori information on objects to be handled and will ease the control of many details of a grasping motion since the hand  while gripping an object and monitoring only one actuator  adapts itself  reflexively  to the shape  size  orientation  and weight of the object. 
1        placement of tactile and proximity sensors on the manipulator itself creates no new obstacles or additional constraints  but placement of the tv/laser head is a berious problem. 	the present configuration places these sensors on a mast above the a r m support post and represents a tradeoff between good viewing angle and keeping out of the way of the manipulator. even so  it is possible for the manipulator to collide with the tv/laaer head  either in normal motion or in switching from a right arm to left arm configuration. however  since the manipulator and tv/laser systems are not run simultaneously in this breadboard and the tv/laser head is mounted on a pan/tilt mechanism  these sensors can be moved out of the 
way. 
       the physical dimensions of the manipulator have been modified from the original stanford design to permit a greater workspace on the ground. specifically  the a r m support post has been reduced by two inches and the extendable boom lengthened considerably. 
       the initial configuration of the robot thus provides the tools for deterministic planning of arm motion based on a priori tv/laser data with motion implementation based on feedback fronvinternal position  pot  and rate  tach  sensors. only primitive tactile feedback in the initial configuration allows for some conditional modification of plan. in subsequent configurations  proximity sensing and an adaptive terminal effector will permit more flexible and environment-responsive manipulator motion planning. in all cases  rover hardware design constrains manipulator motion by presenting a series of permanent obstacles to the arm. 
1 	trajectory planning 
       the term  trajectory  is here meant to refer to some description  partial or complete  of the path that the arm follows. 
       trajectory  planning  is the activity preceding arm motion  that is  trajectory execution   the purpose of which is to constrain or otherwise define that motion. target and environmental obstacle information are here assumed to be provided by rex and the  world model.  
       the degree to which the trajectory is to respond to external sensing during trajectory execution defines a continuum of trajectory planning. at one extreme is purely deterministic trajectory planning. any external sensing to be done is performed during the planning stage; only a catastrophe halts execution of the planned path. internal sensing is used throughout execution to maintain the adherence of actual motion to plan. deterministic planning assumes a static world during arm motion as well as sufficient a priori knowledge and execution accuracy capabilities  and limits adaptive control. towards the other extreme is conditional planning  the nature of which is highly dependent on the specific external sensors used. the benefits of conditional planning are flexibility of response and possible reduction of planning time at the possible cost of increased realtime computation requirements. 
       in the initial configuration  deterministic planning similar to that used in the stanford hand-eye project  refs. 1 and 1  is to be employed. 	reasons include the initial lack of proximity sensing  the adequacy of tv/laser a priori information in the initial simplified environment  and the fact that most of the obstacles to arm motion are  in the initial configuration  permanent obstacles known a priori and resulting from the placement of vehicle hardware. conditional planning is to be implemented and interfaced with existing deterministic planning at a later time. 
       a related distinction concerns the manner in which the trajectory plan is specified. either a sequence of a few points or the complete time history of the arm  that is  the path  can be planned. a r m motion in a constrained workspace involves path planning. 
       deterministic path planning can be performed in joint-variable space or in 1-space. in the former case  the time history of each joint is planned; it is the combination of the time histories of the joint variables that describes the motion of the arm. in the latter case  it is the motion of a particular point on the manipulator  commonly  a point on the hand  that is planned; the required joint variable time histories are derived from the plan. the advantage of planning in joint-variable space is that the plan is formulated more directly in terms of the variables to be controlled during motion. the associated disadvantage is the difficulty in determining where the various links will be during motion  a task required to guarantee avoidance of collisions with the other parts of the robot  the natural environment  or even with the arm itself. 
       constraining the fingertips to describe an elliptical arc is an example of planning in 1-space. in addition to the difficulties in finding the path described by other points on other links of the arm  there is also the problem of determining the kinematic sequence of joint variable values required to implement the plan. 
       in the stanford hand-eye project  refs. 1 and 1   the focus to date has been on deterministic path planning in joint-variable space  with some conditional planning. specifically  the time histories of the joint variables have been specified in terms of sequences of polynomials with continuity of joint variable value and its first two derivatives guaranteed at the boundary points of polynomials in the polynomial sequence. the number of polynomial segments and specified motion contraints determine the total number of coefficients required for a complete quantitative specification of joint trajectory. the jpl robot research program uses a modified version of the stanford planning algorithm. 
       fig  1a shows the time history of a joint variable described by a cubic  a quintic  and another cubic. it has been found that trajectories using polynomials of degree five or higher typically wander  as shown. this behavior appears in observation as gross extraneous motion of the arm. 
       use of a quartic-cubic-quartic trajectory reveals a somewhat different problem. as shown in fig. 1b  the desire to assure an appropriate direction of departure and approach of the terminal effector can be thwarted by the tendency of the quarticcubic-quartic trajectory to overshoot or undershoot its endpoint values. the stanford hand-eye project used both of these polynomial sequences  eliminating overshoot by special code. 
       a third polynomial sequence  five cubics  is being implemented for the jpl arm. this trajectory appears to minimize the  wander  and  overshoot  problems. typically  as in fig. 1c  there is no overshoot; wander  when it occurs  is small. 
       obstacle avoidance has been implemented for the jpl arm in two ways. 	the first method consists of the specification of an additional safe intermediate position for the joint s  most critically affecting arm motion in the sensitive direction. 	an additional 

1 

1 

1 

cubic is required for each additional intermediate 
position specified. the effect of implementing this type of obstacle avoidance is shown in the trajectory illustrated in figs. 1 and 1. fig. 1 describes joint variable motion and fig. 1 illustrates the projection of the same planned trajectories in the base coordinate system  as well as the associated total velocities. 
       as seen in fig. 1a  the task is to lift an object from the ground  from xq = 1   yo= 1   zq - -1  in the base reference frame  and deposit it on the vehicle platform at xq = 1   yo = -1   zo - 1 . the hand orientation is also specified at both end points of the trajectory. further  to aid the determination of the lift-off and terminal approach phases of the joint trajectories  two intermittent hand positions are also specified. as seen in fig- 1  joint trajectories #1 and #1 contain  respectively  1 and 1 segments due to obstacle avoidance. 
       a second method of obstacle avoidance is called the  freeway method.   precomputed safe trajectories  called  freeways   relating commonly accessed 
points are utilized in conjunction with entrance and exit  ramps  relating planned arm configurations to existing freeways. 	this freeway method is potentially useful in avoiding obstacles permanently affixed to the vehicle  such as the tv/laser head and support  the wheels and wheel motors  and the vehicle platform. 	presently  there are 1 such permanent obstacles on the jpl robot. 	the freeway method can be used more frequently if the vehicle is positioned in a predetermined standard manner with respect to objects of intended manipulation. 
       obstacle detection is performed by the relatively cumbersome method of checking for collision with all possible objects at various points along the trajectory. of course  for many obstacles  the safety of several links mast be examined. in the case of permanent obstacles  however  the invariant property of the relationship has been exploited to produce a series of increasingly complex tests. thus  in many cases  simple checks of joint variable values can assure safe motion  
1. 1 manipulator dynamics and control 
       execution planning deals with the specification of control laws and the design of control schemes whose implementation will assure that the physical motion of the arm will follow the desired motion. 
       a r m motion between distant points without prescribed continuous trajectories between the points can simply be controlled by driving each motor at some preset rate and terminating the motor drive at each joint when an appropriate signal  potentiometer or some external sensor  indicated that the joint position had reached the preset or desired terminal value  a r m trajectories planned in terms of continuous space-time coordination of joint motions  however  require that the joints be driven to comply strictly with the planned time histories of joint positions. 
       several techniques are available to build a suitable position servo for each joint drive.  see ref. 1.  an appealing computer-oriented servo technique  used in the stanford hand-eye project  is to compute the required torque or force as a function of time for each joint drive  accounting also for gear ratio  efficiency  and possible nonlinearities  and construct the joint position servo loops around 

       the dynamics of motion at the six joints of the arm is described by a coupled set of six second order nonlinear differential equations with time-varying  in fact  with state-varying  coefficients. there is no simple proportionality between torque {or force  acting at one joint and the acceleration of the same jyint when several joints are in motion simultaneously. even if only one joint moves at a given time  the proportionality between torque and acceleration is a complex function of the actual configuration of all links ahead of the moving joint and any load in the hand. the total variations in link inertias as seen at the joint drives due to changes in arm link configuration or load in the hand have been calculated for the jpl arm  ref.   1  and are shown in fig. 1. 

       in the case of simultaneous motion of several a r m joints  the effective torque  or force  acting at each joint is the sum of a number of dynamic com-
ponents: inertial acceleration of the joint; reaction torques or forces due to acceleration and velocity at other joints; gravity terms. the relative importance of the various dynamic components related to the planned motion displayed in'figs. 1 and 1 and computed for the actual kinematic and inertial parameters of the jpl robot research a r m is illustrated 
in fig- 1. to simplify the displayed variations  only motions and inertias of the first three joints are accounted for in the diagrams of fig. 1. if the speed of motion  or rather  the total lime of motion  is changed by a factor n  then the acce leration and velocity dependent torque and force-components of fig. 1 can simply be scaled by a factor n1. 
       two questions are currently investigated  ref. 1 : to what extent should the reaction components be accounted for  and in what form should the statevarying dynamic coefficients be specified to ease control scheme implementation. 
1. 1 summary 
       the integration of several robot subsystems into a functioning autonomous adaptive machine requires significant planning considerations on all system levels. the jpl robot research program is currently focused on subsystem planning and design and is in the process of implementing results in hardware and software. the manipulator itself has been manufactured and is undergoing final testing. vehicle modifications are partly completed. construction of the tv and laser systems are in progress. selection of complementary sensors and other hardware and acquisition of a realtime controller  the local computer  are underway. the design and building of the a / d and d/a interface units are also underway. development of the executive and subsystem software and the master control program have begun. the future concerns are mainly related to the implementation of subsystem execution programs  planning for subsystem interaction  and the integration of subsystems into a unified robot breadboard. 
       the outlined considerations and results related to the design of a self-contained planning algorithm for manipulator control  when the manipulator is part of a total robot system  suggest conducting further work in two directions: direct path planning in the object space; and truly adaptive manipulator control through unification of deterministic and conditional elements in the planning algorithm. 
acknowledgment 
       the preparation of the first part of the paper benefited from discussions with several members of the jpl ai working group. 
