 
intelligent monitoring and control involves observing and guiding the behavior of a physical system toward some objective  with realtime constraints on the utility of particular actions. generic functional requirements for this task include: integration of perception  reasoning  and action; integration of multiple reasoning activities; reasoning about complex  timevarying systems; coordination of multiple response modes; dynamic allocation of limited computational resources. we illustrate these requirements in the domain of patient monitoring in a surgical intensive care unit  sicu . we propose a generic architecture  designed and implemented in layers: top-level system organization; reasoning architecture; generic reasoning skills and knowledge representation; firstprinciples knowledge of physical systems; domain knowledge. we illustrate the architecture in the  guardian  system for sicu monitoring and describe guardian's performance on an illustrative scenario. finally  we discuss the generality and limitations of the proposed architecture. 
1 the problem 
intelligent monitoring and control involves observing and guiding the behavior of a physical system toward some objective  with real-time constraints on the utility of particular actions. control theory   bollinger and duffie  1   hale  1   is useful for tasks that permit a straightforward mapping between sensed data values and appropriate control actions. by contrast  we are con-
   *this research was supported by grants from darpa and nih and by gifts from rockwell international corp. and 
fmc corp. the palo alto vamc supports adam seiver's participation in the project. we gratefully acknowledge contributions by reed hastings and nicholas parlante to an early version of guardian and to adnan darwiche  who recently 
joined the project. we have benefitted from discussions with lawrence fagan and his students  who are working on a related 1cu monitoring system  called 'qq.' we thank edward feigenbaum for sponsoring the work at the knowledge systems laboratory. 
cerned with tasks that require a more  intelligent  approach  including: interpretation and prediction of system behavior  diagnosis of exceptional events  explanation of causal mechanisms  reactive response to urgent events  reasoned response to other events  and planning of longer-term courses of action. such tasks occur in a variety of domains  for example: process control  crisis management  construction management  equipment monitoring  tutoring  and medical monitoring  fagan  1    fagan et a/.  1    hayes-roth  1   pardee and hayes-roth  1    raulefs et a/.  1  . 
　our goal is to develop a generic ai architecture for intelligent monitoring and control  suitable for application in multiple domains. in addition to its potential practical utility  this research addresses fundamental ai issues  including: reasoning methods  knowledge representation  resource allocation  distributed intelligence  and real-time performance. in this paper  we propose an architecture and illustrate it in the domain of patient monitoring in a surgical intensive care unit  sicu . section 1 identifies important generic requirements for intelligent monitoring and control and illustrates them for the sicu monitoring task. section 1 presents the proposed architecture  illustrates it with an experimental sicu monitoring system called  guardian   and discusses how the architecture addresses the requirements. section 1 illustrates guardian's performance on a characteristic scenario. sections 1 and 1 discuss the generality and limitations of the architecture. 
1 requirements 
we aim to address generic ais requirements for: integration of perception  reasoning  and action; integration of multiple reasoning activities; reasoning about complex  time-varying systems; coordination of multiple response modes; and dynamic allocation of limited computational resources. 
　consider sicu monitoring. patients in the sicu have had major surgery and suffer temporary failure of one or more organ systems. therefore  life-support devices assume the fundamental functions of the ailing organ system until it can heal and resume its normal function. for example  a ventilator is an artificial breathing machine. most life-support devices have sensors that measure relevant parameters of physiological function and settings to determine how much assistance the device provides. 
hayes-roth  washington  hewett  hewett and seiver 	1 

the ventilator has sensors that measure gas pressures and flows in the patient-ventilator system. it has settings that determine the number of breaths delivered to the patient per minute  the volume of air blown into the lungs on each breath  and the percent oxygen used to enrich the breathing mixture. in addition to these automatic measurements and controls  sicu monitoring involves other regular observations  e.g.  chest xrays  taken once or twice a day   discretionary observations  e.g.  laboratory tests of blood gases   and therapeutic actions  e.g.  adjustment of a ventilator tube . 
   because life-support devices injure as well as sustain patients  one objective of sicu monitoring is to wean the patient from the device as rapidly as is possible and consistent with other therapeutic objectives. based on a model of the patient's physiological impairment and expected rate of recovery  the physician orders an initial configuration of device settings that substantially augment the patient's own function  followed by a program of modifications to those settings that gradually  over a period of days or weeks  reduce the level of assistance to zero  followed by device withdrawal. given the complexity of the biological system  the characteristic instability of post-surgical patients  and the duration of the weaning period  however  the patient model may be imprecise or incorrect. accordingly  sicu staff monitor the patient closely so as to validate the assumptions underlying the weaning plan  refine the plan to coordinate with the detailed progress of the patient's physiological function  modify the plan when the underlying assumptions prove incorrect  and perform additional actions to diagnose and correct other unanticipated problems. 
   sicu monitoring instantiates the above requirements as follows. it requires integration of perception of patient data; reasoning about the patient's condition  progress  and therapy; and actions to implement or recommend therapeutic interventions. it requires integration of reasoning activities for: interpretation of patient data  diagnosis of observed signs and symptoms  prediction and explanation of the patient's progress  reaction to urgent patient conditions  and planning of longer-term therapy. it requires reasoning about the behavior of an impaired biological organism  partially sustained by physical devices  over a period of days or weeks. it requires coordination of: immediate reactive responses to emergencies  prompt associative responses where clinical knowledge is applicable  and deliberate reasoned responses to complex 
or evolving patient conditions. it requires dynamic allocation of limited computational resources among competing monitoring activities presenting variable and uncertain resource requirements. 
1 proposed architecture 
figure 1 illustrates the proposed architecture  as currently implemented for guardian. the following sections describe the top-level system organization  reasoning architecture  reasoning skills  and knowledge representation. 
1 	real-time and high performance 

1 	top-level system organization 
to enable a monitoring system to interact with a dynamic environment  our top-level system organization   hayes-roth  1b    hayes-roth  1    hayes-roth et a/.  1   provides several types of loosely-coupled subsystems:  a  a central reasoning system performs all knowledge-based reasoning;  b  a communication interface mediates i/o between the reasoning system and all perception/action subsystems via shared i/o buflers llewett and hayes-roth  1 ;  c  each of several perceptual subsystems comprises sensors and an associated preprocessor that interprets and filters sensed data according to instructions from the reasoning system  washington and hayes-roth  1 ; and  d  each of several action subsystems comprises effectors and an associated driver that interprets and executes action programs according to instructions from the reasoning system. for example  in guardian  a single preprocessor handles inputs from all sensors associated with a patientventilator-laboratory simulation. several drivers handle graphical displays and user interactions on different devices. 
　different subsystems and their constituent processes operate concurrently  enabling a monitoring system to 

perform each of its three basic functions-perceive events in the environment  perform actions that affect the environment  and reason about its monitoring activitieswithout interrupting or otherwise interfering with one another. the results of these activities influence one another asynchronously. for example  guardian simultaneously perceives new patient data  conducts its ongoing reasoning  and performs intended user interactions. it incorporates newly perceived patient data into its reasoning as those data appear in its input buffers and performs newly intended actions determined by its reasoning as they appear in its output buffers. 
　the proposed organization also provides complexitymanagement functions. preprocessors shield the reasoning system from the mass of non-critical data generated in the environment. for example  guardian's patient simulation produces values for twenty variables  each sensed up to ten times per second  and its laboratory simulation produces values for several other variables  as requested  and returns them with realistic time delays. by contrast  the reasoning system currently incorporates at most one input per second. guardian's preprocessor protects it from data overload  while insuring that it notices important data  by abstracting sensed data  e.g.  as critical values  averages  or trends  and filtering the abstract values according to guardian's current focus of attention. conversely  drivers relieve the reasoning system of the details of action execution. for example  guardian's drivers handle programs that explain reasoning activities and results. 
　finally  this organization supports immediate reactive response modes by permitting a tight coupling of sensory input to action execution within perception/action subsystems. for example  guardian's display drivers conduct low-level user interactions-e.g.  menu-driven elaborations and explanations-without mediation by the reasoning system. we discuss architectural support for other response modes below. 
1 	reasoning architecture 
we adapted the dynamic control architecture llrayesroth  1   implemented as bb1  h ayes-roth and 
hewett  1   for the reasoning system. as shown in figure 1  all reasoning operations occur in a global memory that contains all of the facts  inferences  events  
plans  etc. known to the system. the architecture iterates a three-step reasoning cycle. first  the agenda manager identifies reasoning operations enabled by recent perceptual events appearing in the input buffers and cognitive events produced by prior reasoning operations. second  the scheduler chooses as the next operation the one that best matches the current control plan. third  the executor executes the chosen operation  changing information in the global memory-possibly the control plan itself-and recording a corresponding cognitive event. 
　this architecture supports the several different reasoning skills required by a monitoring system  discussed below  and enables it to integrate execution of those skills by interleaving their constituent reasoning operations.  we are investigating parallel execution of distributed reasoning tasks  hayes-roth et a/.  1 .  more important  concurrent reasoning activities can influence one another asynchronously by recording and inspecting results in the global memory. for example  guardian has reasoning skills for classifying input data and diagnosing problems. by performing these tasks concurrently  it can reason about problems in dynamic biological systems  classifying relevant new data as they occur and immediately incorporating them into its ongoing diagnosis. 
　the architecture also enables a monitoring system to allocate its limited computational resources among competing monitoring activities. by interleaving control planning operations with other reasoning operations  the system incrementally constructs and modifies control plans for its own behavior in real time. control plans may describe intended behavior at variable levels of specificity and for variable time intervals. at each point in time  the system behaves in accordance with its current control plan. thus  a system can integrate opportunistic responses to unanticipated events with carefully planned courses of action   hayes-roth  1a    johnson and hayes-roth  1  . for example  given an observed problem  guardian decides which of two diagnostic methods to use. if the problem is not serious or occurs at the same time as many other problems  guardian responds reactively and moves on to the next problem. however  if the problem is potentially serious or occurs during an uneventful period  guardian might undertake its more analytic  but computationally expensive model-based reasoning. 
1 	reasoning skills 
as discussed above  intelligent monitoring and control requires multiple reasoning skills. guardian has domain-independent skills for:  a  determining appropriate perceptual filters  based on the system's available resources and ongoing tasks washington and hayesroth  1 ;  b  abstracting perceived data as temporal episodes of defined value categories;  c  diagnosing the most likely causes of commonly observed problems based on bayesian belief networks pearl  1 ;  d  explaining the causal mechanism underlying a diagnosis based on explicit structure/function models  hayes-roth et a/.  1 ;  e  generating plausible diagnoses for unfamiliar problems or those for which the most likely diagnosis is incorrect based on structure/function models  hayesroth et a/.  1 ; and  f  identifying standard actions for commonly diagnosed problems based on association networks. 
　in developing these reasoning skills  we emphasize a monitoring system's need to coordinate multiple response modes. as discussed above  tight coupling of sensory input to action execution in perception/action subsystems provides an immediate reactive response mode. r eactive response is appropriate for critical events or those that do not merit more careful situation assessment and planning. guardian's reactive management of low-level user interactions falls in the latter category. although some investigators argue for exclusively or primarily reactive response modes  agre and 
hayes-roth  washington  hewett  hewett and seiver 	1 chapman  1    brooks  1    firby  1    nilsson  1    rosenschein and kaelbling  1    schoppers  1    we believe that many monitoring and control tasks require reasoned response modes as well hayesroth  1aj. 
   for example  our belief-network operations for diagnosing common problems and identifying standard corrective actions are associative. by performing instances of these two operations in succession  guardian responds quickly  on the order of seconds in the current implementation  performing the standard corrective action for the most likely diagnosis of an immediate problem. we could further reduce the associative response time by combining diagnosis and action in a single operation. however  the current response time is satisfactory in guardian's domain and the interruptability between diagnosis and action is useful. associative response is appropriate for situations that require knowledge-based reasoningthough not very deep-and prompt response. 
　by contrast  our model-based methods for diagnosis and planning  the latter is not yet implemented  are analytic. by exploiting these skills  guardian responds more slowly  on the order of minutes in the current implementation. it develops an explicit model of the causal mechanism underlying the observed problem  plans a course of action-in some cases  coordinated with the patient's changing condition-based on that model  and instantiates that planned course of action in real time. modelbased response is appropriate for unfamiliar problems  problems that require a precise or longer-term course of action  or problems that require actions synchronized with external events. 
　the explicit control provided by our reasoning architecture allows a system to choose among alternative reasoning activities and to interleave multiple activites. thus  guardian can instruct perception/action subsystems to react in specified ways to specified input data. given a problem that requires reasoning  guardian can decide between associative and model-based responses. alternatively  it can combine associative diagnosis with model-based action or combine model-based diagnosis with associative action. in some cases  it may respond to a problem reactively or associatively  and then plan a longer-term course of action. 
1 	knowledge representation 
as discussed above  our reasoning architecture presumes a globally accessible memory. for this purpose  we use a conceptual network representation sowa  1   with predefined architectural concepts  for example  perceptual and cognitive events  control plans  reasoning operations . we have begun to develop an ontology of generic monitoring concepts and conceptual respresentations in three areas. reasoning knowledge includes generic operations and control strategies for component reasoning skills  such as those discussed above. domain knowledge includes both associative knowledge and factual 
knowledge. for example  guardian's associative knowledge currently includes: networks relating semantic categories to value ranges for each measured patient variable; bayesian belief networks pearl  1  relating commonly 
1 	real-time and high performance 
observed signs to likely underlying faults; and association networks relating likely faults to standard treatments. its factual knowledge currently includes explicit structure/function models of the normal anatomy and physiology of the respiratory  circulatory  pulmonary exchange  tissue exchange  and tissue metablism systems and a similar model of the ventilator. first-principles knowledge includes domain-indendent knowledge of the physical world. guardian currently has knowledge of the normal and abnormal structure and function of generic flow  diffusion  and metabolic systems  which it uses to diagnose or explain problems in particular organ systems hayes-roth et a/.  1 . 
1 illustrative performance 
1 	guardian i m p l e m e n t a t i o n 
guardian is a prototype sicu monitoring system. it is designed within the architecture described above  implemented in commonlisp  and runs on a configuration of ti explorers   see figure 1 . guardian can handle a growing variety of sicu scenarios. in this section  we discuss its performance on a scenario that illustrates how the underlying architecture enables guardian to meet the generic requirements introduced in section 1. 
　before discussing the scenario  we make a few observations. first  all of the capabilities discussed below are implemented except as noted in the text. second  the references to real time are approximately correct  with accumulated error on the order of minutes  due to uncontrolled variability in network communications times. third  although guardian can exercise closed-loop control over the patient-ventilator simulation  it would be allowed to act only in an advisory capacity in the hospital. in this scenario  we model the hospital situation  with the assumption that sicu personnel promptly execute all actions recommended by guardian. fourth  for brevity  we omit the details of communications between the reasoning system and perception/action subsystems. however  in every case of perception  the perceptual subsystem relays input data to the communication interface  which inserts it in the appropriate input buffer in the reasoning system. conversely  in every case of action  the reasoning system places an action description in an appropriate output buffer  from which the communication interface retrieves it and relays it to the appropriate action subsystem. finally  also for brevity  we omit discussion of guardian's extensive graphical displays and user interactions. in fact  guardian displays all of its observations  inferences  and recommendations as they occur. 
1 	overview of the scenario 
in this scenario  guardian monitors a ventilator-assisted sicu patient who has just returned from the operating room. the physician has ordered standard ventilator settings  including a breathing rate of 1 breaths per minute and a tidal volume of 1cc. 
　as we shall see  the scenario includes two errors. the first is the physician's error in ordering standard ventilator settings. post-surgical patients typically are cold 

upon their return from the operating room. because a low temperature slows down metabolism  patients need to breath more slowly-lower rate or tidal volume or both-than patients with normal temperatures. otherwise  they will exhale too much co 1   causing a low partial pressure of co 1 in the arterial blood  a condition known as 'hypocapnia.' of course  a post-operative patient will warm up to normal temperature during the next two hours. therefore  the physician should order a low initial breathing rate  say 1 breaths per minute   gradually raised to the normal 1 breaths per second as the patient's temperature rises to normal. although physicians understand such relationships very well  it is not unusual for this kind of error to occur in communications with sicu staff. the second error is guardian's error in failing to notice that the standard ventilator settings are inappropriate  given the patient's temperature. again  it is not unusual for sicu staff to make this kind of error  either by oversight or because they are busy elsewhere. although guardian could easily avoid making this particular error  we allow it to occur in the scenario to illustrate how guardian can recover from its own errors or those made by others. 
1 	g e t t i n g started 
beginning at 1  guardian decides to follow standard set-up procedures for monitoring a newly post-surgical patient. it sends its preprocessor a standard initial filter for each patient variable: 'send a newly sensed value only when  a  it differs by at least p% from the previously sent value; or  b  at least m minutes have elapsed since the last value was sent.' guardian begins classifying the filtered patient data as they arrive and organizing them in temporal episodes of known value categories. during the first few minutes  guardian adjusts filters for individual variables to approximate the maximum data rate it can handle in real time without overflowing its input buffers. guardian also requests an initial analysis of blood gases from the laboratory simulation. it decides to inspect the lab results when they return in approximately 1 minutes. during the remainder of this time period  guardian interprets input data. all twenty variables remain normal  except for the patient's temperature  which is low. because this is not critical  guardian ignores it. 
1 	reactive response 
at 1 when the requested lab result returns  guardian classifies it as mow pac1-hypocapnia.' although both associative and model-based response modes are possible  guardian chooses the associative mode by default. it diagnoses 'hyperventilation' as the most likely cause of the observed hypocapnia and determines that 'decrease the breathing rate to 1' is the most appropriate action. guardian advises sicu staff to take that action and decides to request another lab test in twenty minutes to confirm the effect of its action. it continues to interpret input data. 
　at 1 guardian requests another lab test and decides to evaluate it-expecting a normal result when it returns. it continues to interpret input data. 
　at 1 the lab test returns and guardian confirms the expected normal pac1 - it decides to request another lab test and to evaluate the result when it returns. it continues to interpret input data. 
　at 1 when the lab test returns  guardian classifies it as 'high pac1~hypercapnia.' responding associatively  it diagnoses 'hypoventilation' as the most likely cause and determines that 'increase the breathing rate to 1' is the most appropriate action. it advises sicu personnel to take that action and continues to interpret input data. 
1 	model-based reasoning 
at 1  given the patient's two successive pac1 problems  guardian decides to analyze the causal mechanism underlying these problems more carefully. because its knowledge of model-based reasoning methods specifies high computational requirements  guardian conserves resources by adopting stronger perceptual filters: 'send sensed values only when  a  they differ from previously sent values by at least twice the current change threshold; or  b  at least twice the current allowed time interval has elapsed since the last value was sent.' as a consequence  guardian continues to interpret new input data  but spends less of its computational resources doing so. in a distributed implementation  guardian could assign its model-based reasoning task to a remote processor. however  any system having limited computational resources will encounter situations in which it has a reduced capability for reasoning about new inputs and  therefore  should adopt different perceptual filters. 
　guardian uses its domain knowledge and firstprinciples knowledge to construct models of alternative hypothetical faults that could cause the observed problems. among its several hypotheses are these two. 'hypothesis a: decreased pac1 is caused by high breathing rate. decreased partial pressure of c1 in the arteries is caused by decreased partial pressure of c1 in the pulmonary exchange system  which is caused by decreased amount of c1 in the respiratory system  which is caused by increased delivery of other gases from the ventilator  which is caused by high breathing rate set at the ventilator.' 'hypothesis b: decreased pac1 is caused by low temperature. decreased partial pressure of c1 in the arteries is caused by decreased delivery of c1 from the tissue exchange system  which is caused by decreased delivery of c1 from the tissue metabolism system  which is caused by decreased production of c1 by the tissue metabolism system  which is caused by decreased consumption of 1 by the tissue metabolism system  which is caused by low temperature.' 
　guardian distinguishes these two hypotheses from others it constructs for different reasons. hypothesis a provides a causal rationale for guardian's reactive diagnosis  'hyperventilation ' and corrective action  'lower the breating rate to 1.' hypothesis b identifies a previously observed  and ignored  problem  'low temperature ' as a causal factor in hypocapnia. 
　guardian constructs and distinguishes the corresponding two hypotheses to explain the patient's subsequent hypercapnia. 'hypothesis c: increased pac1 is caused 
hayes-roth  washington  hewett  hewett and seiver 	1 

by low breathing rate.' 'hypothesis d: increased pac1 is caused by high temperature.' 
　now guardian observes that the patient's temperature was lower at 1  when the blood sample showing hypocapnia was taken  than it was at 1  when the blood sample showing normal paco 1 was taken  and lower then than it was at 1  when the blood sample showing hypercapnia was taken . given these observations  guardian should build a more encompassing model relating the patient's temperature  its own settings of breathing rate  and the resulting variations in arterial co 1 throughout the monitoring period. given its knowledge that the patient's temperature will return to normal  guardian should predict that its recent increase in the breathing rate will eliminate the patient's present hypercapnia only temporarily. indeed  guardian should have predicted that its original lowering of the patient's breathing rate would eliminate the patient's original hypocapnia only temporarily  leading eventually to the present hypercapnia.  note: we are now implementing this prediction skill.  
1 	planned response 
although guardian could eventually stabilize the patient's arterial co 1 at a normal level with a normal breathing rate and temperature by continuing to respond associatively  the resulting alternation of normal paco 1 and hypercapnia episodes would be a suboptimal route to that goal. instead  guardian should plan to coordinate changes in breathing rate with changes in temperature  so as to maintain a normal paco 1 throughout: 'increase breathing rate by 1 percent for every 1 degree increase in temperature  expected to occur every half hour.' having done so  it should follow this plan  reinstate its original perceptual filters  and resume its original rate of interpreting input data. it should interleave planned operations to confirm expected increases in temperature and make associated increases in breathing rate.  note: we are now implementing this planning 
skill.  
1 generality 
to maximize the generality  extensibility  and reusability of the proposed architecture  we designed it in layers. the system organization and reasoning architecture are application independent. the reasoning skills  first principles  and domain knowledge apply to successively narrower classes of applications. by modifying their contents  we can extend a given application or develop a new one. for example  we are extending guardian's expertise incrementally at all three levels. with its original reasoning skills  data classification  associative diagnosis  and model-based diagnosis   first-principles knowledge  generic flow systems   and domain knowledge  the respiratory system   guardian classified respiratory data and performed associative and model-based diagnosis of certain respiratory problems. with new knowledge of the circulatory system  guardian handled similar problems in the circulatory system. given a new reasoning skill for model-based explanation  guardian explained the causal mechanisms underlying diagnosed problems in 
1 	real-time and high performance 
both systems. with addititional reasoning skills  reactive response   first-principles knowledge  diffusion and metabolic systems   and domain knowledge  the tissue exchange and metabolic systems   the current version of guardian handles a range of problems arising within each system or from interactions among systems. by replacing guardian's knowledge at particular levels  we could create new monitoring systems. for example  a power plant monitor might combine guardian's reasoning skills and generic flow models with new knowledge of the structure and function of power plants. similarly  a materials processing monitor might incorporate guardian's reasoning skills with new generic models for heating  cooling  and compaction processes and new domain knowledge of particular materials processes. 
1 limitations 
in addition to obvious limitations on the amount of knowledge currently implemented  the proposed architecture has  at least  two more fundamental limitations. 
　first  like all ai techniques  the proposed architecture must pass the test of scalability. there are many relevant scaling factors  including: number of data variables  sensed data rates  number of alternative diagnoses  number of co-occurring and interacting problems  complexity of physical models  and number and complexity of alternative responses. we need to investigate how a system's performance degrades as we increase its complexity along these dimensions. 
　second  intelligent monitoring and control is a realtime task  imposing hard and soft time constraints on the utility of observations  conclusions  and responses. the proposed architecture includes features designed to give a monitoring system knowledge-based control over its resource allocations in order to address real-time constraints. these features are its programmable perceptual preprocessors and action drivers and its dynamic control of reasoning behavior. however  we have not yet provided an explicit representation of time or a quantitative basis for making time-constrained resource allocations. in addition  the bb1 execution cycle involves unbounded computation times  which can undermine even the most  intelligent  resource allocation behavior. we are attempting to address both of these limitations in ongoing research. 
