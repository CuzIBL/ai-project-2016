 
　　we report here on a significant new set of capabilities that we have incorporated into our language generation system mumble. their impact will be to greatly simplify the work of any text planner that uses mumble as ita linguistics component since mumble can now take on many of the planner's text organization and decision-making problems with markedly less hand-tailoring of algorithms in either component. briefly these new capabilies are the following: 
 a  attachment. a new processing stage within mumble that allows us to readily implement the conventions that go into defining a text's intended prose style  e.g. whether the text should have complex sentences or simple ones  compounds or embedding*  reduced or full relative clauses  etc. stylistic conventions are given as independently stated rules that can be changed according to the situation. 
 b  realization classes are a mechanism for organizing both the transformational and lexical choices for linguistically realizing a conceptual object. the mechanism highlights the intentional criteria which control selection decisions. these criteria effectively constitute an ''inteiiingua'' between planner and linguistic component  describing the rhetorical uses to which a text choice can be put while allowing its lingustic details to be encapsulated. 
　　the first part of our paper  sections 1 and 1  describes our general approach to generation; the rest illustrates the new capabilities through examples from the umass counselor project. this project is a large new effort to develop a natural language discourse system based on the hypo system  rissland & ashley 1   which acts as a legal advisor suggesting relevant dimensions and case references for arguing hypothetical legal cases in trade-secret law. at various relevant points we briefly contrast our work with that of appelt  danlois  gabriel  jacobs  mann and mattheissen  and mckeown and derr. 
1. major components of the generation process 
　　as nearly everyone who has worked on generation from an ai perspective will agree  it is the character of the decision-making involved  and not any a priori division by linguistic level  that dictates how the process divides into components. decision-making varies in at least the three dimensions listed below  with the clustering patterns of groups of decisions along these dimensions deterining what different components there should be. 
o what information does the decision draw on: properties of lexical items  conceptual attributes  details of planned rhetorical structures  details of surface structures  
o what is the decision dependent on: what other generation decisions  if made differently  would force a change in this decision  if the generation process is to be indelible  i.e. never retracting its decisions  then this dependency structure will have to be respected. 
o how should the decision's conclusions be represented: does a conclusion dictate linguistic actions or just constrain other decisions  can it be acted on immediately or must it be scheduled for later  
　　on the basis of such considerations  we have determined that generation as a whole involves three different kinds of activities: two that are dominated by conceptual  typically domain-specific  criteria and decisions  and one that is dominated by linguistic criteria and has a correspondingly wider applicability. these three activities are: 
1. determining what goals to  attempt to  accomplish with the utterance; 
1. deciding what information the utterance should convey and what rhetorical force it should have in order to satisfy those goals; 
1. realizing those conceptual  specifications'' as a 
grammatical text that is cohesive with the discourse that precedes it. 
　　we see these activities as intermingled and ongoing throughout the duration of a text's generation. goals are only partially formulated when one starts speaking  and may even emerge opportunistically as the linguistic structure of the text is incrementally planned and produced. we presume that in people these activities are carried out in parallel  though in our discourse system for the counselor project they are treated as strictly gated co-routines. 

　　it is the last of these activities  the linguistically most demanding  that is our concern in this paper this aspect of our research has two goals  one pragmatic  the other scientific first  for researcher* who need capable natural language interfaces  we have developed a versatile linguistic component   1c    implemented as the zetalisp program mumble  that can be interfaced to domain specific systems  where it handles all of the linguistic considerations that occur during generation the domain specific system supplies a specification of what it wants said  couched in its own internal representation  and is then realized by our lc as a grammatical text 
　　our second goal is to project from the computational architecture of our lc to hypotheses about the actual generation process in human beings. to this end we have disciplined ourselves in the design of the computer program to employ only devices with specific  very narrow capacities. this influences our choice of linguistic analyses  in that only a few of the analyses that one could imagine  and appear in the literature  are plausible in our generator  allowing us to develop linguistic and psycholinguistic hypotheses that are predictive and falsifiable. we will not discuss this aspect of our research in this paper  some of our earlier conclusions arc described in  mcdonald 1  
1. our approach to generation 
　　in this section we describe our approach in general terms and outline the separate components of our system; detailed examples will be given in the section following. 
1 goal -directed generation 
　　in our view  research on the production of text is most revealing when it considers how the text advances the goals of a speaker. a generation program should produce texts for an audience that is situated in a concrete discourse context working from a particular plan of information to be communicated with specific rhetorical goals furthermore  we believe  and it is here that we part company with researchers such as mann and matthiessen   whose aims we otherwise share  that the demands placed on an lc by the need to work efficiently from a plan have overriding implications for the lc s architecture this can require it to take a form very different from what is developed when working on the form/function relationship in isolation generation programs like mann and matthiessen s nigel that have so far been used only to produced well-formed texts in isolation from computationally represented situations or speakers' goals may tell us a great deal about the structure of grammars and linguistic competence  but it does not follow that they are therefore models of the generation process 
　　in accordance with this methodology  our lc has always been developed in the context of one or more underlying programs which have been responsible for dictating the communicative goals. each program has included a text planning system  of varying  sometimes trivial  sophistication  for example the program genaro developed by jeff conklin  and the programs listed in  mcdonald 1 .  the text planners react to their associated programs' communicative goals and construct a conceptual level  plan''-a non-linguistic specification of what it wants said-which is given to the lc as its input. 
　　although we arc presently working with text planners that we are designing ourselves  we expect that the place we have picked for the division between planning what to say and determining how to say it is a natural one; consequently our linguistic component should be able to be used to advantage with text planners of very different internal design than the ones we happen to have used. 
1 multiple levels in the linguistic component 
　　an ongoing trend in our research has been to introduce more and more levels within the generation processes between originating the goals and ultimately producing the text at the present time we employ three sucessive levels of processing within the lc: attachment  realization  and phrase structure execution. we will briefly define each of these levels later in this section and will expound on their functional organization and give illustrations of the structures they use in the second half of the paper 
　　at each processing level there is a shift in the vocabulary of the rules  the representations that are used  and the character of the reasoning that is brought to bear each level is narrowly restricted in the kind of information that it can draw on and the textual horizon it is able to work within each is a specialized activity within the  virtual machine  that we have developed for generation  and works according to its own computational principles and therefore with the high degree of efficiency that is possible through specialization of the mechanism to the task  provided  of course  that the  boundaries  between the levels are in fact well placed . decisions at each level are simpler than if the levels were folded together  since less linguistic detail is determined at a time. 
　　in this regard we disagree with appelt  1  1  about the benefits of maintaining a single computational paradigm throughout the generation process  in his case axiomatic planning : his point that all of the generation processes involve planning is very well taken  yet this need not imply a homogeneous design. indeed  one of the implications of homogeneity is that all information is equally available at any point in the process  which we do not believe is the case in generation by people or is of any advantage in machine systems. with our multi-level design we can specify quite exactly when a given kind of information becomes available  whether it is available  early  in some more abstract form  ie. before the representation that would normally carry that information has been instantiated   and when it later becomes inaccessible. 
　　it is crucial to understand that while we speak loosely of these different reasoning engines and representations as constituting  levels**  they are in fact not strictly ordered in the process as a whole. all of them are active simultamously  including the planner that supplies their input; they operate as closely coordinated co-routines  

precisely synchronized to the  point of speech   passing information  in the form of progressively more refined specifications and eventually syntactic and lexical stuctures  from one to the other along a well defined path or 
 pipeline . 
setting goals and planning content. generation starts when the underlying program sets the goals of the utterance. in our own work this is done by the decisions of a  discourse controller  designed after woolf . the goals direct the actions of a conceptual or  information  level planner that makes decisions about what information to actually communicate  versus leave for the audience to infer   how to structure it as a text  and what rhetorical or discourse effects to achieve. the planner also occasionally selects key lexical items  anticipating and preempting later choices  when this allows the combination of basic information units into a more useful  package   e.g. merging an object's temporal beginning and ending fields by using the word  between   or using a term such as  get revenge  rather than simply stating the underlying events of a story  cook  lehnert  & mcdonald 1 .  figure 1 shows an example of a plan of the sort we are presently using. 
　　to the lc  the output of the text planner appears as a sequence of kernal information units  i.e. objects from the internal conceptual representation of the underlying program  typically pointers to frames or relations extracted from them  see figures 1 and 1 . each unit is typically accompanied by a rhetorical annotation  put there by the text planner  which describes some perspective or emphasis that the unit's textual realization is to reflect. 
surface structure while there are four processes in our model of generation  planning  attachment  realization  and phrase structure execution   there are only two reference structures: the plan  and surface structure. this second representational level is the only linguistic level we support; its representational vocabulary is abstract and for the most part syntactic and phrasal. it corresponds to the level in generative grammars that is the input to the phonological component and incorporates many of the devices of modern linguistic theory such as  traces  and x-bar categories. 
the surface structure is the core of our lc's design 
it defines the action sequence  program  carried out by 
phrase structure execution  absorbs the output  in sucessive chunks  of realization  and is the target of attachment. the fact that a linguistically motivated description of an utterance in progress can take on such a controlling  coordinating role in the generation process is to us too striking to be a fortuitous accident of our skills as computer programmers  rather it reflects something crucial about the nature of the generation process operating in people. space does not permit a proper technical description of our surface structure or of pse; interested readers should see  mcdonald 1 . 
the attachment process the first thing that must happen to the units in the plan is for them to be assigned   attached   to positions within the surface structure. this extends the surface structure by instantiating one of the  attachment points  that have been assigned to it according to the grammatical structure it currently has  e.g. next-sentence  additional-adjective embedded-discourse-unit etc. . 
　　the process does not attach all of the units in a plan at once; instead attachment is interleaved with phrase structure execution so that most earlier units will have been realized and their text spoken before the last one is positioned. to judge where to attach a unit  the process considers first the syntactic form of the various text choices that could be made in realizing the unit  filtering out any that are incompatible with the available attachment points  e.g. one cannot position an adjective to serve the syntactic function of a new sentence . it then employs a set of rules to order the remaining points according to the designated prose style. 
the realization process once a unit has been positioned within the surface structure  the next thing that happens to it is the selection of a text that will adequately  realize  its information content. this requires sensitivity to its functional role within the knowledge base and the plan  eg topic versus instrument   to the desired perspective  and to the grammatical constraints composed by the surface structure at that position. 
　　the association of objects  or object types  from the underlying system's knowledge base with the texts that could be used to realize them is made by assigning them to predefined  realization classes . realization classes are highly parameterized and annotated lists of  choices  where each choice defines a possible syntactic structure and wording. each choice is annotated by a set of 
 characteristics  which summarize the linguistic nature of the choice and the functional uses to which it may be put the characteristics can also be viewed as predicates against the current state of the surface structure and plan and thus provide the backbone of the decision procedure that makes the realization choices linguistically  the pattern of choices in a realization class most strongly resembles the 
 transformation families  of harris  1  1  
　　choices are defined in terms of a schematically described phrase structure plus a  mapping  that takes the parameters of the choice into positions in the phrase. this parameterization reflects the compositionality of the units in the plan: most units can be viewed as relations over other units; a typical realization is then the selection of a verb to realize the relation with the argument units mapped into the verb't thematic roles 
phrase structure execution the phrase structure defined by a choice consists of a labeled tree of constituents with english words and some units as its leaves. the depth-first traversal of this tree defines a path that will enumerate the words and embedded units  which will then be realized and replaced by a phrase  in their natural left to right order as a text 
     using this path as its controlling representation  phrase structure execution   pse   carries the whole lc forward: 
words at the leaves of the surface structure are morphologically specialized and spoken as soon as they are reached when embedded units are reached they are passed to the realization process; the sub-tree selected and instantiated by that process is then passed back to pse and incorporated at the position of the unit  replacing the unit and thereby defining an extension of the traversal path. when a potential attachment point is reached the 
attachment process is awakened to determine whether it wishes to use that point for positioning the next unit in the plan 
1. some examples 
　　consider the text below  which our lc generates from the plan in figure 1  as fleshed out by later subplanning . this text was originally produced by a human lawyer as the initial description of the legal case on which he was seeking advice  our research goal has been to reproduce it  and the rest of the dialogue it was part of-work which is not yet complete  in a generalizable way as a precursor to having the full counselor system eventually plan other such texts on its own 
by the keyword : perspective  . the specification of perspective is crucial because of the potentially enormous range of realizations most of the frames in this domain may have  eg a  neutral  perspective on this legal-case should probably be realized as something like  rcavictim is the plaintiff and swipeinc and leroy soleil are the defendants  . 

1 	incremental planning 
     the text planning process has two problems:  1  to decide what information and rhetorical organization will best render the communicative intent of the underlying system  and  1  to bridge the gap between the way information is organized in that system's knowledge base and whar. is possible in the natural language being used  i.e. what are the words and grammatical constructions of the language . 
	counselor 	as 
of 
     our planner  a program we are calling  cicero   is presently quite limited. it is organized as a set of specialists with names like describe-legal-case   describe-a-party-to-a-case  describe-corporate-party  a specialization of describe-a-party-to-a-case  and so on. the procedure used now is a simple contextual discrimination between alternative  precompiled  scripts   which are then instantiated and passed to the lc in the form shown 

before in figure 1. that plan is the standard one for unmarked descriptions of cases except for the addition of the first unit  indicating the relation of the speaker to the case   which was included because the utterance is the first one in the conversation and that relation cannot yet be deduced from context. we recognize that this use of scripts is quite limiting  and are in the midst of developing more versatile techniques. 
　　one key part of cicero's design which we expect to retain  however  is the fact that it operates incrementally. it would be neither psychologically plausible nor computationally economical to have a planner make all of the decisions about the information in an utterance  especially a long one  in  one pass**  and then completely relinquish control to the lc until it was time to plan the next utterance. instead  planning should proceed incrementally  leaving the details of references or elaborations as conceptual  stubs  in the larger plan to be worked out in detail later once that plan has been partially realized and a linguistic characterization of that position of the stub becomes available. a recursive invocation of cicero then uses that characterization  as well as the stub s position in the original plan  to aid it in deciding what information and perspectives to use. the resulting  subplan  is then passed back to the lc which continues where it left off. 
　　so for example the plan in figure 1 was constructed by describe-legal-case. this specialist knows to mention the party  # cooperate~parth rcavictim   that the lawyer is representing  but does not itself know how to describe that party  leaving that decision to be made later by 
describe-corporate-party once pse reaches the its position in the surface structure. 
1 attachment and prose style 
　　the attachment process is a transducer from the stream of annotated units in the plan to assignments of active  attachment points'' within the surface structure. these assignments modify the surface structure at the time they are made  in effect  splicing in'' additional phrase structure to accomodate the new unit. what points are active at any moment is determined by the details of the surface structure already in place and the position of the pse process. deliberations over which attachment points to select are mediated by preferences which are characterized in terms of  stylistic rules'' 
　　at the beginning of an utterance  there is only one attachment point active  namely first-sentence. the first unit of the plan will be positioned here  and then almost immediately will be reached by pse and passed to 
realization. realization will select a phrase for it  in this case a clause   and then knit the phrase into the surface structure in place of the unit. 

d. mcdonald and j pustejovsky 1 
 the actual representation of surface structure is considerably more elaborate than this simplified presentation suggests.  once this replacement occurs new attachment points are made active  as dictated by the form of the clause. these include new-sentence  various conjunctions such as reduced-on-common-subject and 
reduced-on-common-predicate  and especially various syntactic extensions to the final np such as additional adjectives  postnominal phases  or quantifiers which would refine the characterization of rca victim  as well as non-restrictive attachments relating some of its attributes or activities. what attachments are allowed is a function of the syntactic configuration of the surface structure ahead of the point of speech; the relevant criteria are discussed in  mcdonald & pustejovsky 1b . 
　　with the realization of the first unit  the attachment possibilities for the second can be considered. these are narrowed by ignoring all possibilities that demand a syntactic realization for a unit at their position that is not found in the second unit's realization class  which in the present case are essentially just variations on clauses involving the verb  sue'' . at present this leaves only three points still in the running. 
new-sentence: ''i represent a client named rcavictim. they want to sue swipelnc and leroy soleil.  
simple-conjunction: *y represent a client named rcavictim  and they want to sue swipelnc and leroy soleil.  
non-restjrictive-relauvckaaining-off-final-np: ''i represent a client named rcavictim  who wants to sue swipelnc and 
leroy soleil'' 
figure 1 variations due to alternative attachment 
　　we contend that the decision between these three is a matter only of the prose style one prefers: long sentences or short  simple syntax or complex. lawyers have very definite preferences in their prose style which we can capture as a set of  ordering rules . these rules of prose style are used to order the alternatives  each rule accompanied by a predicate characterizing the linguistic contexts in which it applies. our algorithms for this process are described in  mcdonald & pustejovsky 1a . 


is # speaker  
 vp represent 
	  inp 	# corp-party rcavtetlm    
 s # toga case ...    j     
　　the standard technique for combining a sequence of conceptual units into a text has been  direct repfacemec!**  see discussion in  mann et al 1d  in which the sequential organization of the text is identical to that of the message because the message is used directly as a template. our use of attachment dramatically improves on this technique by relieving the message planner of any need to know how to organize a surface structure  letting it rely instead on explicitly stated stylistic criteria operating after the planning is completed 
　　den and mckeown  also improve on direct replacement's one-proposition-for-one-sentencc forced style by permitting the combination of individual information units  of comparable complexity to our own  into compound sentences interspersed with rhetorical connectives. they were  however  limited to extending sentences only at their ends  while our attachment process can add units at any grammatically licit position ahead of the point of speech. furthermore they do not yet express combination criteria as explicit  separable rules. 
　　dick gabriel's program yh  produced polished written texts through the use of critics and repeated editing it maintained a very similar model to our own of how a text's structure can be elaborated  and produced texts of quite high fluency we differ from gabriel in trying to achieve fluency in a single online pass in the manner of a person talking off the top of his head; this requires us to put much more of the responsibility for fluency in the pre-linguistic text planner  which is undoubtedly subject to limitations. 
1 	realization classes 
　　we have said that language generation is a problem of how to organize decision making: first of what information to convey  done incrementally within the text planner   then of how to textually capture the relation of the units in a plan to each other  done by the attachment process   and finally of how to express- realize -the information in a conceptual unit  which is the task of realization. 
　　realization is the selection of one of a predefined set of alternative text specifications   choices   subject to grammatical constraints according to the position within the surface structure at which the realization occurs. the predefined choices are organized into  realization classes'' such as shown in figure 1. at the time this is written  these classes either organize alternative wordings  as in the concept-specific class or when wording has been determined  organize the structural  e.g. transformational  alternatives that the language permits  as in transitive-latinate-verbs 
　　the selection decision is based on the  characteristics  that accompany each choice  e.g. in-focus arg   expresses-result verb  . these symbols have attached procedures which test for prerequisites  and also may be 

tested for presence or absence by the grammatical constraints. much of our ongoing research involves determining what reasonable characteristics are and what predicates they should be allowed to use; this will dictate the amount and character of the linguistic knowledge we allow our text planner to have  since all further information about a candiate text  for example the information used by pse and morphology  is encapsulated in the choice. 
　　it is appropriate at times to think of the choices in a realization class as items in a  phrasal lexicon   becker 1   i.e. as productive  frozen turns of phrase that we use not because of their compositional  literal meaning  but because they are a conventional phrase rather like an idiom our mechanism of associating conceptual units directly with choices  rather than mediating the concepts-text relationship with sets of abstract features  as for example done by matthiessen   permits us to capture these conventional relationships easily  while noting those abstract relations that we do understand by labeling the choices with characteristics. 
　　linguistically  our choices are more versatile than the phrasal entries in use at berkeley where phrasal lexicons are a common part of language processing programs  e.g.  jacobs 1 . ours are transparent to the addition of other modifying or elaborating concepts within the phrase because of the thoroughness of the linguistic specification given with a choice and the use of the attachment process. 

as one of the two loci of decision-making within the 
lc  the other being attachment   we think of the process of realization as simultaneously drawing on knowledge from syntactic  semantic  and pragmatic levels  which  as we stated at the very beginning of this paper is a natural property of the generation process. in this we agree with danlois   and see a familial resemblance between our realization classes and the sets of cross-level alternatives she describes. we do  however  believe that a greater a priori ordering among decision classes is possible than danlois would permit. in particular it appears to us as more than just programmer's convenience is involved in our design decision to reduce the combinatoric complexity of realization classes by having the localization decisions for phrasal heads made before alternative arrangements of thematic arguments are considered; we suspect that danlois' motivation for her 'flatter*' design  i.e. more classes of alternatives combined into a single decision  stems from the fact that she works from an underlying representation  conceptual dependency  that is less differentiated and more expression-based than ours. 
1. conclusions and future research 
　　our generation design now uses a significantly richer computational architecture than it has in the past; in particular  we have introduced the notions of an attachment process and realization classes  both operating within a description-directed control structure coordinated by the 
phrase structure execution process. this has allowed us to produce a greater variety of texts with an intuitively more satisfying modularity in design  that is  the effects of stylistic rules  attachment points and realization classes are limited and well-defined . 
　　our experience with this new architecture is still small  and our designs continue to evolve  especially as we now begin to work out a control structure for text planning that is not script based and to develop an executable statement of the compentence grammar that underlies the linguistic knowledge in the realization classes and pse. we do expect though  that the major outlines of what we have described will remain the same at least over the next several years a robust  well documented version of the system is under development for general release in the fall of 1; preliminary versions are available now to people doing research on generation. 
1. acknowledgments 
　　funding for this research has been provided by darpa under order number n1-k-1  by nsf grant 1st 1 and atari corporation. we would like to thank kevin gallagher and marie vaughan for help in the preparation of the text. 
d. mcdonald and j. pustejovsky 1 
1. 