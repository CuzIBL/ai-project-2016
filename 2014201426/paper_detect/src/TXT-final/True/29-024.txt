 
proof presentation systems and  in some more general context  many natural language generation systems suffer from a crucial problem: they present too much information explicitly which the intended audience could more naturally infer from a less detailed text. moreover  proofs in mathematical textbooks make extensive use of building chains of inferences in specialized notations  which is not sufficiently taken into account by proof presentation systems. encouraged by these observations  we present a model for presenting mathematical proofs that  1  features the implicit conveyance of information through concise texts   1  organizes major lines in the proof presentation around focused chains of inferences in a specialized notation   1  can adapt its output to some of the capabilities of its audience. the methods described in this paper allow us to present proofs of moderately complex size in a quality approaching that of proofs found in mathematical textbooks. 
1 introduction 
proof presentation systems and  more generally  many natural language generation systems suffer from a crucial problem: they present too much information explicitly which the intended audience could more naturally infer from a less detailed text. in contrast  mathematical proofs as typically found in textbooks express lines of reasoning in a rather condensed form by leaving out several elementary  but logically necessary inference steps. moreover  the proofs emphasize conciseness by making extensive use of building chains of inferences in specialized notations  such as series of inequations. however  when presenting a mathematical proof to less trained people  those parts which require increased experience to be understood should be expressed in closer detail. 
　motivated by these observations  we have developed a model in which we try to mimic the properties of mathematical textbook proofs to a significant extent. our model also supports more verbose presentations to meet the needs of formally less trained addressees. it 
1. features the implicit conveyance of information through concise texts  
1. organizes major lines in the proof presentation around focused chains of inferences in a specialized notation  
1. can adapt its output to some of the capabilities of its audience. 
　the paper is organized as follows: after discussing the role of inferences in the larger context of natural language generation  we briefly describe how the results obtained by a theorem prover are prepared for presentation. then we introduce our inference model which is particularly dedicated to understanding mathematical proofs  and further motivate and describe our user model. finally  we illustrate our results by an example. 
1 dealing with inferences in generation 
in the larger context of natural language generation the role of inferences in texts differs significantly across genres. it has not been without reason that the description of database schemata was chosen as the application domain for the first natural language generation system to produce paragraph-length text rather than just sentences  mckeown  1 . texts in this genre are characterized by skillfully ordered facts  each of them providing some new piece of information  with inferences across individual facts being nearly absent. explanatory texts  on the contrary  are likely to include boring redundancies  when the addressees' inferential capabilities are neglected  such as in  moore and paris  1 . 
　only in some more recent approaches  inferences are modelled explicitly  lascarides and oberlander  1; green and carberry  1; zukerman and mcconachy  1; horacek  1 . these methods  however  are only of limited use for  automatically generated  mathematical proofs.  lascarides and oberlander  1   like sev-
	fehrer & horacek 	1 
era! others  address the derivation of implicitly entailed discourse relations  rather than the contextual infer ability of entire propositions  as we do.  green and carberry  1  focus on inferences that deal with advanced concepts like enablement in everyday situations  which are beyond the kinds of proofs we have investigated.  zukerman and mcconachy  1  pertain to handling descriptions rather than argumentation  and the inferential structure used operates on a less uniform level. only  horacek  1  deals with similar sorts of inferences as we consider here. however  the hypothetical reasoning about sets and preferences aimed at in that work would be an overshot for our enterprise. therefore  we build a simplified inference model  based on these concepts. 
　moreover  the presentation of proofs is oriented on crucial properties of the domain of mathematics: 
1. the conceptual information to be presented  i.e. the mathematical proofs  are based on a formal calculus that is well established and extremely detailed. 
1. there exist established domain specific presentation techniques that are applied whenever reasonably possible  for instance  chains of equations . the resulting text structure deviates in some aspects from the familiar notion of coherence. 
1. the domain concepts used in mathematical proofs are also established and precisely defined as opposed to many other scientific and everyday domains. 
   the first two properties widely determine the way how the proof presentation is organized  and the third one influences the incorporated inference model. taken together  these properties significantly facilitate the control over the inference process in our domain  because of the precise and commonly accepted terminology. in order to generalize our inference model to real world domains  concepts for dealing with vague terminology and default expectations need to be added. 
1 preparing a proof for presentation 
the tasks of organizing the presentation of a proof are realized within the mathematical assistant omega  benzmiiller et a/.  1   an interactive environment for proof development. within mega  automated prover components such as o t t e r  mccune  1  can be called on problems considered as manageable by a machine. the result is a proof tree which needs to be fundamentally reorganized prior to verbalization  which requires two tasks to be accomplished: 
  an appropriate level of granularity must be selected on which elements of the proof are communicated. 
  a backbone structure must be imposed on the line of proof which is oriented at domain specific techniques  such as building series of inequations  with auxiliary information added appropriately. 
　the first task addresses a central issue in generating natural language texts  which is to put domain concepts intended to be communicated to humans in a form that suits the structures and concepts underlying natural language  to narrow the  generation gap   meteer  1 . domain property 1  as introduced in the previous section  allows one to accomplish this task for mathematical proofs in a principled and uniform way. 
　the second task imposes a particular sort of structure on the elements of a proof to be presented. mathematical proofs frequently emphasize chains of inferences  as in  lemma x. proposition1 -  --  propositionn   where lemma x is an additional justification for one of the propositions  cf. domain property 1  as introduced in the previous section . in ordinary texts  breaking the implication chain for explicitly stating the lemma at the precise location where it is referred to is often preferred. in some sense  techniques for presenting mathematical proofs blur the scope of lemmata. 
　note  that this procedure of organizing a proof's presentation is in some contrast to established ways of text planning. usually  a coherent text structure tree is composed from some sort of weakly structured data  whereas in our case the original tree structure of the proof is reorganized into some condensed but less explicitly interconnected chunks. 
　an appropriate level of granularity is selected by condensing groups of inference steps to yield proofs built from  macro-steps 1. this is called the assertion level and dealt with in detail in  huang  1 . the realization is part of the proverb system  huang and fiedler  1; 1 . a typical example of an assertion level step is e.g. the application of a lemma. 
　once an appropriate level of granularity is chosen  the modified tree needs to be reorganized by building a backbone structure. the fact that proofs containing equations can be more naturally expressed by chains of equations rather than trees  has already been noted by e.g.  lingenfelder and pracklein  1; denzinger and schulz  1 . however  these approaches are constrained to purely equational proofs. we have shown that this can be generalized to inequations  for the crucial property of the respective  binary  relation is transitivity  which holds as well for inequality  fehrer and horacek  1 . in the case of equations  one can pursue the strategy of directly appending the two subproofs because of the transitivity of equality. given proofs of r = s and s = t one thus immediately gets a proof of r = t. this is called  flattening  in  denzinger and schulz  1 . the same 
     1 this is motivated by rules of the natural deduction calculus  gentzen  1 . 

1 	natural-language processing and graphical presentation 

holds for other transitive binary relations  such as inequalities. the necessary reordering can be performed purely automatically  as shown in  fehrer and horacek  1 . 
　after this structural reorganization is completed  decisions have to be made how the resulting intermediate representation should best be presented to the addressee  cf. next section . finally  proverb  huang and fiedler  1  produces appropriate surface forms. 
1 the inference model 
presenting a proof adequately requires an inference model that takes care of at least the following issues: 
  determining trivial  that is  easily inferable  parts of the proof. these should be left implicit in the presentation  because the addressee can be assumed to be able to recover the associated content from the material presented explicitly. this issue aims at reducing the length of a proof presentation. 
  determining key parts which encapsulate the main proof concept. these parts should be highlighted in the presentation in order to guide the attention of the addressee. 
　both issues generally aim at discharging the addressee in the comprehension task by taking his inferential capabilities and the associated limitations into account. in accordance with the model presented in  horacek  1   we concentrate our efforts on determining and leaving out easily inferable proof parts in the presentation  which by itself should lead to a significant improvement in comparison to prior approaches. 
　the crucial question is  what is it that qualifies a  sequence of  step s  as considered trivial  logically  given a calculus and a genuine theorem  every proof step is trivial  in the sense that the theorem is entailed by the premises and therefore is inferable in the  complete  calculus. however  the fact that the reader's inferences are subject to limited resources  actually changes the calculus in which his deductions are carried out. the resulting calculus is in general weaker than the one with unrestricted resources1  thus becoming incomplete. therefore  a distinction between trivial and non-trivial inference steps can not be based on the logical calculus alone; it must be grounded on the addressee's acquaintance with the following sorts of concepts: 
1. domain knowledge  which consists of signature  terminology   definitions  axioms  and lemmata. 
1. the mechanism underlying an inference step  which is given by the  abstract  calculus. 
     1  we do not treat here the possibility that it could as well be stronger  because resource limitations may cause incorrect inference steps to be applied. 
1. the complexity of an inference step  which is measured in terms of the numbers of premises used and of the number of intermediate steps needed to refer the inference step's conclusion back to known premises  basic axioms or communicated facts . 
note that these concepts  particularly the second and third one  become meaningful in the context of a precise calculus with well defined domain concepts. in order to be credited with the ability to perform a certain inference step  the addressee of a proof presented in partial explicitness must be assumed to be 
1. acquainted with the pieces of domain knowledge involved in that inference step  
1. capable of mentally applying the mechanism underlying an inference step in principle  without the need to  guess  an appropriate instantiation of a theorem or axiom  
1. able to effectively perform the inference at hand with reasonable effort  unlike the other two criteria  this feature must be assessed in quantitative terms . 
　the domain knowledge comprises concepts that are particular to more or less specialized mathematical  sub theories such as group theory  as well as concepts that are valid over a significantly large set of varying theories  such as the laws of associativity  commutativity etc. 
　as far as the mechanism underlying an inference step is concerned  we consider a variety of special and in some sense simpler forms of substitution: 1. generalizations of concepts 

	fehrer & horacek 	1 


1. modus ponens 
the propositional variant without substitutions. 
　as far as the choice of appropriate instantiations is concerned  an interesting difference to the real world domain situations treated in  horacek  1  can be observed. in real world domains  a sole generic rule  such as  group leaders must be assigned to single rooms   is adequate as an explanation if the communicative context allows one to conclude which persons are meant to be group leaders  which is frequently the case1. in the context of proof presentation  however  an assertion like  apply the law of associativity  would at best be considered as a hint to construct a partial proof  but not as a proof presentation. because of that  chains of inequations cannot be shortened with confidence in a presentation  with application of the law of associativity as a special exception  this simply amounts to leaving out parentheses . 
　as far as assessing the effort associated with actually performing an inference step of some complexity is concerned  we believe that this assessment can only be done on an empirical basis; appropriate measurements can be obtained indirectly by examining proofs in text books with varying styles and intended readers. we have not done this systematically yet  but for the mathematical proofs we have considered so far  no limitation was apparent. typically  additional assumptions appeared between basic premises and the conclusion of a proof  so that chainable inferences were separated into chunks that are small enough  i.e. so that no further structure imposing processes need to be applied prior to presentation . for more complex proofs  we expect this criterion to become of significantly greater importance. 
　to facilitate different presentations of the same proof to a varying readership  each step in a sequence of inequations is annotated with a justification  which  corresponding to the user model at hand  can either be explicitly presented or left out. we could for instance say 
 f   g  without any further explanation  or as well  f   g  because of assumption x  or  ... because of lemma y 1. unlike for example specific premises  the reference to theorems as justifications can be made by the referential form  which is preferred for non-standard 
   1 this is one of the numerous default expectations typical of everyday domains. 
   1 if the assumed addressee is even less trained  the application of the transitivity axiom is mentioned explicitly. theorems and non-elementary substitutions  or in the generic form  which is preferred for standard theorems . either variant should be sufficient to convey the whole story  according to the model in  horacek  1 . 
1 the user model 
in order to select among presentation variants in a motivated way  we take into account a number of assumptions about the addressee  which reflect the categories introduced in the previous section. the assumptions in our user model are organized in a small set of stereotypes with increasing or complementary coverage  in accordance to mathematical subtheories. inheritance from general to more special stereotypes is applied  which works in an orthogonal and conflict free way  motivated by the domain properties of mathematics. the following sketches show some elementary stereotypes: apprentice knowledge: integers  ordering relations  ... 
     inferences: special forms of substitutions mathematical student 
knowledge: associativity  monotony  ... 
     inferences: general form of substitutions group theory specialist knowledge: group definition  unit element  ... 
　once we will move on to presenting more complex proofs  we intend to incorporate the complexity attributed to inference steps  too. these simple user models already give us the necessary distinctions to motivate the omission of trivial inference steps for the appropriate group  and to produce different presentations according to varying user expertise. we do  however  not attempt to infer  learn  the user's capabilities from his interaction with Ωmega. the intended user model is simply activated by choosing appropriate parameters. 
1 an illustrative example 
the example stems from a german textbook on analysis  liineburg  1 . it is taken from the introductory chapter that deals with the algebraic background  namely the theory of ordered fields. 


1 	natural-language processing and graphical presentation 



	fehrer & horacek 	1 

1 conclusion and further work 
we have described a model for the presentation of mathematical proofs which constitutes significant progress over previous approaches. condensed machinegenerated proofs are reorganized around focused chains of inferences  whose presentations can be adapted to the addressee's inferential capabilities. an exceptional feature is the inference model  which is not only based on the addressee's knowledge  but also on his inferential skill. the set of examples considered so far  including the introductory chapter from  llineburg  1   plus selected examples from  deussen  1   demonstrates that the quality of the resulting proof presentations is approaching that of moderately complex proofs found in mathematical textbooks. 
　major activities in the future concern the application and adaptation of our model to more complex proofs  in particular with regard to limitations in the complexity of inferences that the addressee can carry out. for the proofs considered so far  reorganizing a proof and eliminating inference steps considered trivial proved to be quite adequate to obtain a satisfactory result. for more complex proofs  we also expect a need to complement this  destructive  strategy by  constructive  ones  such as partitioning the presentation of a proof into meaningful portions  and putting emphasis on its key parts. for usage in real world domains  concepts for imprecise terminology and default expectations have to be added. 
