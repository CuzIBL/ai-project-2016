 
this paper provides a contribution to qualitative reasoning for continuous process supervision. tools for formalizing empirical knowledge of continuous processes and a naive reasoning naturally integrating perception are proposed. a new paradigm emerges : maintenance of a single instantaneous and possibly partial understanding of a physical system during its evolution. this understanding in closed loop includes prediction and truth maintenance of whole histories of evolution at the data sampling rate. this technique relies on both deep and empirical knowledge  using mainly intuitive notions like order of magnitude of non-negligible quantity  gain  delay and duration. our approach is compared to existing work in qualitative physics basically focused on qualitative calculus of classical physics formalization. 
	i 	introduction 
this paper addresses the problem of supervising complex continuous processes and presents a new qualitative approach  based on well-known principles of control theory. this approach can be compared to existing work in qualitative physics in the same sense as control theory can be compared to physics. the goal of control theory is to provide tools to control discrete and continuous processes. within this framework  the fundamental laws governing physical system behavior are not taken into account. roughly speaking  a control theory based model of a physical system has only to provide the ability to find out corrective actions when disturbances occur. but an important limitation of control theory is that only the well functioning process is modeled. thus severe disturbances or material faults can lead to unpredictible and dangerous evolutions. this is why skilled operators still supervise controlled continuous processes. our work is a first step towards computer aided supervision of continuous processes. this automated closed loop reasoning is mainly based on dynamic prediction. an operator must be able to predict how evolutions can propagate through the entire process. moreover  this prediction must be compared to the real evolution over time. non-significant differences must be integrated into already predicted histories  whereas deep contradictions must lead to corrective actions which may include diagnosis. 
1 	reasoning 
 an application in progress is helping operators to achieve supervision of an existing continuous process. but let us take a simple example from everyday life. cooking a sauce is a simple empirical process that can be handled without a complex physical model. the cook has empirically identified as essential some perceived parameters like gas flow and temperature. this description is sufficient to supervise the cooking process : 
  qualitative reasoning based on order of magni-tude of evolutions allows rough prediction. for example  the response time before sauce boiling can be evaluated at one time to five minutes from the given gas flow. if an electrical cooker is used  its thermal inertia must be taken into account. 
  such a simple approach would not be effective with-out continuous perception. first  the qualitative predictions result are approximate. the response time before boiling may be re-evaluated from sensor informations as cooking progresses. second  disturbances may occur. the cook may want to add water. this new influence on the sauce temperature must be integrated to the current prediction. 
¡¡¡¡section ii first underlines the limitations of existing work in qualitative physics for continuous process supervision. section iii emphasizes the importance of encoding empirical knowledge of continuous processes. relevant supervision variables  rsvs  are the basic objects of our representation. evolution constraints describe how evolutions propagate between variables over time. section iv presents a constraint propagation technique allowing a single and possibly partial future evolution of the controlled system to be inferred from an initial set of measured evolutions. 
	ii 	limitations of existing work 
most existing work in qualitative physics  qp  proceeds in the spirit of quantitative physics. qualitative calculus applied to classical physical laws permits a large range of physical behaviors to be explained and predicted. we argue that  as physical laws are not the basis of process models used for control  qualitative physics suffers from 

severe limitations for process supervision. these limitations can be summarized by the two following points : 
1. low level formalization. 
qp simulation techniques apply a qualitative calculus to physical variables. this calculus bases operations  plus  minus  derivation  etc  on truth tables  operand variables taking their values in  decreasing  steady  increasing . as qualitative cal-
culus is not powerful enough  for example y = z cannot be solved if x increases and y decreases   the real future behavior of a physical system usually cannot be predicted given initial conditions  as described by b. kuipers  kuipers 1 . only a hypothesis graph of behaviors can be obtained in the general case. better qualitative techniques  like j. de kleer's  qualitative reasoning with higher-order derivatives   dekleer and bobrow 1  or o. raiman's  order of magnitude reasoning   raiman 1  do not completely get rid of indeterminations. our problem is that continuous processes are complex physical systems. completely modeling a system such as a refinery may be tedious. moreover  a model using sophisticated mathematical tools may not be tractable by qualitative calculus. and last but not least  generating an hypothesis tree through a large model leads to a combinatorial 
1. envisioning is not synthetic enough for supervision. qp defines envisionment as the graph describing all possible behaviors given some initial conditions. but an envisionment may contain impossible behaviors  due to the formalization problems described above  this point is underlined by b. kuipers . as continuous processes are complex physical systems  we doubt the explanation capability of a system using envisionment. the latter would provide a huge quantity of behaviors including impossible solutions. on the opposite  the goal of computer aided supervision is to give operators a few relevant pieces of information. information overflow already is the primary cause of panic. furthermore  envisionment cannot enable preventive actions in general cases because operators would not know which behavior is to be avoided. 
these inadequacies follow from the difference of approach between physics and control theory. however  the need of including qualitative techniques in closed loops has recently been illustrated by k. d. forbus  forbus 1  and b. williams  williams 1 . 
	i i i 	modeling processes 
a. 	relevant supervision variables 
a skilled operator uses a simple mental model of the process. this model includes key parameters and production constraints. key parameters may be physical parameters like temperatures  pressures  etc  or actions like feedback control regulator set-points  valves  etc. production constraints are more elaborate concepts. they summarize relations to be maintained between key parameters in order to meet production quality standards. these supervision parameters and constraints are encoded in our model as elementary components  which we call relevant supervision variables  rsvs . rsvs are linked in a  causal  network. the semantics of an rsv is essentially captured in its relations with neighbour rsvs. in other words  an rsv x exists in a model only if it is relevant to the supervision of the entire process. an additional local semantics is provided by typing rsvs  in order to distinguish actions  feedback controlled variables  equilibrium variables  etc. note that such perceptive and interpretative background would be blurred in a description according to classical physics. let us come back to the sauce cooking example. a simple supervision model of this process could include the following rsvs: dga$  for gas flow  and vmizing which is a measure of how energetically the cook mixes the sauce  are actions; r auce stands for sauce temperature; characterizes a constraint to satisfy during the cooking to obtain a good sauce. 
   we assume  as a first approximation  that each sensing of the supervised process is a measurement of some supervision parameter. the corresponding rsv x takes its values in two spaces. one of them is the quantity space  qs  of qualitative physics  in the sense of b. kuipers  kuipers 1  . the other is a quantification of the continuous range of the parameter; the discretization step of which can be defined as the minimum amount of perceived evolution of x which allows deductions about the state of the process or its future evolutions. in the cooking example  tsauce can continuously evolve from 1¡ãc to 1¡ãc. a discretization step may be 1¡ã c  if it is the minimum perceived change allowing the cook to deduce a new evolution. and a qs for ttaue¡ì could be   liquid-phase  boiling-point  vapor-phase   the boiling point taking its value on the discretized scale. in our application to continuous process supervision  control during normal working consists in maintaining relevant physical parameters in a single qualitative state  centered around a nominal value. 
b. 	evolution constraints 
an evolution constraint from variable x to variable y is a representation of how an evolution of x can be propagated as a partial influence on y. it is composed of a qualita-
	caloud 	1 

tive transfer function  describing the nature of the relation linking x and y  and empirical data such as values of gain  delay  and response time. given a linear evolution of variable x  an evolution constraint infers a partial influence on variable y. 
1. 	background representation of time 
the formalism we use to represent temporal evolutions is based on numerically defined intervals. an elementary evolution is a linear evolution of an rsv over an interval. an evolution constraint infers a partial influence on an rsv y from an elementary evolution of a 
rsv x over an interval t. this partial influence is a set 
  of elementary evolutions of y over 
consecutive intervals jj. the important notion of delay is given by the difference between the beginnings of the intervals i and j1. moreover the duration of the propagated influence is equal to the duration of the elementary evolution  increased by the response time of the constraint. the response time is defined as the time required for the response to a step evolution to settle within a given percentage of the final value. 
1. 	qualitative transfer function 
a qualitative transfer function is a qualitative encoding of linear control theory models. using a limited number of simple parameters  including the times of beginning and ending  the initial and final values  it characterizes the matched evolution of x during the interval t. according to the nature of this evolution  a mixed quantitative/qualitative reasoning is performed. it makes use of the essential notion of gain  describing how orders of magnitude are propagated via the constraint. from the gain  the initial value and the slope of the considered evolution  descriptive tokens are deduced for the propagated influence. then  according to temporal informations  this evolution is detailed into a number of linear evolutions over intervals ji of s. 
   figure 1 gives an example of an evolution inference between the two variables and this is the 
case of the qualitative transfer function describing an increasing relationship. the matched evolution of dgas is a linear increase over an interval i. as the gain of the constraint is moderate  the order of magnitude of the influence on ttauce is the same as that of the evolution of dgat  influences can also be amplified or weakened; if the gain is exactly known  it may be numerically expressed . more precisely the influence is composed of four linear evolutions. the last two describe the cooling of the sauce. this is the damping of the initial condition given by the final value of the influence  the end of j1 in the example . no hypothesis of the future evolution of dgas is needed because only the effects over time of the elementary evo-

figure 1: an example of evolution inference 
lution are propagated. 
   an important advantage of our representation is that feedback loops can be easily encoded. indeed  an empirical representation of a feedback loop should reflect an integrated comprehension of the phenomenon  on the opposite of a low level representation relying on heavy computations. modeling a feedback regulator itself would lead to a computational issue  if based on a low level modeling and simulation. for any feedback controlled variable v  we automatically introduce an intermediate variable vsumm which summarizes all influences coming into the control loop. its behavior is then described by an evolution constraint which integrates the expected global behavior. likewise n-valued equilibria can be encoded. a justification based on control theory of this important part of the work is given in  feray 1 . 
	iv 	dynamic prediction 
continuous process supervision is essentially based on the ability to predict how evolutions can propagate through the entire process. this section describes a method for solving this general problem. to each rsv x  we attach an evolution history and a recording-table of influences. a history of x is a contiguous sequence of linear evolutions  each supported by an open interval  e1 e1   so that the total evolution of x over the history is continuous. the evolution change dates el are called events. influences propagated on x by evolution constraints have the same form as a history. all influences propagated on x over time are integrated in the history of x and recorded in a table. each influence is justified by a particular variable evolution from which it has been inferred. 
¡¡¡¡starting from a set of measured initial evolutions  the propagation algorithm has to build a single prediction of the future evolution. the prediction is performed from present date up to a predefined horizon  based on a simu-

lation approach. the principle of the algorithm is to step 
1 	reasoning 


figure 1: influences and synthetized evolution 
through time  event by event  for each variable. one step consists in closing an elementary evolution over an interval  e1 e1  in the history of a variable x  as described in figure 1. the evolution of x during this interval is computed from the recorded influences. influences are presently numerically combined  independently of the algorithm. symbolic facts like orders of magnitude of evolutions and changes of values in the quantity space are extracted. from the computed evolution  influences are deduced through evolution constraints in the future of causally linked variables. the control of the algorithm guarantees that computed evolutions are complete  i.e. no influence can be forgotten. the algorithm stops either when each history has been integrated up to the horizon date  or when the initial evolutions have completely been propagated. a classical limitation of this kind of propagation technique is that it can only solve triangular systems  as described by g. j. sussman  sussman and steele 1 . 
   in the above algorithm  nothing prevents an evolution of infinitely small duration from being propagated  although this would be non-sense in naive reasoning. for this reason  a temporal granularity has been introduced. its effect is a careful aggregation of too close events as influences are propagated. the results of the prediction are compared to the real evolution over time. nonsignificant differences are integrated into previously predicted histories. when a measured evolution differs from the predicted one  all deduced influences are computed once again by recursive stepping through justifications. this truth maintenance of histories is achieved as a new prediction proceeds  at the data sampling rate. 
	v 	conclusion 
¡¡¡¡we have presented in this article a first approach to computer aided supervision of continuous processes. the importance of encoding empirical knowledge of processes has been emphasized. supervision models use relevant supervision variables as basic objects. by using orders of magnitude the evolution constraints describe how evolutions propagate over variables. dynamic prediction allows to infer a single future evolution of the controlled system from sampled sets of measured parameters. 
   our future work will address two problems. first the comparison process  which decides if observed differences between prediction and real evolution are significant  must be improved. it has to be reliable because any dangerous evolution must be detected. the second problem is more fundamental: the current model may become obsolete as equipment fails. in this case the model should be dynamically updated. 
acknowledgments 
this paper benefited greatly from discussions with s. gentil  y. descotte  a. lux  and from the useful comments of j-c. latombe  y. lagoude and j-p. tsang. 
