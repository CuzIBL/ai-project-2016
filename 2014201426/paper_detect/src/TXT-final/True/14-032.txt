 
　　　given recent advances in image processing and analysis techniques  it seems that it should be w i t h i n the state of the a r t to perform automatic analysis of i n d u s t r i a l radiographs to locate defects in manufactured items. however  human inspectors are routinely able to detect c e r t a i n subtle defects that are beyond our current capabil l t l e s in image processing. this paper describes a s p e c i f i c radiographic inspection problem  analysis of the f i l l e r in an a r t i l l e r y s h e l l     i n d i c a t i n g the d i f f i c u l t i e s that arise in t r y i n g to detect subtle flaws  and especially flaws close to material boundaries. the relationships between human perception and the computer algorithms are i n d i c a t e d   and unexpected differences are pointed out   f o r example  the boundary determined by the human observer d i f f e r s from the boundary p o s i t i o n determined by most algorithms using a change of i n t e n s i t y c r i t e r i a   . 
introduction 
　　　there are various methods of inspecting objects whose i n t e r i o r s cannot be seen d i r e c t l y   such as ultrasonic sensing or x-ray radiography. such methods are used in medicine  1  and in industry. in i n d u s t r i a l inspection  the images r e s u l t i n g from these techniques are inspected to locate voids  cracks  foreign body i n c l u s i o n s   separations  e t c . although one might expect that such inspection could be readily automated using present-day image analysis methods  there are c e r t a i n classes of defects t h a t   though readily seen by human inspectors  defy automation. the paper w i l l focus on the results obtained in one p a r t i c u l a r study  the inspection of a r t i l l e r y s h e l l radiographs such as shown in f i g . 1   1   1   . 
       in the a r t i l l e r y s h e l l inspection problem  we are concerned with the detection of defects in the explosive material used to f i l l the s h e l l . this material is poured into the steel s h e l l and  as it s o l i d i f i e s various defects can a r i s e : 
 the o r i g i n a l radiograph inspection study  axis  was performed by the lockheed palo alto research laboratory for the u.s. army advanced research and 
development command. 	the present paper represents independent work carried out by the authors. 
* cracks develop in the f i l l e r 
* a i r bubbles c l i n g to the i n t e r i o r of the s h e l l   causing voids 
* the f i l l e r may not flow into narrow portions of the s h e l l   leaving voids 
* the f i l l e r separates from the base of the s h e l l as it hardens 
* foreign bodies may have f a l l e n i n t o the f i l l e r material as it was poured 
both gross and subtle defects must be found despite changes in radiographic f i l m density due to the c y l i n d r i c a l shape of the s h e l l and variations in imaging geometry. this is a n o n - t r i v i a l problem since the i n t e n s i t y difference between a defect and i t s surroundings is often of the same order as the geometry-caused i n t e n s i t y differences between p i x e l s . in a d d i t i o n   one must deal with problems caused by i n t e r n a l physical s t r u c t u r e s   * * and noise that arises in the radiographing and computer scanning processes. 
problems and processing strategies used 
　　　we w i l l f i r s t discuss flaws in open regions  a problem that can be dealt with using present-day processing techniques. then we w i l l describe the problem of f i n d i n g boundaries  showing that the boundary found by the human observer d i f f e r s from that found by the usual computer-based boundary f i n d i n g algorithms. f i n a l l y   we w i l l indicate two problems currently dealt with in only a l i m i t e d manner by present-day techniques: flaws on a boundary  and flaws in narrow regions having boundaries very close by. 
	a. flaws 	in 	open 	regions 
　　　f i g . 1 shows an i n t e n s i t y plot of a section  normal to the symmetry axis  of the radiograph of a s h e l l . note that because the s h e l l is c y l i n d r i c a l   we obtain an i n t e n s i t y curve that is parabolic in nature. flaws show up as perturbations that   r i d e   on t h i s trend l i n e . a flaw that occurs in the  open   away from a boundary  can be dealt with 
using current image processing techniques. the i n t e n s i t y trend can be removed by f i t t i n g a 
**the problem of defects on or near i n t e r n a l structure also arises in medical radiography  
e . g .   tumors and lesions sometimes overlap the r i b cage   1   . 
1 

polynomial to the intensity curve and subtracting the fitted curve from the actual intensity curve. residual perturbations that remain after  field flattening  include the flaws that are to be detected. 
some cautions must be observed: 
* some way of ignoring large defects must be used to avoid the influence of the defect on the curve f i t . 
* the polynomial curve must not have its end points too close to a boundary  otherwise the steep intensity gradient w i l l affect the f i t . 
the problem of the effect on the f i t due to large defects can be handled by testing points against the f i t obtained in the previous row to identify and eliminate from the curve-fitting procedure any deviant points. another approach can be based on the ransac paradigm   in which random sets of points are used to obtain t r i a l curves which are then tested for validity as models of the background intensity. once the trend has been removed  low pass filtering followed by appropriate thresholding  sometimes variable over the image  can be used to eliminate isolated noise pixels while retaining the candidate defect pixels. a final decision can be made by performing a connected component analysis on the candidate defect pixels followed by size and shape analysis of the individual clusters of contiguous defect pixels. 
     figure 1 shows the results obtained by processing a test image in accordance with the above approach. 
b. 	finding boundaries 
     the shell boundaries are typically found  using computer based techniques  by examining the intensity curve for the maximum slope change . as 
will be explained below  this  method of finding the boundary will produce a different result than that obtained by the human visual system. 
     an informal series of experiments were carried out to determine where the human observer sees a boundary in the shell inspection problem. fig. 1 shows global and local intensity profiles normal to both the base and side wall boundaries of the shell; arrows indicate where the human observer sees the boundary. in spite of the minor variations from case to case  the basic pattern is one where the intensity gradient in the explosive charge region near the boundary is either constant or slightly increasing  followed by a rather sharp decrease or even gradient sign reversal as the shell casing region is entered. however  the visual boundary does not occur at the intensity gradient breakpoint  but rather is offset by a distance of at least 1 pixels before the breakpoint  in the direction of the explosive charge . 
     a number of our experiments demonstrated that different human observers w i l l   with remarkable consistency  and in spite of the variations in boundary profile shape   position a cursor within one pixel on either side of their averaged response. therefore  the boundary offset phenomenon is not 
due to experimental error in pointing to the visual boundary. 
     though the objective was to devise algorithms which duplicated human performance  it would be interesting to know where the physical boundary appeared in the imagery. unfortunately  this information was not provided with the radiographs  nor could it be easily determined due to uncontrolled variations in the relative positioning of the x-ray source  shell  and film. 
c. finding defects on boundaries 
     as indicated previously  because air bubbles can form on the boundary wall as the f i l l e r is poured  voids in the f i l l e r w i l l occur there. this type of defect eludes present day processing techniques because the slight change in image density rides on an extremely steep intensity gradient due to the existence of the boundary. as explained earlier  f i t t i n g a polynomial to such steep gradients causes poor f i t elsewhere on the curve. one approach that we have tried la to enhance the signal caused by the flaw by averaging along the flaw. in the case of a boundary separation  this direction is known because the flaw follows the boundary. therefore  the intensity is averaged within 'layers' parallel to the boundary  as shown in fig. 1. averaging is carried out over a sector having a width comparable to the length of typical separation flaws. this process is conceptually similar to a curved moving window average whose height is one pixel and whose width is the sector width. in this sense  the operation is analogous to a low-pass filtering operation. the measured average intensities are fitted using a least-square  second degree polynomial. points in the region where the separation can occur are not used in deriving the polynomial approximation; this prevents flaws from influencing the f i t . the resultant curve for an image with boundary separation is shown as the dashed line in fig. 1. a significant deviation between the actual and the fitted data signals the presence of a boundary separation. 
     we are able to detect some of the more prominent boundary defects with the above approach  especially when the defect is not flush against the boundary   but this non-adaptive averaging technique cannot come close to matching human performance. it would appear that part of the 'magic' of human vision is in knowing how to find the appropriate averaging windows in spite of the immense number of possible alternatives. 
d. finding defects 	in narrow regions 
     certain shells have an internal geometry that forms narrow regions of f i l l e r surrounded by boundary  as shown in fig. 1. the procedure described above for separations cannot then be used since there is insufficient room to construct a grid parallel to the boundaries. there are too few points for intensity trend removal  and window operations cannot be carried out due to the space restrictions. 
relation to human visual perception 
       many inspection problems involve the detection of an anomaly - something that is ' d i f f e r e n t ' from i t s background based on i n t e n s i t y l e v e l   shape  t e x t u r e   or p a t t e r n . the human perceptual system seems to be able to analyze i n t e n s i t y gradients and can recognize the characterstistics of the background in order to carry out the inspection task very e f f e c t i v e l y . s p e c i f i c a l l y   in the s h e l l inspection problem  what stands out dramatically to the human eye as a defect often turns out to have no larger an i n t e n s i t y gradient than that of the i n t e n s i t y gradient due to the geometry of the s h e l l . thus  the eye is able to detect and suppress the global i n t e n s i t y trend due to geometry. spot-type defects 1 mils in diameter* and cracks of 1 mils having a length of 1 inch can be readily dealt w i t h   despite the fact that they represent less than an 1 l e v e l i n t e n s i t y difference from the l o c a l background in an x-ray f i l m with density that ranges from the l i g h t e s t to darkest regions in the r a t i o of 1 1   i . e .   1 i n t e n s i t y l e v e l s   . 
in order to handle separations between the 
s h e l l wall and the f i l l e r   the human inspector must be p r o f i c i e n t at knowing what a boundary is and in being able to f i n d i t . while exact s t a t i s t i c s are not a v a i l a b l e   it appears that human inspectors can detect a base separation defect having a width of only 1 mils if the length exceeds 1 to 1 i n c h . 
       in examining the question as to why the visual boundary is o f f s e t from the gradient boundary  the data shown in f i g . 1 may o f f e r an explanation. if the eye sees a gradient which is averaged over some i n t e r v a l exceeding that due to the difference in i n t e n s i t i e s between adjacent p i x e l s   then the eye w i l l not see a step function change in slope at a true break-point  betwen two regions having uniform  but d i s t i n c t i n t e n s i t y gradients   but w i l l see a smooth t r a n s i t i o n with the maxima and minima occurlng displaced from the break-point by a few p i x e l s   as is the case in fig.1. here  experiments show that the eye places the boundary at the l o c a l maxima adjacent to the break-point  even though there is another  s l i g h t l y higher gradient maximum f u r t h e r i n t o the explosive charge region. 
　　　other possible explanations for the visual boundary o f f s e t phenomenon are related to the visual broadening of the gradient t r a n s i t i o n region due to a mach band e f f e c t   1     and to the contextual information the eye uses in locating the boundary which cannot be captured by the l o c a l i n t e n s i t y v a r i a t i o n s . 
　　　it is probably the case that the human inspector brings to the problem much general perceptual knowledge  i . e .   a l i f e t i m e of exposure to various types of physical surfaces. thus  the i n t e r n a l boundary of the s h e l l has c h a r a c t e r i s t i c s that to the human  are distinguishable from those of a defect. when faced with the need to decide 
   to put these measurements into proper context  we d i g i t i z e d the f i l m over a range of from 1 m i l s / p i x e l . average f i l m grain dimaeter was.1 m i l s . 
when there is a flaw on the suface of the boundary  the human can summon a l l of his previous experience w i t h surfaces. this general perceptual experience is d i f f i c u l t to express in algorithmic form. 
discussion 
　　　two pervasive problems in scene analysis a r i s i n g in a radiographic inspection problem have been discussed:  1  f i n d i n g edges or boundaries   and  1  f i n d i n g objects that are anomalous w i t h respect to their surround. 
       in an i n d u s t r i a l context  locating edges is a c r i t i c a l f i r s t step for almost a l l mensuration and inspection tasks. the experimental r e s u l t s presented here demonstrate again that a simple edge model using only l o c a l information is inadequate to deal w i t h precise d e l i n e a t i o n of real edges. c e r t a i n l y   our computer models do not correspond in these situations to those invoked by humans engaged in the same tasks. it would appear that 'understanding edges' is a task that goes w e l l beyond any l o c a l model we might construct; a sophisticated reasoning a b i l i t y using global information is probably an essential ingrediant. 
　　　the second problem  f i n d i n g small isolated regions of an image which are anomalous w i t h respect to their surround  is often more d i f f i c u l t from a computational standpoint than from a conceptual one. the underlying requirement in many versions of t h i s problem is that of selecting the appropriately shaped region of the image to compare with i t s neighborhood. however  when we are blocked by boundaries from introducing global comparisons  as in the case of the narrow region of thee s h e l l with i n t e r n a l s t r u c t u r e   then we cannot apply the currently available techniques. 
