 
intelligent agents often need to assess user utility functions in order to make decisions on their behalf  or predict their behavior. when uncertainty exists over the precise nature of this utility function  one can model this uncertainty using a distribution over utility functions. this view lies at the core of games with incomplete information and  more recently  several proposals for incremental preference elicitation. in such cases  decisions  or predicted behavior  are based on computing the expected expected utility  eeu  of decisions with respect to the distribution over utility functions. unfortunately  decisions made under eeu are sensitive to the precise representation of the utility function. we examine the conditions under which eeu provides for sensible decisions by appeal to the foundational axioms of decision theory. we also discuss the impact these conditions have on the enterprise of preference elicitation more broadly. 
1 	introduction 
most work on the foundations of decision theory- specifically on the justification of expected utility-has focused on personal decision making  that is  settings where a decision is being made by the  holder  of the utility function. of course the decision maker may not be fully aware of  or have fully articulated  her utility function. the process of articulation is complex  and much work in decision analysis deals with preference elicitation and decision framing to help the decision maker formulate her decision problem . however  this work is primarily concerned with eliciting enough information about preference tradeoffs to allow an  approximately  optimal decision to be made. while an analyst can never be sure about the true nature of the decision maker's utility function  this uncertainty is not generally characterized explicitly  though its impact is often minimized though sensitivity analysis and related techniques. 
　recent emphasis has been placed on the development of automated decision tools  where a decision is being made on behalf of a user whose utility function is imprecisely known. as in goal programming or other forms of interactive optimization  a space of possible utility functions is usually maintained  often by imposing constraints on tradeoff weights . a decision can be made based on this set of feasible utility functions. for example  parcto optimal decisions can be identified  1; 1   or models based on minimax regret can be used to choose a specific decision  1; 1; 1 . in each of these models  the uncertainty regarding the utility function is characterized by the feasible utility set. 
　somewhat less common is work in which the system's uncertainty about a user's utility function is quantified probabilistically. some recent examples include  1; 1; 1 . in this work  a distribution over utility functions is assumed. the expected utility of a decision is determined not just by taking expectation over the outcomes of that decision  but also expectation over the space of possible utility functions. we use the term expected expected utility  eeu  to denote the value of a decision computed in this way. elicitation strategies can be informed using the current distribution over utility functions. for example  value of information can be used to determine whether the improvement in decision quality given by a piece of information outweighs the cost of obtaining that information. thus  characterizing one's uncertainty over possible utility functions in a probabilistic fashion  and using eeu to determine decision quality  has much to recommend it from the point of view of elicitation. 
　decision making using distributions over utility functions has been considered in other contexts. for example  cyert and de groot consider problems in sequential decision making in which uncertainty in the underlying utility function is represented probabilistically  1; 1 . fishbum  also addresses this problem  as we discuss below . harsanyi's formulation of games with incomplete information as bayesian games  1; 1  relies critically on distributions over payoff functions  and virtually the entire literature on in this area adopts this perspective  1; 1 .1 
　in all of this work  the eeu concept is used to determine the value of decisions in the context of an uncertain utility function. unfortunately  while eeu has an intuitive appeal  this scheme is sensitive to positive affine transformations of 
   'in some sense  much work in collaborative filtering  1; 1  and related models  can be viewed as incorporating distributions over utility functions. however  these are used for purposes of classification  i.e.  determining a unique utility function for a particular user  and generally uncertainty in utility is not accounted for when making decisions. 

decision theory 	1 

　it is well known that utility functions are invariant under positive affine transformations. that is  the relative expected utility of any pair of decisions  in any decision scenario  will 
be unaltered by such a transformation of a utility function. this implies that the optimal decision in any decision scenario is unaffected by such a transformation. 
1 	decision theory 

   this definition is precisely that used in  1; 1; 1  in the context of utility elicitation  and also that used in much other work involving uncertainty over utility  1; 1; 1 . in such a state of uncertainty-or belief state-the optimal decision is that d* with maximum eeu eu d* p . we denote by eu p  the value of being in belief state p  assuming one is forced to make a decision: 

we call this generic decision rule the meeudecision rule  by analogy with the classical meu decision rule. 
   eeu seems to be a fairly natural concept given probabilistically quantified uncertainty over utilities. the fact that it occurs in many different contexts certainly attests to this fact. unfortunately  the proposed definition can induce certain anomalies  as we examine below. 
1 justifying meeu 
1 loss of invariance 
the results of von neumann and morgenstern suggest that the decisions one makes with respect to belief state p over u should be invariant to legitimate transformations of the elements of u. certainly  this would be a desirable feature of the meeu decision rule. one might even claim that the decision rule can only be considered useful if it satisfies this condition. in general  unfortunately  this is not the case. 
   as a simple illustration  suppose we have a domain with two outcomes s1 and s1  and a distribution p that assigns probability 1 to u1 =  1  and probability 1 to u1 =  1 . suppose we use the meeu decision rule in this context  by computing 

and choosing the decision d* with maximum expected utility eu d*  p . then a decision that accords higher probability to s1 will be preferred to one that gives lower probability to s1. however  if we transform u1 into ui1 =  1   the relative utilities of these decisions will be reversed. thus  the meeu decision rule is not insensitive to transformations of individual utility functions with positive support. note that we are not suggesting that agent's will arbitrarily transform some utility functions and not others.1 rather  the question is: which representation of a specific utility function  e.g.  u1 in the example  should be adopted in the first place  
   one possible way to deal with this problem is to recognize that a utility function is simply a convenient  and nonunique  way of expressing preferences over lotteries. rather than working with utility functions  we could work explicitly with a density over preference functions  in fact  we will do this implicitly below . unfortunately  the set of lotteries over which a preference ordering is defined is uncountable; therefore  some compact representation  of the individual preference functions  is needed. but this is precisely the role of 
     1 if the same transformation is applied to all functions with positive support  the meeu decision is unchanged. 
decision theory 
a utility function-to serve as a concise representation of a preference function over lotteries. 
   this gives rise to the question of how to choose a representative utility function from each equivalence class      that allows formal justification of the meeu decision rule  and under what circumstances such representatives exist. 1 a lottery interpretation of meu 
we give a formal justification for the meeu rule under a specific condition: we assume the existence of a known best and worst outcome. that is  each utility function with positive support has the same best outcome st and worst outcome  s＼. we also insist that the user is not indifferent to these alternatives  that is  that st must be strictly preferred to . s . 1 we call such utility functions extremum equivalent. in many settings  such as those involving active preference elicitation  restricting attention to a set of extremum equivalent utility functions is not problematic. one simply needs to ask the user to identify her most and least preferred outcomes  these need not be unique  but only one such representative need be identified . 

1 

here the first step refers to a compound lottery over an continuous set of component  simple  lotteries  while we assume in second step that a such a compound lottery can be reduced to a simple lottery in an analogous way to the reduction of a finite compounded lottery. 
　thus under the assumption that one can identify a best and worst outcome  the meeu decision rule can be justified for use with normalized  extremum equivalent  utility functions by appeal to the foundational axioms of decision theory  and 
an interpretation of uncertainty over utility as a lottery over the lotteries defined by the component utility functions. we now formalize the legitimacy of eeu and mee. 1 	dealing with small worlds 
it is important to realize that the best and worst outcomes with which one calibrates must either be truly best and worst outcomes from the decision maker's standpoint  or they themselves must be calibrated. using savage's 1  terminology  we must be careful to distinguish  small worlds  reasoning 
from  grand worlds.  consider the case where the set of outcomes is restricted to the subset of outcomes that are possible given the set of actions in a specific decision scenario. but assume there exist outcomes outside the domain of the restricted scenario for which the user has concrete preferences. let's refer to the set of restricted outcomes as local  while the space of all outcomes is global. 
1 	decision theory 

decision theory 	1 

elicited best and worst outcomes. given a prior over arbitrary utility functions  as long as decisions using eeu are not made until the determination of best and worst outcomes is completed  this poses no difficulties. an alternative  in certain scenarios  is to suppose that certain outcomes are universally most and least preferred  e.g.  in medical contexts  death can be used as the latter . this may be hard to justify formally  but from a practical point of view will be quite useful and  one hopes  have little impact on actual decision quality. 
the issue of small worlds also poses certain problems. 
from the point of view of practical elicitation  the prospect of calibrating some small set of relevant outcomes using a user's  global  utility function is unappealing. fortunately  as argued above  for a given individual  strength of preference can be assumed fixed for the best and worst outcomes  which allows things to carry through. strength of preference may prove to be important however when trading off the increase in eeu with the effort associated with the elicitation process. furthermore  this can have an important impact on the construction of priors from databases of utility functions. 
1 	concluding remarks 
decision making when the underlying utility function is unknown is an important problem in game theory  interactive optimization  and preference elicitation. quantifying this uncertainty using distributions over utility functions has a number of appealing qualities  and quite naturally leads to the notion of expected expected utility  a concept that has been used in several different lines of research. 
   the aim of this paper is to point out that expectations taken with respect to utility function distributions require some care. more precisely  the operation of expected expected utility only makes sense  from a foundational standpoint  when the distribution is over extremal equivalent utility functions. while this has certain implications for practical utility elicitation  we have argued that this requirement is not overly stringent from a practical perspective. 
acknowledgements 
thanks to radford neal whose comments on preference elicitation led to this investigation and to moshe tennenholtz for suggesting interesting connections. this work was supported by the institute for robotics and intelligent systems  iris   and the natural sciences and engineering research council of canada  nserc . 
