 
the case* based reasoning process depends on multiple overlapping knowledge sources  each of which provides an opportunity for learning. exploiting these opportunities requires not only determining the learning mechanisms to use for each individual knowledge source  but also how the different learning mechanisms interact and their combined utility. this paper presents a case study examining the relative contributions and costs involved in learning processes for three different knowledge sources-cases  case adaptation knowledge  and similarity information-in a casebased planner. it demonstrates the importance of interactions between different learning processes and identifies a promising method for integrating multiple learning methods to improve case-based reasoning. 
1 	introduction 
the case-based reasoning  cbr  process solves new problems by retrieving records of problem solving for similar prior problems and adapting their solutions to fit new needs. learning by acquiring new cases is an integral part of this process: each problem-solving episode itself provides a new case to save for future reuse. however  learning-new cases is only one of many ways to learn within the cbr framework. cbr systems rely on at least four types of knowledge: the case base  indexing scheme  similarity criteria  and case adaptation knowledge. each of these types of knowledge provides an opportunity for learning. consequently  a multistrategy learning approach  michalski and tecuci  1  that improves multiple types of knowledge is promising for improving case-based reasoning. because the information 
　 this work was supported in part by the national science foundation under grant no. irj-1. 
1 	case-based reasoning 
content of the different types of knowledge in a cbr system may overlap  richter  1   learning that augments one type of knowledge can even help overcome deficiencies in the others. for example  learning new cases might reduce the need for case adaptation knowledge  by enabling the system to start from more relevant cases; conversely  learning new case adaptation knowledge might enable a system to solve a wider range of problems with its existing cases. 
　developing the requisite learning methods for each knowledge type requires addressing questions about the learning mechanisms to use  how to integrate them  and the overall utility of adding them to the cbr process. a simple approach is to develop learning strategies for each knowledge type individually and then add them all to the cbr system. learning methods exist  for example  for refining indexing criteria  see  kolodner  1  for an overview ; learning methods have also been applied to case adaptation knowledge  hanney  1; sycara  1 ; and some cbr systems already combine multiple forms of learning  hammond  1 . 
　however  simply combining methods may not achieve the desired overall benefits  even if each method is effective individually. for example  leake  kinley  and wilson  describe tests in which case learning  and learning about case adaptation  each independently made solution generation much more effective  but when case learning was added to adaptation learning  the addition yielded minimal improvement over adaptation learning alone. one possible explanation would be that in these tests  adaptation learning alone was almost sufficient for optimal performance  leaving little room for improvement. however  tests described in this paper show that adding learning for another knowledge source can actually degrade performance: when the system learned both new cases and new adaptations  it was unable to retrieve the cases it needed in order to take full advantage of the learned adaptations. this interaction raises questions about how a cbr system can best exploit learning for each of its multiple knowledge sources. 
　
　this paper presents a case study examining the relationship of case learning  learning to refine case adaptation  and learning to refine similarity judgments in a case-based planning system. it considers two sets of issues: the requirements for each of the individual learning methods to be effective  and the requirements for realizing their full potential for improving overall system performance. it demonstrates the tight coupling of knowledge sources for cbr and shows that linking similarity assessment to learned adaptation knowledge can yield important benefits for exploiting both case and adaptation learning. 
1 motivations and issues 
this study grew out of research on learning to refine case adaptation. case adaptation remains the least understood part of case-based reasoning  and experts agree that the state of the art in case adaptation is inadequate for automatic case adaptation to be included in fielded applications of cbr  barletta  1; mark et al.  1 . one possible way to alleviate this problem is to develop new methods for automatic learning of case adaptation knowledge. the dial system  our testbed case-based planner  uses a hybrid approach to learning adaptations  leake et al.  1   building initial adaptations by reasoning from scratch and then reusing adaptations by case-based reasoning. learning of adaptation cases takes place in tandem with learning of plan cases to be reused by the normal case-based planning process  hammond  1 . 
　unlike previous case-based approaches to case adaptation  e.g.   sycara  1    dial's method reuses adaptations by derivational analogy  carbonell  1; veloso  1   replaying the derivations of previous adaptations to generate analogous adaptations  rather than transforming the solutions to prior adaptation problems. when the rationale for a problem-solving process is available  derivational approaches can increase problem-solving efficiency for the broad class of problems with similar derivations  veloso  1 . in addition to recording and replaying the traces of adaptations done from scratch  dial also stores traces of user-performed adaptations for problems it cannot adapt  increasing the range of adaptation problems it can solve. 
　both case learning and adaptation learning would be expected to reduce the effort expended on case adaptation. case learning should increase the range of plans available as the starting point for reasoning  reducing the need to reason from distant plans requiring more adaptation. adaptation learning should increase the availability of relevant adaptation knowledge  reducing the amount of effort required for each adaptation. prior tests showed that as expected  the learning methods  used individually  each produced a marked improvement in the speed of case adaptation. surprisingly  however  adding case learning to adaptation learning  the method that' performed best individually  produced only small additional speedup when compared with the best of the individual learning methods  adaptation learning   leake et al.  1 . 
　we hypothesized that the problem might be caused by a mismatch between the system's similarity assessment criteria and the system's changing case adaptation abilities. to facilitate adaptation  similarity criteria should reflect adaptability  birnbaum et al.  1; leake  1a; smyth and keane  1 . thus when new adaptations are learned  similarity criteria should be modified to reflect changed adaptation abilities  in order to select the cases that will be easiest to adapt. however  early versions of dial-like most other cbr systems-relied on static similarity criteria. as a result  when it learned both new plan cases and new adaptations  the new plan cases it selected as most similar might be more difficult to adapt than plans that appeared less similar  but that involved problems it had learned how to adapt. 
　to link similarity assessment directly to adaptation knowledge  we developed a simple similarity assessment method called rcr  for re-application costs and relevance   leake et al.  1 . rcr estimates the cost of performing adaptations by using simple case-based reasoning about the costs of previous adaptations. such a method makes learning to refine similarity a natural sideeffect of adaptation learning  but also has two potential drawbacks: either generating inaccurate similarity judgments  if the costs of the previous adaptations retrieved turn out to be poor predictors   or imposing excessive computational overhead  because of embedding another case-based reasoning process within the main cbr cycle. consequently  we asked four questions: 
1. whether the linkage between similarity and adaptation knowledge provided by rcr similarity assessment can markedly decrease case adaptation effort when case learning and adaptation learning are used together. 
1. how the overall planning efficiency of dial is affected by rcr and adaptation learning. 
1. how the total planning cost breaks down into costs of rcr similarity assessment versus case adaptation. 
1. how adaptation learning and case learning affect the range of problems that the system can solve. 
after a synopsis of the learning methods investigated and how they are applied  this paper examines these four issues. it briefly addresses the first issue  which is considered in depth in leake  kinley  & wilson   and focuses primarily on the remaining three. 
	leake  kinley & wilson 	1 
1 task domain and basic processing sequence 
dial's task domain is disaster response planning: the strategic planning used to guide damage assessment  evacuations  etc.  in response to natural and man-made disasters such as earthquakes and chemical spills. human disaster response planners appear to depend heavily on prior experiences when they address new problem situations  rosenthal et a/.  1   making it a natural task domain for case-based reasoning. for example  when generating a response plan to bring help to an isolated area  a previously-generated plan for another isolated area may provide helpful information for planning emergency transportation. 
　dial generates disaster response plans for disasters reported in simple  1 line  news stories. the system includes a simple schema-based story understanding component that processes conceptual representations of news stories describing the initial events in a disaster  and a retrieval component that selects a prior response plan expected to be easily adaptable to the new disaster. problems in the retrieved plan are detected by a simple evaluator for candidate response plans  based on the problem-detection process described in  leake  1b   and supplemented by inputs from a human user . 
　when problems are found  a description of the problem in a pre-defined problem vocabulary is provided to the adaptation component. that component can either build up adaptations from scratch or by case-based reasoning starting from previous adaptations. during adaptation  dial learns by storing traces of its case adaptation process and of the memory search process used to find needed information. for example  if it performs a substitution to replace an unavailable object  e.g.  supplies were previously delivered by the red cross but there is no red cross in the country where the new disaster occured   the stored memory search trace records the path it followed to find a substitution  e.g.  moving from a memory node for red cross to the memory node for its abstraction of relief organizations  and then moving to specifications of that node . more complete descriptions of the system axe available in  leake et a/.  1   
1 types of learning 
response plan case learning: dial begins its processing supplied with a small library of hand-coded disaster response plans  using a representation analogous to that used by chef  hammond  1 . when new disasters are encountered  these response plan cases are reapplied by transformational analogy  changing components as needed to fit new constraints. the results are then stored for future reuse  adding to the case library. be-
1 	case-based reasoning 
cause this process is a standard part of case-based planning systems  we will not discuss it further. when dial is unable to generate a suitable plan autonomously  its plan library can be augmented by user-generated plans  increasing the range of problems the system can solve autonomously  as described in the following paragraphs. adaptation case learning: as described in  leake et al  1   dial's initial case adaptation knowledge 
is a small set of abstract transformation rules and a library of domain-independent  weak methods  for memory search  e.g.  the  local search  strategy to find related concepts by considering nearby nodes in memory . when presented with a new adaptation problem  dial first selects a transformation rule to apply and then performs memory search to find the information needed to operationalize the transformation rule and apply it to the problem at hand  for example  if a substitution transformation is selected  to find what to substitute . once a successful adaptation has been generated  the system saves a trace of the steps used in solving the adaptation problem for future reuse. in this way  the system learns specific adaptation procedures starting from domain-independent adaptation methods when no specific knowledge is available. adaptation cases may themselves be  adapted  in a simple way: if the derivation does not identify a solution   local search  considers alternatives near the one suggested by the derivation  terminating its search after reaching a user-defined limit on the number of nodes visited. when the process terminates without finding an adaptation  the user can guide the system through the adaptation process to generate the new plan. both the new adaptation and the resulting plan are stored for future use. 
　dial's adaptation cases have two basic parts: indexing information and adaptation information. the indexing information includes a representation of the type of problem to adapt and information about the response plan for which the adaptation case was generated. the problem description information is similar in spirit to the problem vocabularies used to guide adaptation in other cbr systems  e.g.   leake  1b    and serves as an index to guide retrieval of adaptation cases to use for new adaptation problems. the 
problem vocabulary divides problems according to categories such as unavailable-filler and lackof-access. each problem type is associated with a structure to be filled by a fixed range of descriptive information  e.g.  the particular role  filler  and attempted action involved . to streamline access to relevant adaptation cases  stored adaptation cases are organized in memory by the types of problems they address. 
　the adaptation information packages a transformation type  e.g.  substitute  add  delete  and a pointer to a memory search case containing the memory search steps used to find the information needed to apply the transformation. the memory search steps are described in terms of a vocabulary of standard memory operations  such as extracting a role-filler or moving up the abstraction hierarchy in memory. 
　the adaptation information is used both to guide future adaptations and to estimate their cost. once an adaptation case has been retrieved  the cost of memory search dominates all other costs involved in adaptation. consequently  the cost can be approximated by the memory search cost involved in replaying the stored memory search trace. 
　similarity learning: the rcr similarity assessment method predicts the cost of adapting a problem in a case-based way  using learned adaptation knowledge. given a new disaster situation and a candidate response plan with applicability problems  rcr first retrieves the adaptation cases most relevant to the current problem types  one for each problem to adapt  using the problem description as an index into the library of adaptation cases. it next estimates the cost to re-apply each of the adaptation cases retrieved  based on the length of its adaptation derivation. 
　ideally  in similar future contexts  replaying the derivation will lead to an analogous result that applies to the new context  so that the length of the stored derivation suggests the re-application cost. however  differences between the old and new problems may prevent the prior derivation from being directly applicable  increasing the cost of adaptation. consequently  the estimated cost is multiplied by a  dissimilarity  factor based in a simple way on the semantic similarity of old and new situations. to calculate the dissimilarity factor dial simply sums semantic distances between role-fillers in the problem descriptions  according to its memory hierarchy. the benefits of rcr compared to alternative methods are discussed in leake  kinley  and wilson . 
　note that because rcr focuses on the difficulty of adapting problems  a response plan that requires several simple adaptations could be chosen over a response plan that requires a single difficult adaptation. because this similarity learning method focuses on finding the cases that are easiest to adapt  those with the least important differences   it differs from learning methods such as prodigy/analogy's  veloso  1   foot-print  similarity metric that are aimed at learning situations with the most relevant similarities. rcr is in the spirit of smyth and keane's  adaptation-guided retrieval  but learns about the difficulty of adaptations from experience rather than using static criteria to estimate adaptation cost. 
　thus dial's learning mechanisms include response plan learning  by cbr/transformational analogy; adaptation learning  by cbr/derivational analogy applied to traces of internal processing or user adaptations; and similarity learning  by cbr/transformational analogyapplied to previous adaptations. the combination of methods allows different lessons to be drawn from a single episode and reapplied independently in new contexts. 
1 effects of individual and combined learning strategies 
to answer the questions listed in section 1  we performed a series of tests. these tests compared dial's performance under five conditions: no learning of either cases or adaptations  nl ; case learning  of plan cases only- the standard learning of case-based planners  cl ; adaptation learning  in which only adaptation cases are stored  al ; learning of both response plan cases and adaptation cases  al+cl ; and learning of both response plan cases and adaptation cases  using the rcr method to base similarity assessment during plan retrieval on learned adaptation cases  al+cl+rcr . each condition except the last used traditional semantic similarity for case retrieval  with ties broken by a simple count of the number of problems in a plan case requiring adaptation. 
the initial memory for the trials included nodes for 
1 concepts and an initial case library containing 1 response plans for earthquake  air quality  flood  and fire disasters. during testing  dial processed conceptual representations of 1 news stories  1 floods  1 earthquakes  1 forest fires  and 1 industrial air quality problems . generating response plans for these disasters required generating 1 adaptations  each of which was stored as a new adaptation case. these experiments extended the trials reported in  leake et a/.  1   which processed 1 stories  resulting in 1 adaptation cases. 
　test runs were divided into two sets. processing of the first third of the adaptation problems was treated as a learning phase to build up initial knowledge sources  and statistics were gathered on the remaining two thirds of the adaptations. 
　effects of linking similarity and adaptation knowledge on adaptation efficiency: the measure used for adaptation efficiency was memory search effort  calculated by two machine-independent measures: the number of memory nodes visited  and the number of primitive memory search operations performed. figure 1 shows that both case learning and adaptation learning individually provide large efficiency increases over no learning  as expected   while adaptation efficiency with al+cl provides smaller gains over adaptation learning alone. the results for the first four cases are consistent with those of  leake et a/.  1 . 
　the fifth result  for al+cl+rcr  suggests the potential benefits of directly linking similarity judgments to learned adaptation knowledge. the tests do not  
	leake  kinley  & wilson 	1 
figure 1: overall processing costs. 
however  address another crucial question: whether the combination of al+cl+rcr improves overall planning performance. rcr similarity assessment involves retrieving adaptation cases applicable to all the problems in a set of candidate cases  possibly imposing considerable overhead on the retrieval/similarity assessment process. this led us to examine the overall efficiency of generating response plans  measured by execution time. 
　overall planning efficiency and cost breakdown: figure 1  illustrating execution time in cpu seconds  shows that al+cl+rcr in fact provided some improvement over the other conditions in terms of overall planning time. the light bands at the top of the bars show the portion of the execution time for the retrieval/similarity assessment process. interestingly  although al+cl decreased the machine-independent measures of adaptation effort compared to al  as shown by figure 1   it resulted in a noticeably worse total execution time than al. this is partially due to increased retrieval time of retrieving from growing sets of plan and adaptation cases. however  it also appears that the machine-independent measures do not completely capture the factors affecting adaptation time. 
effects on the range of problems the system 
can solve: dial's initial domain theory is incomplete  but its ability to store and reuse user-provided solutions  both disaster response plans and adaptations  enables it to augment its knowledge. consequently  its learning affects not only efficiency  but also the range of problems that it can solve. figure 1 shows the percentage 
1 	case-based reasoning 
figure 1: failure rates for the adaptation process. 
of the trial problems the system is unable to solve autonomously after the learning phase on the test set of problems. the combination of case learning and adaptation learning performed better than either method alone  and the improved case selection of al+cl+rcr increased the proportion of problems that the system could solve compared to al+cl based on static semantic similarity criteria. however  these differences are small and possibly insignificant. 
1 	lessons and directions 
these results suggest the importance of adjusting similarity criteria-and hence the selection of learned cases- to keep pace with adaptation learning. by enabling more effective use of two types of learned knowledge  integrating different types of learning improved both the speed of processing and the range of problems that dial could solve. these pilot experiments raise many issues for future study: the relative importance of adaptation and case learning in different domains  the learning curve for each type of knowledge  the utility of case-based similarity assessment methods  like rcr  as the number of adaptation cases increases  whether it is possible to partially alleviate the utility problem by retaining only a subset of the many adaptation cases that are generated  and the tradeoffs and utility of alternative methods for retrieving and applying adaptation knowledge during case selection. however  the results support the potential value  of coordinating different types of learning in cbr and the need for further investigation. 
1 conclusion 
case-based reasoning exploits multiple knowledge sources. consequently  it provides an opportunity for multistrategy learning to refine each of those knowledge sources. our studies of multistrategy learning in the case-based planner dial provide-to our knowledge- the first empirical demonstrations of the complementary roles that can be played by these multiple learning processes. however  they also show that the learning strategies must be coordinated to realize their potential benefit. similarity criteria for selecting cases must change as adaptation knowledge is learned; neither coverage of the case library  nor case adaptation abilities  can be judged in isolation from the other knowledge sources. likewise  in developing a combined method  how one type of learning affects the efficiency of one component of the cbr process is secondary to the efficiency effects of the learning on the cbr process as a whole. the close coupling of multiple processes and knowledge sources in cbr complicates the application of learning to each one  but also provides a new motivation for combined learning: combined learning can enable a cbr system to better exploit the relationships between multiple types of knowledge. 
