a novel framework for integrating discrete event system control and diagnosis 
gregory provan* 
rockwell scientific company 
1 camino dos rios  thousand oaks  ca 1 

1 towards an integrated control/diagnosis framework 
   diagnosis of discrete event systems  des  is an important task  with several desiderata that include the ability to  1  encode both control and diagnosis properties within a single representation  and  1  to compose system models from component models in a simple and efficient manner  e.g.  without the kind of state explosion that can occur during parallel composition of component finite state machines  fsms . 
　many formalisms have been proposed for the model-based diagnosis  mbd  of a des  but each has drawbacks. the representations based on fsms  e.g.   sampath et al.  1   have a clear control semantics but suffer from incompletelyspecified diagnostic semantics and state explosion during model composition. mbd representations  e.g.   darwiche  1   have been used to model dess using space-efficient compositional methods  darwiche and provan  1   but lack well-developed control-theoretic specifications. 
　this article proposes a framework based on fsms that has a clear control and diagnostics semantics  yet enables model composition without state-space explosions. we propose a two-level modeling framework  based on a system hypergraph h that can serve as a generator for mbd and fsm models. h specifies the component causal relations using the graphical framework described within causal networks  cn   darwiche  1   whereby we can clearly specify independence relations for system variables  and as a consequence compose system models with system state spaces limited through independence relations. our representation is not significantly more complex than that of either fsm or cn alone  yet is equivalent to both these representations. we introduce to mbd modeling additional requirements for specifying control transitions  and to fsm modeling requirements on state descriptions and causal independence of components. 
1 a discrete event modeling framework 
we adopt a representation that is a hybrid of two key modeling approaches  an mbd approach  causal networks  cn   darwiche  1   and an fsm control/diagnosis approach  sampath et ai.  1 . 
*email: gprovan rwsc.com 
poster papers 
　we propose a two-level  component-based framework to model complex discrete event systems.' our higher level system representation  termed system causal graph  scg   provides a well-defined approach  based on bond graphs  for describing the high level component  or sub-system  configurations and the physical/causal inter-relations of the components  or sub-systems . we model the behaviors of individual components using a lower level representation  called a control causal network  ccn . the ccn models can be converted into regular finite state machines or propositional logics for further analysis using fsm-based discrete event system techniques  e.g.  supervisory control theory  or model-based reasoning techniques  e.g.  cn diagnostics   respectively  provan and chen  1 . the behaviors of the complete system are described by  the composition of  the individual component models. 
1 component-based modeling approach 
this section describes the ccn framework we adopt for modeling the components of a system. this representation adopts the cn graphical structure and diagnostics specifications  and encodes propositional equations for each node in the graph based on an extension of fsms. to explain our framework  we first briefly introduce cns and fsms. 
　we adopt the cn model specification  darwiche  1   called a system description  which defines a tuple 
 where  a  p is a finite set of discrete-valued vari-
ables comprising two disjoint variable types: represents the failure modes of the components  and represents system properties other than failure modes;  b  is a directed acyclic graph that defines the causal relations over the variables in  is a set of propositional sentences  the domain axioms  constructed from members in p. this approach has a number of important properties  such as compositional modeling based on the independence properties specified in  if component has behavior equations  then the system 
behavior is specified simply by the union of the component equations  i.e.    darwiche  1   specifications of  and algorithms for computing a diagnosis  minimal diagnosis  etc.  are all well-defined  darwiche  1 . 
	an fsm is defined as g = 	where  is the 
state space   is the set of events  	is the partial transi-
   'our approach can be easily expanded into a multi-level nested hierarchical structure to accommodate more complex systems. 
1 
tion function  and defines the transitions between states in is the initial state of the system. this framework has been extended for failure diagnosis through the use of unobservable failure transitions and autoconstruction of an observer   sampath et al.  1  . 
　in our hybrid representation  we model each component using a control causal network consisting of a tuple where p is the set of 
parameters  	is the event set  q the state set  t the set of guards  or pre-conditions    
the transition function  the initial state  the initial value of parameters  the marked states  a graph  and a set of propositional equations.1 parameters in the parameter set p are discrete-valued  and guards are predicates on the parameters in p. we can view as a set of transitions. an equation describing transition denoted can be interpreted as follows: if at state q the guard is true and the event occurs  then the next state is and the parameters at will be updated to we call the functions the actions of the transition the set of all sequences of event labels  traces  of a ccn given initial parameter setting pq is the language l it generates. we have shown in  provan and chen  1  that this representation possesses the control-theoretic properties of the finite state machine with parameters representation  and is based on standard propositional logic with well-known semantics. 
1 	system causal graph 
an scg  is a directed graph whose nodes in  
represent the components of the system and whose edges in denote the causal relations between the compo-
nents. a node is associated with a ccn component model au which represents the component's behaviors. 
　the scg's graph has properties similar to those of the graph g of a ccn. must preserve a number of control and simulation/diagnostics properties.1 as an example  in order to prevent possible ambiguity and direct circularity in the causal semantics  we assume that the system represented in an scg should be structured such that any component in the scg may not be both the  direct  predecessor and the  direct  successor of the same component in the scg. 
1 	properties of integrated representation 
in the full paper  provan and chen  1 j  we prove a number of important properties of the scg. one key property involves the sound fsm and cn models that can be generated  where by sound we mean that the model obeys the syntactic and semantic requirements of the  fsm or cn  representation in question: 
   1 the definition is a discrete-parameter restriction of finite state machines with parameters  chen and lin  1   such that we use a logical representation for state transitions. our representation extends the representation and control semantics of the causal network models defined in  darwiche and provan  1  by adding an explicit transition framework for each cn sentence in  
　1 the full paper   provan and chen  1   discusses and its properties in detail. 
lemma 1 mapping an scg into an fsm  cn  produces a sound system-level fsm  cn   respectively. 
　to show the cn model created by the above procedure is equivalent to the fsm model  we show that they generate the same language. 
theorem 1 given an fsm g and a cn model generated from an scg with initial state-settingthe fsm and 
cn languages are equal  i.e.   
　from a control perspective  this means that the fsm and cn possess the same control properties  e.g.  livencss  correctness  etc. from a plant modeling perspective  we can use the logical representation of the scg to validate a plant model using a theorem prover. 
　in addition   provan and chen  1  shows the equivalence of diagnostic capabilities of the generated models. we assume that  to perform fault isolation  for the fsm  cn  approach we use a diagnoser  cn model respectively. 
theorem 1 if we map an scg into a fsm g and a cn model  then:  a  given observation set g is diagnosable  i.e.  we can isolate failure events  iff is diagnosable;  b  given observation set the set of diagnoses for g is equivalent to the set of diagnoses for  
　this result means that we can now establish equivalent diagnostic capabilities between an fsm and a cn representation  if they can be encoded by the same scg. hence  the important mbd properties  e.g.  completeness and soundness of diagnostics given a model  can be inherited by an appropriate fsm model. 
　in summary  these properties indicate that this approach acquires the control semantics of fsms  and the diagnostic semantics of cns. on the practical side  although we can generate and use algorithms for either fsm or cn models  further research is necessary to identify the model type most appropriate to a particular class of applications  since model/algorithm efficiency is domain-dependent. in addition  we need to analyze the tradeoffs associated with the extra modeling requirements of the scg graphical framework versus the linear  rather than worst-case exponential  as in an fsm  growth associated with system model composition. 
