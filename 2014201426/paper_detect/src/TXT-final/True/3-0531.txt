 
this paper describes comet  a collaborative intelligent tutoring system for medical problembased learning.  comet uses bayesian networks to model individual student knowledge and activity  as well as that of the group.  generic domainindependent tutoring algorithms use the models to generate tutoring hints.  we present an overview of the system and then the results of two evaluation studies.  the validity of the modeling approach is evaluated in the areas of head injury  stroke and heart attack. receiver operating characteristic  roc  curve analysis indicates that  the models are accurate in predicting individual student actions. comparison of learning outcomes shows that student clinical reasoning gains from our system are significantly higher than those obtained from human tutored sessions  mann-whitney  p = 1 . 
1 introduction 
the transformation from medical student to physician is a gradual one  requiring the assimilation of vast amount of knowledge as well as the development of clinical-reasoning skills. clinical reasoning is the cognitive process by which the information contained in a clinical case is synthesized  integrated with the physician's knowledge and experience  and used to diagnose or manage the patient's problem  newble et al.  1 . problem-based learning  pbl  has been introduced as an alternative to traditional didactic medical education to teach clinical-reasoning skills at the early stages of medical education. pbl is designed to challenge learners to build up their knowledge and develop effective clinical-reasoning skills around practical patient problems. pbl instructional models vary but the general approach is student-centered  small group  collaborative problem solving activities  barrows  1 . the main arguments for using collaborative problem solving in medical pbl include the wider range of ideas generated and the higher quality of discussion that ensues.  in addition  students obtain training in the skill of consultation and group clinical problem solving  which are important for the successful practice of clinical medicine.  but effectively implementing pbl in the clinical curriculum is difficult due to the lack of standards for pbl tutoring  das et al.  1  and a lack of properly trained tutors.  in addition  effective pbl requires the tutor to provide a high degree of personal attention to the students.  in the current academic environment where resources are becoming increasingly scarce and costs must be reduced  providing such attention becomes increasingly difficult.  this is exacerbated by the fact that medical school faculty  in particular  often have limited time to devote to teaching.  as a consequence  medical students often do not get as much facilitated pbl training as they might need or want.   
¡¡there has been increasing interest in application of intelligent technologies to medical training to provide rich environments for maximizing learning while minimizing risks to patients  until sufficient competency is established. the majority of the work in intelligent medical training system has focused on particular domains  such as radiology  sharples et al.  1  or pathology  crowley and medvedeva  1  for training students in feature perception and disease classification.  little or no work has addressed providing a general domain-independent framework for intelligent medical tutoring and no work has addressed intelligent medical tutoring in group settings. 
we have developed a collaborative intelligent tutoring 
system for medical problem-based learning called comet.  comet uses bayesian networks to model individual student knowledge and activity  as well as that of the group.  it uses generic tutoring algorithms applied to the models to generate tutorial hints to guide problem solving activity.  in previous work  suebnukarn and haddawy  1  we presented a basic bayes net student model and details of the tutoring algorithms.  we also presented results of a study showing that the hints generated by comet agree with those of a majority of human tutors.  in this paper we present a new  more expressive bayesian network student model  along with an roc analysis evaluating of the model's accuracy.  we also evaluate the overall effectiveness of comet in imparting clinical reasoning skills to medical students by comparing clinical reasoning exam scores of comet tutored students to those of human tutored students. 
1 medical problem-based learning 
problem-based learning  pbl  can be described as  the learning that results from the process of working toward the understanding or resolution of a problem   barrows  1 . pbl is typically carried out in three phases:  1  problem analysis: in group discussion the students evaluate the patient problem presented to them exactly as they would a real patient  attempting to determine the possible underlying anatomical  physiological  or biochemical dysfunctions and to enumerate all possible causal paths  hypotheses and their causal relations  that would explain the progression of the patient's problems.  1   self-directed study: in this phase  students work outside the tutorial session  using any relevant learning resources  e.g. literature  laboratories  specialists  to address any open issues identified in the first phase.  1  synthesis and application of newly acquired information: the students analyze data and wrap up the problem collaboratively after they return from their self-study period.  
   one of the main issues in pbl is the role of the tutor.  like a good coach  a tutor needs enough command of whatever the learners are working on to recognize when and where they most need help  das et al.  1 . the ideal tutor should be an expert in both learning content and learning process  which is rare to find among human tutors. the tutor intervenes to as small an extent as possible  giving hints only when the group appears to be getting stuck or off track.  in this way  the tutor avoids making the students dependent on him for their learning. 
1 a collaborative medical tutor  
1 conceptual framework 
comet is designed to provide an experience that emulates that of live human-tutored medical pbl sessions as much as possible while at the same time permitting the students to participate collaboratively from disparate locations. comet incorporates a multi-modal interface that integrates text and graphics so as to provide a rich communication channel between the students and the system  as well as among students in the group  fig. 1 . students collaboratively create the problem solution on the hypothesis board  shown at the bottom of fig. 1.  typically each student works from a separate computer. comet can currently support pbl problem analysis in the domains of head injury  stroke and heart attack. note that these three domains are quite different since the knowledge used to reason about head injury is primarily anatomical  while that used to reason about stroke and heart attack is primarily physiological.  furthermore  the patho-physiology of the latter two diseases is more dynamic.  
generating appropriate tutorial actions in comet re-
quires a model of the students' clinical reasoning for the problem domain. this modeling task is necessarily wrought with uncertainty since we have only a limited number of observations from which to infer each student's level of understanding. thus we have chosen to use bayesian networks as our modeling technique. 
¡¡the system is implemented as a java client/server combination  which can be used over the internet or local area networks and supports any number of simultaneous pbl groups.  
¡¡the system implementation is modular and the tutoring algorithms are generic so that adding a new scenario requires only adding the appropriate model representing how to solve a particular case  domain clinical reasoning model . the student clinical reasoning model  which is a probabilistic overlay of the domain clinical reasoning model  is then constructed during runtime by instantiating the nodes that represent the knowledge and activity of an individual student. the architecture of comet differs from that of most its's in that the domain model and student model are embodied in one representation. the domain model is contained in the part of the structure of the network that represents the hypotheses and the cause-effect relations among them.  the student model is contained in the part of the network that represents how the hypotheses are derived and in the network's probabilities.  the probabilities do not represent the likelihood of occurrence of the hypotheses but rather the likelihood that a student will be able to create the hypotheses.   

figure 1. comet student interface. 
1 domain and student clinical reasoning model we built the domain clinical reasoning model based on the process of hypothesis generation in problem-based learning. consider  for example  the heart attack scenario taken from a pbl session at thammasat university medical school.   mr. c  a 1-year-old who was diagnosed as having essential hypertension four years ago  is complaining of chest pain which feels like indigestion. you have noticed that he is mildly obese  pale  clammy and sweating profusely...  
here students must enumerate possible hypotheses to ex-
plain why the patient is experiencing chest pain. figure 1 is a photograph of the white board of the group pbl session  showing a directed acyclic graph representing cause-effect relationships among hypotheses.  this graph represents the problem solution developed by the students. since we would like to reason about the state of knowledge of each student concerning the solution  this graph is our starting point for the student model. the hypothesis graph can be conveniently represented as a bayesian network since bayesian networks are also directed acyclic graphs.  in addition  bayesian networks can represent our uncertainty about the state of knowledge of the students. 

figure 1. a photograph of the white board after a pbl session at thammasat university medical school. the graph shows hypotheses with arrows indicating cause-effect relations among them.  note: some hypotheses are written in thai.  
¡¡the bn structure contains two types of information:  1  the hypotheses and the causal links of the problem solution  fig. 1  right half  and  1  how students derive the hypotheses  fig. 1  left half . we represent the hypothesis structure following the model of feltovich and barrows   which defines three categories of illness features:  enabling conditions  faults  and consequences. enabling conditions are illness features associated with the acquisition of illness  e.g.  compromised host factors  unusual travel  or hereditary factors . faults are the major real malfunctions in illness  e.g.  direct trauma  invasion of tissue by pathogenic organisms  or inadequate blood supply . consequences are the secondary consequences of faults within the organism  and generally comprise different types of signs and symptoms  e.g.  chest pain  breathlessness  or tachycardia.  in figure 1  right half   we have five possible faults associated with the single consequence chest pain: myocardial infarction  angina  musculoskeletal injury  gastrointestinal disorder  and stress. atherosclerosis is the enabling condition of myocardial infarction and angina. the remaining hypothesis nodes are consequences of myocardial infarction.  each hypothesis node has parent nodes  which have a direct casual impact on it. for example  right heart failure has parents pulmonary congestion and myocardial infarction.  all hypothesis nodes have two states  indicating whether or not the student knows that the hypothesis is a valid hypothesis for the case.  
¡¡in the pbl sessions  the students create the hypotheses as well as the causal links between them  fig. 1 . we would like to be able to reason about the probability that students know the correct causal links. but in a bayes net  random variables are represented with nodes.  so we use link nodes to represent the causal links between hypotheses.  for every hypothesis that is a direct cause of another hypothesis  e.g.  atherosclerosis and myocardial infarction   we have a node  e.g link 1  representing the causal link between them.  the two hypothesis nodes  atherosclerosis  myocardial infarction  are the parents of the link node. the intuition is that the link cannot be created unless both hypotheses are created first. each link node has two states  indicating whether or not the student creates a causal link between two hypotheses. 
the derivation of hypotheses  fig. 1  left half  is represented 
in terms of three kinds of nodes: goals  general medical knowledge  and apply actions.  every hypothesis node has a unique apply node as one of its parents. the apply node represents the application of a medical concept to a goal in order to derive the hypothesis.  for example the apply 1 node indicates that the student is able to use knowledge of the vessel lumina occlusion medical concept to infer that myocardial infarction is a consequence of atherosclerosis.  each hypothesis node thus has a conditional probability table specifying the probability of the hypothesis being known conditioned on whether the parent hypotheses are known and whether the student is able to apply the appropriate piece of knowledge to determine the cause-effect relationship.  the conditional probability tables for the apply nodes are simple and gates.   
¡¡our bn student model is similar to the student model used by conati  et al .  their model includes five types of nodes: context-rule  rule-application  fact  goal  and strategy.  the correspondence between their node types and ours is: context-rule = concept  rule-application = apply  fact = hypothesis  and goal = goal.  strategy nodes  which represent different correct solutions to a problem  are implicitly encoded in our model by the fact that students can enumerate the causal hypothesis structure in any order.  our model contains causal links among hypotheses  which are not present in their model.  the reason for this is that in our medical domains a problem solution is represented by the hypotheses and causal links among them  while in their physics domains a problem solution is represented by a sequence of rule applications and the derived facts. 
for each problem scenario  we consulted medical text-
books and expert pbl tutors to obtain the hypotheses  the causal relations among them  the goals  and the medical concepts used to derive the hypotheses. the conditional probability tables for each resulting network were obtained by learning from data obtained from transcripts of pbl sessions. the data for this study consisted of tape recordings and photographs of tutorial sessions for the head injury  stroke and heart attack scenarios at thammasat university medical school.  a total of 1 groups of third year medical students were involved in this study. each group  consisting of eight students with different backgrounds  was presented with the head injury  stroke and heart attack cases and asked to construct possible hypotheses for the case  under the guidance of a tutor.  after the sessions the tape and the results on the whiteboard were analyzed to determine whether or not each goal  concept  hypothesis  and link was mentioned.  we used the em learning algorithm provided by the hugin researcher software to learn the conditional probabilities of each node  lauritzen 1 .   
1 individual and collaborative student clinical reasoning modeling 
     goal             concept               apply                                                       hypothesis                                                       link 
figure 1. part of the bayesian network clinical reasoning model of the heart attack scenario. the complete network contains 1 nodes. the model contains five types of nodes: goal  concept  apply  hypothesis  and link. the domain clinical reasoning model is instantiated for each student by entering that student's medical background knowledge as evidence. for example  if a student has a background in thoracic anatomy  we would instantiate the thoracic organ node.  since all students have basic knowledge in anatomy  physiology and pathology before they encounter the pbl tutorial sessions  we make the assumption that once a hypothesis in the domain model is created by one student in the group  every student knows that hypothesis.  so as hypotheses are created  they are instantiated in each student model.   
¡¡following commonly accepted practice in medical pbl  we assume that students should and generally do enumerate the possible hypotheses by focusing sequentially on the various causal paths in the domain  linking enabling conditions with faults and consequences.  so for each student  we must determine what causal path he is reasoning along  which we do by identifying the path of highest probability in that student's model.  this is computed as the joint probability of the nodes along the path. the most likely current reasoning path for each student is path that gives the maximum joint probability. since the students work in a group  it is also necessary to identify a causal path that can be used to focus group discussion  particularly when the discussion seems to be diverging in different directions.  we would like to identify a path that has much of the attention of much of the group and has at least one member whose attention is focused on that path. we identify a set of candidate paths by taking the most likely path for each student.  this guarantees that each candidate path has at least one student currently focused on it.  we then compute the sum of the probabilities of each candidate path over all students and select the path with the highest sum.  this gives us the candidate path with the highest average attention over all students. 
1 generating tutorial hints 
our automated tutor takes on the role of guiding the tutorial group to construct possible hypotheses for the case by the use of open-ended questions.  from our study of the tutoring session transcripts  we identified and implemented seven hint strategies commonly used by experienced human tutors:  
 1  focus group discussion: members of the group may suggest various valid hypotheses without focusing on any given causal path.  when such lack of focus becomes apparent  comet intervenes by directing the students to focus on one of the hypotheses in the group path.   1  promote open discussion: if a student proposes a hypothesis that is not on the current group reasoning path  comet provides positive feedback by encouraging the student to relate the hypothesis to the current focus of discussion.   1  deflect uneducated guessing: if a student creates an incorrect causal link  comet points this out and encourages the student to correct the error.   1  avoid jumping critical steps: if a student creates a link that jumps directly from one hypothesis to a down-stream consequence  leaving out intermediate hypotheses  comet asks the student for the more direct consequences.   1  address incomplete information: once the students have completed elaborating all hypotheses on the group path  comet identifies another path for them to work on.   1  refer to experts in the group: if after comet provides a general and then a more specific hint  the students still do not respond correctly  comet determines the student most likely to know the answer and refers directly to him.   1  promote collaborative discussion: if one student dominates the discussion  comet asks for input from the other students.  if a student does not contribute after a certain number of hypotheses have been mentioned  comet solicits input from that student.  
¡¡all strategies except strategies 1 and 1 have general and specific versions. comet first gives a general hint using the parent goal node of the hypothesis that it has determined the students should focus on  and if there is no student response or an incorrect response  the more specific parent medical concept node is used. if the students can still not come up with the hypothesis of interest  comet refers directly to the student in the group most likely to know the answer.  if this doesn't work  comet identifies this as a learning objective for study outside the session.   
¡¡ we developed algorithms to generate each of these types of hints  using as input the interaction log and the bayesian network student models. all strategies except strategy 1 use both the structure and the probabilities of the bayes net models. strategy 1 uses only a count of the number of inputs from each student. strategies 1  1  1 make use of the group reasoning path discussed in the previous section. the following transcript shows the interaction with the system after the students read the heart attack problem scenario  described in section 1. the system selects hint strategies and content based on the student input on the hypothesis board.  students: gastrointestinal disorder  smoking  hypertension  angina  myocardial infarction  chest pain  students in the group gradually create six hypotheses on the board  while analyzing the problem.  
tutor: what is the consequence of myocardial infarction   strategy 1: comet focuses group discussion by identifying which causal path the group should focus on  finding the highest probability non-mentioned node along the path  left heart failure   and providing a hint using its parent goal node  consequence of myocardial infarction .  student: cardiac output decreased  cardiac output decreased is a node along the group reasoning path but not the node that comet wants the group to focus on.  tutor: think about decrease in myocardial contractility.  strategy 1: comet gives the next hint using the medical concept parent node of left heart failure.  
student: right heart failure  right heart failure is a node along the group reasoning path but not the node that comet wants the group to focus on.  
tutor: it seems we have a problem. nida  can you help the group   strategy 1: nida is called on since she has the highest probability of knowing the left heart failure node among the students.  1 evaluation 
1 evaluation of the student model in order to determine the accuracy of the model  we compared the probabilities of hypotheses and causal links from the student model with actual student actions considered as a  gold standard . we recruited 1 second-year medical students from thammasat university medical school. that is  they had not yet had pbl experience in head injury  stroke  or heart attack. stratified random sampling was applied to divide the students into 1 groups based on their background knowledge. students were asked to answer pretest questions to determine their background knowledge. this information was used to instantiate the general student model for each individual student. students participated individually in the problem solving sessions on head injury  stroke  and heart attack with comet.  each student was asked to enumerate hypotheses and the causal links without any help from the comet tutor. the student actions of creating hypotheses and their links served as a gold standard for comparison with the predicted probabilities from the bayesian network student model.   
results 
to determine whether our student models are accurate in predicting student actions  we evaluated them by means of receiver operating characteristic  roc  curve analysis. the area under the curve  auc  represents an overall measurement of performance of the student model  with 1 a perfect test and 1 representing a model with no discriminating capacity. 
table 1 shows the roc curve analysis of the student 
models for the head injury  stroke  and heart attack scenarios. there were more false positive cases in the stroke scenario than in the others  since the student model for the stroke scenario was built from students who had already studied cerebrovascular knowledge from the head injury scenario  while in this study  we recruited students who had not yet studied any of the three scenarios. averaging results over all scenarios shows high accuracy in predicting both hypotheses and causal links.   
table 1. roc analysis showing auc for three scenarios 

scenarios 	prediction 
hypotheses causal links head injury 1 1 stroke  1 1 heart attack all 1 
1 1 
1 1 evaluation of student clinical reasoning gains to evaluate the overall impact of the system on student learning  we designed a study to test the hypothesis that a comet tutorial will result in similar student clinical reasoning gains to those obtained from a session with an experienced human pbl tutor.  
¡¡we compared three groups of students tutored by comet with three other groups of students tutored by experienced human tutors. the study had a pre/post test control group design. all students were assessed on their clinical reasoning before and after the pbl tutorial session on heart attack and stroke to determine the reasoning gains for each individual student.  
¡¡we used the clinical reasoning problem  crp  approach for clinical reasoning assessment  groves et al.  1 . each crp consisted of a clinical scenario that was vetted for clinical accuracy and realism by a specialist physician. four cases in the pre-test set measured each student's initial ability to solve the problems. four other post-test cases measured their ability to generalize the clinical reasoning acquired from tutorial session to the new related cases. participants were asked to nominate the two diagnoses they considered most likely  to list the features of the case that they regarded as important in formulating their diagnoses  and to indicate whether these features were positively or negatively predictive. to establish reference scores  ten volunteer general practitioners  gps  were asked to complete both sets of crps. 
results 
there were no statistically significant differences between pre- and post-test scores obtained from the gps  indicating that the pre- and post-tests were of approximately equal difficulty  table 1 .  the gps' scores varied from 1 to 1 indicating that the questions were not trivial. reliability  the measure of the reproducibility of a test  was measured using cronbach's alpha. cronbach's alpha for pre-and post-test student scores were 1 and 1 respectively. a reliability coefficient of 1 or higher is commonly considered as acceptable.  
table 1. mean score for all crps  crps 1  1  1  1 are chest pain cases.  crps 1  1  1  1 are stroke cases.  
	crps 	gp's score 	student's score  sd  
 sd  comet 	human tutor  	1 1  1  1  1  1  1  1 
1 
1 1  1  
1  1  
1  1  1  1  
1  1  
1  1  1  1  
1  1  
1  1  1 
1 
1 
1 1  1  
1  1  
1  1  
1  1  1  1  
1  1  
1  1  
1  1  1  1  
1  1  
1  1  
1  1  ¡¡table 1 shows that there were no statistically significant differences between pre-test mean scores of the comet and human tutored groups. the post-test mean scores were significantly higher than the pre-test mean scores in both comet and human tutored groups  wilcoxon  p = 1   indicating that significant learning occurred. but the average post-test score for the comet groups  1  was significant higher than that obtained for the human tutored groups  1   mann-whitney  p = 1   indicating that students were learning more in the comet sessions than in the human tutored sessions.  
table 1. mean crp score for each cohort 
	cohort 	mean score  sd  
pre-test post-test comet  1  1  1  1  1  comet  1  1  1  1  1  comet  1  1  1  1  1  comet  all  1  1  1  1  human tutor  1  1  1  1  1  human tutor  1  1  1  1  1  human tutor  1  
human tutor  all  1  1  
1  1  1  1  
1  1  1 discussion 
the results showing that clinical reasoning gains for comet tutored students are higher than those for human tutored students were unexpected.  this is particularly true in light of our earlier study showing that on average 1% of human tutors used the same hint strategy and content as comet  suebnukarn and haddawy  1 .  we believe the explanation lies primarily in the 1% disagreement.  human tutors often give up after providing a general hint  jumping right to identifying the hypothesis as a learning objective. in contrast  comet is more relentless in pushing the students  always following the sequence of general hint  specific hint  referring to expert  and finally identifying as a learning objective.   it is generally agreed that students should generate as many hypotheses as possible in a pbl session  leaving only the truly difficult issues as learning objectives. 
acknowledgments 
we thank hugin expert for providing us the use of the hugin researcher software. thanks to thammasat university medical school for their participation in the data collection and system evaluation  and to dr. kesorn jongjarern for her helpful suggestions in designing the student clinical reasoning model. 
