
multiagent models of the emergence of social conventions have demonstratedthat global conventions can arise from local coordinationprocesses without a central authority. we further develop and extend previous work to address how and under what conditions emerging conventions are also socially efficient  i.e. better for all agents than potential alternative conventions. we show with computational experiments that the clustering coefficient of the networks within which agents interact is an important condition for efficiency. we also develop an analytical approximation of the simulation model that sheds some light to the original model behavior. finally  we combine two decision mechanisms  local optimization and imitation  to study the competition between efficient and attractive actions. our main result is that in clustered networks a society converges to an efficient convention and is stable against invasion of sub-optimal conventions under a much larger range of conditions than in a non-clustered network. on the contrary  in non-clustered networks the convention finally established heavily depends on its initial support.
1 introduction
social conventions  according to  ullmann-margalit  1   are a special type of norms related to coordination problems  that is  those regularities of behavior which are a result of being a solution of a recurrent coordination problem  which with time  turn normative. the emergence and stabilization of norms  including social conventions  is one of the fundamental problems of social sciences  bendor and swistak  1 . intuitively  a social convention might be regarded as any rule of behavior or a behavioral constraint  walker and wooldridge  1 . a convention simplifies people's decision making problem by dictating how to act in certain situations. therefore  social conventions help to reduce complexity and uncertainty  particularly when the environment is open and dynamic. from this perspective it is obvious that mechanisms underlying the emergence of social conventions are of great interest for distributed artificial intelligence.
¡¡ shoham and tennenholtz  1  addressed the question whether and how the emergence of conventions is possible from decentralized  local interaction  as opposed to conventions designed and enforced a priori by a central authority. shoham demonstrated that self-coordination based on a simple local optimization rule can emerge from initial disorder. following shoham's  many researchers have studied and improved his seminal work  proposing other strategies rather than hcr  walker and wooldridge 1   studying the time needed before the convention is established  kittock  1   adding complex interaction patterns among agents  delgado  1   and many others.
¡¡however  an important question remains open  when two potential different conventions exist which one will be established at the end  this question is not applicable to the original work of  shoham and tennenholtz  1   since the game was a pure coordination game  where no action paretodominates the other. nevertheless  the question applies to all coordination games where one action is more efficient than the other. the discussion in social sciences gives no clear answer to why and under what conditions efficient conventions may prevail. as  bendor and swistak  1  point out  there are at least two conflicting positions in sociology  the strong functionalism thesis and the rational choice view. strong functionalism claims that norms and conventions exist because they are functional for the group  that is  they yield optimal collective outcomes. according to this perspective  the system should always end up in an efficient convention. however  the functionalist approachhas been criticized for its lack of a microfoundation. adherents of the rational choice view on norms argue that individuals adopt norms only when it serves their self-interest to do so. this includes the possibility that mechanisms such as social control may stabilize conventions that are an individually efficient response to the given constraints  but are socially inefficient.
¡¡in section 1 we describe our model. in section 1 we describe the experimentalresults and analyze the necessary conditions to convergeto the optimal convention. in section 1 we analyze the time efficiency of the emergence of conventions. in section 1 we integrate and analyze experimentally optimization and imitation partially competing decision mechanisms in the model. finally  main results are summed up in section 1.
1 formal model
we follow the conceptual framework introduced by  shoham and tennenholtz  1   and the extension proposed by  delgado  1  that introduced complex networks as the underlying topology. .
1 the coordination game
a set of n agents must choose to play one of two possible actions: either a or b. accordinglyto its current action  or state  an agent interact with its neighbors receiving an outcome defined in payoff matrix g.
agent j
	a	b
 x x  u v  v u  y y agent i a
b
figure 1: payoff matrix of the game g
¡¡the payoff matrix g defines a 1-person 1-choice symmetric coordination game provided that x   v and y   u. the condition on the entries of g makes clear that to play the same action is the best choice. it is trivial to demonstrate that the game g has two nash-equilibrium  both agents playing either a or b. most previous work focused in the study of pure coordination games: where x = y = +1 v = u =  1  walker and wooldridge  1; kittock  1; shoham and tennenholtz  1; delgado  1 . in our approach we move beyond this work and allow for coordination games with equilibrium differing in social efficiency  i.e. x   y .
¡¡for simplicity we assume that coordination on action a is at least as profitable as coordination on action b: x ¡Ý y. thus  game g is defined as follows: v = u =  1  y = +1  and x = ¦Á provided that ¦Á ¡Ý 1. when ¦Á   1  coordination in b is a sub-optimal solution since there exists a paretoefficient solution that pareto-dominates b  which is  coordination in action a.
1 action selection rule and dynamics
our mas is composed of n agents that interact only with its neighbors in the social network  playing the game g once per interaction. every agent  say the kth  has memory mk that records the m last interactions of agent k. the value of the position i of the memory mk is the tuple haik pik tii  where aik stands for the action played by k  pik stands for the payoff received after playing action aik  and ti denotes the time the interaction took place. the initial action of the agents is set randomlywith a probabilityrb  which is the density of agents playing action b in the beginning.
¡¡following  shoham and tennenholtz  1  we will use the highestcumulativereward  hcr  action selection rule. intuitively hcr says: if the accumulated payoff obtained from playing a is bigger than that from playing b then keep on a  otherwise change to action b. the hcr rule is very appropriate since it provides: 1  locality: the selection function only depends on the agent's personal history. no global knowledge of the system is required  not even the payoff matrix of the game. 1  adaptability: the agent learns from its experience without assuming cognitive capabilities. these characteristics are very important in mas.
¡¡the dynamics of the system are as follows. at each time step t  an agent k is randomly activated. once the agent is activated  it plays the game g with an agent randomly chosen from k's neighborhood  say agent l. the result of the interaction is stored into agent k's memory mk  removing the oldest entry if necessary. finally  agent k must decide whether to change its action or not. to do so it uses the highest cumulative reward rule. agent k will compute the payoff received for using action s on the last m activations:
psk = pi:aik=s pik  where s = {a|b}. agent k will switch to action. agent l also carries out the memory storage and the action updating while the rest of agents remain still. the system ends once all agents play either action a or b  which means  that a convention on either a or b have been established.
1 underlying topology
to model qualitatively different interaction structures  we use several graph models that recently have been shown to have profoundly different effects on cooperation and diffusion dynamics in mas  watts and strogatz  1; albert and baraba¡äsi  1; delgado  1 . the chosen graphs are: a 
random graphs:is the number of nodes  and hki is the average connectivity  that is  the average size of node's neighborhood. random graphs have a clustering coefficient that tends to zero. the average path length grows logarithmically in function of n  the number of nodes. b  regular graphs: cnk   regular graphs display an extremely high clustering coefficient  while its average path length and diameter grows linearly. which means  for big graphs the average path length is very long  which does not agree with empirically studied networks. however  regular graphs display the close-knit property due to its high clustering coefficient  which does agree with empirical studies. c  smallworld graphs:  these are highly-clustered graphs  like regular graphs  with small average path length  like random graphs . this is the small-world property. we chose the  watts and strogatz  1  model as model of small-world graphs  where p is the rewiring probability. d  scale-free graphs:  these are graphs with a connectivity distribution p k  of the form p k  ¡Ø k ¦Ã. the connectivity degree  the number of neighbors of a node  decays as a potential law. this favors the so-called fat-tail phenomena; few nodes with an extreme high connectivity. we chose the  baraba¡äsi and albert  1  model as a model of scale-free graph.
¡¡recent studies on empirical networks show that neither regular nor random graphs appear in nature. noticing this   delgado  1  studied the effect of complex networks  small-world and scale-free networks  on the emergence of coordination and found that this class of networks were as efficient as the complete graph in terms of time to reach a convention  o nlogn  compared to o n1  from regular
	a  ¦Á = 1	b  ¦Á = 1	c  ¦Á = 1

	1.1rb	1	1rb	1	1rb	1
figure 1: ratio of conventions to action b. the x-axis is the initial density of agents playing action b: rb  ranging from .1 to .1. the y-axis is the ratio of b-conventions  that is  the number of replications that ended up in all agents playing b over the total number of replications  1 . in sub-figure a  there is no efficient convention  ¦Á = 1. in sub-figure b  and c  all agents playing action a is the efficient convention  respectively.
graphs  already shown by  kittock  1 . it is important to stress that many empirical social networks such as the collaboration network among actors  the co-authorship network of researchers on mathematics  the researchers on neuroscience and many others are classified as scale-free networks. however  for these empirical social networks the clustering coefficient found is very high: 1  1  1 respectively. let us show the clustering coefficient of graphs we will use in the experiments: 
1 and notice that empirical social networks are much more clustered than the scale-free networks yield by the  baraba¡äsi and albert  1  model. but we still use this model since scale-free models are focused in reproducing the connectivity degree rather than clustering. this fact must be kept in mind when analyzing the results and conclusions. for a comprehensive survey in complex networks see  albert and baraba¡äsi  1 .
1 hcr-model experimental results
we use a graph classification based on the clustering coefficient  regular and small-world graphs will be called highlyclustered graphs  and scale-free and random graphs will be called low-clustered graphs. for the sake of clarity we did not include results on random graphs in the figures  since they behave like scale-free graphs.
¡¡let us stress which are the key manipulations in the parameters of our model. we systematically variate the proportion of agents who initially adopt the convention b  rb   the efficiency gap ¦Á between the two conventions  and finally  the type of network  in particular its clustering coefficient  that defines the agent's neighborhood.
¡¡another thing to mention before getting into the details is that there are two clear phases: 1  all the replications converging to a  and 1  all the replications converging to b. there is as well a space between these two phases where the system converges  with some replications to a and some to b  which we call transitional space  that is wider or narrower depending on the underlying topology and ¦Á. there is a critical point rb  that sets the boundaries between the two phases; and the transitional space may be defined with an ¦Å  such that the result is: rb  ¡À ¦Å.
¡¡now  let us comment the results of the experiments on the hcr model. it is helpful to first consider the case where both conventions are equally efficient  ¦Á = 1   which is the case of a pure coordination game. the results for this case are displayed in sub-figure 1.a. when the initial number of agents playing b is less than the half of the population  that is    the system ends up establishing the convention on b. and  when the convention on a is established. the subfigure shows in particular that this result is widely independent of the network topology. it also shows that the transitionalspace is verynarrowexceptfor the regulargraphs.
¡¡this pattern changes when convention differ in efficiency. sub-figures 1.b and 1.c show the case where the payofffor action a exceeds the payoff for b  ¦Á   1 . to understand the results  consider an example.  the population follow the action follow the action a. in this case  although b is the initially chosen action for most of the agents  coordination in a is more efficient since it yields a better payoff. thus  which will be the final convention agreed by the whole population  the answer depends on 1  how much better off  more efficient  is the action a over b  denoted by ¦Á. and 1  the underlying topology. if  sub-figure 1.b  the final convention will be b when the underlying topology corresponds to a random or scale-free graph  a when having a regular graph  and can be both when having a small-world graph. by increasing the efficiency of coordination on a to ¦Á = 1  sub-figure 1.c  both small-world and regular graph converge to convention a  whereas random and scale-free graph still converge to convention b. the explanation behind the result is striking  low-clustered graphs seems very sensitive to the initial population density  whereas highly-clustered graphs behave in the opposite way  they are more sensitive to the efficiency of a particular action.
¡¡the conclusion derived from these results can be summed up as follows: low-clustered agent communities where a convention already exists will not be infected by a set of agents who play a new action  even though it is more efficient. conversely  highly-clustered agent communites can be infected by a new action if the new action is more efficient  replacing the current convention for the convention on the efficient action.
¡¡therefore  highly-clustered agent communities are more innovative  or adaptive  since a new action can be spread and finally established as a convention. the drawback would be that this community would be unstable due to its receptiveness to new action  and in the transient time needed to reach a stable new convention no coordination will exist. in contrast  low-clustered agent communities are very stable since the infection with a new convention is unlikely to happen  but on the other hand they are reluctant to adopt new actions even though they are more efficient  thus  becoming very conservative and static communities. we must remark that studies on empirical social networks have shown that these networks are very clustered  albert and baraba¡äsi  1 .
¡¡we do not provide a proof of the system's convergence. nevertheless  throughout all the simulation runs  with their corresponding replications  the system has always converged to a convention with an upper bound of o n1 .

1.1.1.1.1	1.1.1.1.1 r	r b	b
figure 1: time to converge to a convention  the value is the mean over 1 replications. the x-axis is the initial density of agents playing action b: rb  ranging from .1 to .1. the y axis is the number of interactions  steps  before reaching a convention. note the logarithmic scale. in the left sub-figure both conventions  a or b. in the right sub-figure a is the optimal convention since ¦Á = 1.
¡¡on figure 1  left   ¦Á is set to 1  therefore both conventions are equally efficient. it can we observed that the regular graph takes much longer to converge than the rest of graphs  which is completely consistent with the findings of  kittock  1  and  delgado  1 . notice the existence of peaks in rb =  in all the graphs except regular. these peaks are close to the critical point where the transition takes place. this is a typical behavior  when the system is close to a transition boundary it takes longer to converge  yeomans  1 . the regular graph  however  is a particular case since it shows a plateau rather than a peak. this is due to its wide transitional state  in which different replications of the same setting can converge to different conventions.
¡¡on figure 1  right  the convention a is more efficient that convention b  since playing action a yields payoff ¦Á = 1  when playing action b yields a payoff 1. in this case the plateau of the regular graph does not appear because its transitional space narrowed as shown in figure 1.c. thus  we see only the peaks in rb where the transition takes place rb  = {.1 .1 .1} for scale-free  small-world  and regular graphs respectively  which correspond to the transitions observed in figure 1.c. again  we observe that the convergence is more inefficient in time when the initial rb is close to rb  . it is important to remark that the regular graph has improved its efficiency in reaching the convention  that is  it is more efficient than the small-world graph when ¦Á = 1. as was shown by  young  1   convergenceto a risk-dominant equilibrium  which in our case corresponds to the paretoefficient one  is surprisingly rapid provided a close-knit  clustered  graph. the scale-free graph is always the most efficient graph in terms of convergence no matter ¦Á  however  scalefree graphs do not allow convergence to the efficient convention unless the initial number of agents playing a is very big  1% compared to the 1% needed with a small-world graph  with ¦Á set to 1 .
1 analytical model
first of all  we replace the role of past interactions stored in agent i's memory  mi  by the current state of agent i's neighbors; notice that in our model we set the memory size to the average connectivity  m = hki. instead of applying the hcr-rule over mi we will transform it as follows: let us take ks as the number of neighbors in the same state as agent i  and ks the number of neighbors in the opposite state. therefore  the update is performed if ks   ¦Õks  where ¦Õ is the payoff yield by the payoff matrix g when playing  s s . therefore  the switch from playing a to play b is done when kb   ¦Áka  since g a a  = ¦Á. similarly  the switch from playing b to play a is done when ka   kb  since g b b  = 1. the probability of updating the state is defined by equation 1  we decided to introduce some stochasticity to compensate the fact that now the update is calculated by the current state of the neighbors instead of by the interactions  as the hcr-rule does.
		 1 
   we will use what in physics is called a mean-field argument  pastor-satorras and vespignani  1 . let nb t  be the number of agents playing action b at time t  and t be the density of agents playing b. a first approach is to assume the following homogeneity condition: for every agent with k neighbors  the number of neighbors in state b is kb t  ' k¦Ñ t . this condition is completely fulfilled for random graphs  and approximately fulfilled for scale-free and small-world graphs  when p ¡ú 1 . nevertheless  this homogeneityconditionis not fulfilled for regularand for small-world graphs for low values of p. what breaks the homogeneity is the clustering coefficient  for low-clustered graphs this condition holds since the global density of agents in state s corresponds to the proportion of neighbors in state s. intuitively  the clustering coefficient can be defined as the probability that a node i and a node j have a link provided that node l has a link to both i and j. thus  when clustering tends to 1 the node's neighborhood is a good sample of the graph. however  when clustering coefficient is high the node's neighborhood is not a sample of the graph  since its neighbors form a clique  a close-knit group. therefore  we propose a new homogeneity condition that takes clustering  cc  into account. let us define cc as the clustering coefficient  providedthat cc is the probability of agent l's neighbors being also neighbors   1   cc k is the number of neighbors which are not in the l's clique  and to whom the previous homogeneity condition holds. therefore  for an agent playing a with k neighbors  the number of neighbors in the opposite state  b  is ka '  1   cc k¦Ñ t   which is the cc-biasedhomogeneity condition.
¡¡now we can write an equation for the evolution of ¦Ñ t . first  notice that the variation of ¦Ñ t  after a small time interval  t is proportional to  t  that is  ¦Ñ t +  t  =
. then  we can neglect the o  t1 
term  since we perform a continuum approximation  t ¡ú 1  and compute the variation of ¦Ñ t  as the balance between the agents switching from action a to b and the agents switching from action b to a. on one hand  the fraction of agents in a  that is  1   ¦Ñ t   that change to state b in a time interval  t is the product  1   ¦Ñ t  f ¦Ñ t   t  provided  t is small enough; on the other hand  the fraction of agents that switch from action b to a in  t is ¦Ñ t f 1 ¦Ñ t   t  also for small
table 1: fixed points ¦Ñ  of the analytical model: those are the critical point such that  ¦Ñ t = 1. in brackets the critical points observed experimentally with the hcr model  rb     figure 1 . the parameters that model the graph are the clustering coefficient cc  and the average connectivity hki set to 1.
¦Ñ  rb   ¦Á = 1¦Á = 1cc=11  1 1  1 1    1 cc=11  1 1  1 1  1 cc=11  1 1  1 1  1 cc=11  1 1  1 1  1  t. thus after  t ¡ú 1  the mean-field equation for ¦Ñ t  can be written as

¡¡after substitution of f¦Â ¦Õ to which the cc-biasedhomogeneityconditionhas beenapplied. and setting ¦Â = hki and ¦Õ =  s s  the equation reads

¡¡we want to study the stable fixed points of 1 since these will give us information on the final state of the system. thus we must find the solutions of  ¦Ñ t = 1. as we can see in 1  stable fixed points are ¦Ñ  ¡« 1  and ¦Ñ  ¡« 1  these have been computed numerically  and the unstable fixed-point lies in  1 . in table 1 we display the unstable fixed points of the density equation  which are possible critical points of the hcr model provided our assumptions  see above  are correct. furthermore  in table 1 we find a comparison between the analytical unstable fixed points and those critical points coming from the simulation of the hcr model. notice that the plausibility of the simplifying assumptions behind our analytical model is supported by the agreement between analytical and experimental results  remind that rb was sampled with a resolution of .1 .
¡¡figure 1 shows the variation in ¦Ñ  1 ¦Ñ t   for different ¦Á and cc. we can see the effect of ¦Á enlarging the basin of attraction of convention a. on the other hand cc has the effect of reducing the amount of variation due to the effects of the cc-biased-homogeneity condition. consequently  the time elapsed to reach a convention will be longer  and fluctuations in initial conditions will have a bigger impact. as a matter of fact  the experimental results on the hcr model show us these two consequences apply for highly-clustered graphs such as the regular graph. the convergence time is much higher comparedto non-clusteredgraphs. and the transitional space  where the system can converge either in b or in a for the same initial parameters  is wider.
1 the role of imitation
in this section we will modify the model based of the hcrrule introducingan imitation propensityis  which is the probability that  after a dyadic interaction where at least one agent
figure 1: study of the fixed points of the density equation
1. ¦Ñ is the density of agents playing b. clustering coefficient is set to cc = {1e  
1.1  1}  ¦Á is
 1	1	1	1	1	1 set to {1}
¦Ñ b
was playing action s  both agents end up playing action b regardless of the hcr action updating rule. by introducing an imitation propensity we model the effect of having an attractive action which more likely to be chosen. imitation is considered as the key factor of the adoption of norms  and by extension  conventions. how does the existence of an attractive action affect the final convention reached by the agents  and what if the attractive action happens to be sub-optimal  in our model coordination on action a is most efficient solution  if ¦Á   1   however  action b  if ib   1  might become a better replicator since it can be adopted by imitation as well as adopted by the learning process  hcr-rule . the effect of ib heavily depends on the clustering of the underlying topology. for instance  when ¦Á = 1 and ib = .1 the clustered communities adopts the attractive convention  b  over the efficient one  a  regardless of the initial density  rb   while non-clustered communities will still adopt a provided rb   .1. therefore  it might be derived that non-clustered communites are more resilient against attractive conventions in favor of efficient conventions. this result would seem to contradict the previous claim  that clustered communites are better off in converging to the efficient convention. however  when ib is small enough  for example when ib = .1 the opposite effect is observed  clustered communities keep on converging to the efficient convention regardless of the initial density of agents. this two-fold behavior is perfectly clear in the case of the regular graph  left column of figure 1 . there is a threshold under which the system ends up in the efficient convention  and over which the system ends up in the attractive convention. for example i b = .1 when ¦Á = 1 and the underlying topology is the regular graph. notice  that this threshold is not found in the case of the small-world graph whose clustering coefficient is high  although not so high as the case of the regular graph. however  even without the threshold we observe a similar behavior than in the regular graph although more progressive. if we compare it against the behavior of low-clustered graphs  we find again that the system is more resilient to the attractive action invasion for low values of ib. for high values  on the contrary  the system is very receptive to an invasion of agents playing the attractive action. we must state that the model is interesting for small values of ib  for high values of ib the dichotomy of the agent to choose between the efficient or the attractive action dissapear and becomes an epidemic spread model  pastor-satorras and vespignani  1 .

figure 1: effect of imitation propensity  ib  on the ratio of conventions on action b. ib ranges from  .1  in a .1 resolution  rb ranges from  .1  in a .1 resolution. the sub-figures within the figures are for the sake of clarity: setting the parameter ib we observe the evolution of b-conventions depending on rb  which correspond to the way the previous results were shown  when ib = 1 .
1 concluding remarks
our research aimed to identify conditions under which local interactions in a multi agent community can give rise to an efficient convention. we have shown that the key factor is the clustering of the underlying agent's social network. when communities are highly-clustered the system converges to the pareto-efficient action even though the initial population choosing that action was clearly a minority. this suggests that the efficient convention is a stable convention because it cannot be invaded by a set of agents playing another suboptimal action. however  a sub-optimal conventioncan be replaced by a set of agent playing an action that yields a better payoff. accordingly  when the clustering coefficient is high the system always converges to the most efficient convention and this convention is stable. on the other hand when clustering tends to zero the adopted convention depends solely on the density of agents following an action. if the majority of agents play the sub-optimal action the inefficient convention will be established  and it will be stable. to back up our findings  we provided an analytical approximation that reproduces the results observed in our model based in the hcrrule. to do so  we had to introduce a new homogeneity condition which let us work in clustered graphs  where the classical mean-field homogeneity condition is not met.
¡¡in accordance with the strong functionalism thesis from classical sociology  we found that in certain graphs the agent system was capable to find and maintain the optimum in the stable state. however  this only applies to highly-clustered communities  which resemble many empirical social networks. at the same time  our model also corresponds in two respects to the view that rational choice theorists in sociology take on social norms. first  we have shown that global efficiency arises from individual goal oriented actions. second  we found that under certain conditions optimizing individual actions fail to generate socially efficient outcomes  a problem that is central to the contemporary discussion about the emergence of conventions and norms.
¡¡to conclude  our results seem to correspond more with a rational choice on norms than with the strong functionalism thesis. we have shown that socially optimal conventions can arise from individual optimization  but there is no guarantee that this happens. in this sense  our model matches well the ample evidence of examples of suboptimal conventions  for example in market processes. we believe that a part of the explanation for this may lie in the competition between optimizing and imitation that we have addressed with our model. we have shown that imitation processes make it possible for a sub-optimal yet attractive action to overthrow the efficient action  and become stable  provided that its attractiveness is high enough to be worthy of imitation.
