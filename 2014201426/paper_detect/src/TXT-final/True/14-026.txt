determining velocity map by 1-d iterative estimation 
masahiko yachida 
	fachbereich i n f o r m a t i k   	u n i v e r s i t a e t 	hamburg 
 on leave of absence from dept. 	of control engi  	osaka u n i v e r s i t y   

i introduction 
v e l o c i t y i n f o r m a t i o n is not only important for determining v e l o c i t i e s and t r a j e c t o r i e s of o b j e c t s but also important as a cue for image segmentation. it may be used to l i n k adjacent but v i s u a l l y d i s s i m i l a r surfaces or to d i v i d e surfaces not e a s i l y separable b y s t a t i c c r i t e r i a a l o n e   l   . 
a s t r a i g h t f o r w a r d approach to o b t a i n i n g v e l o c i t y i n f o r m a t i o n is to f i n d and track prominent features by a matching method from frame to f r a m e   1   1   . these methods can estimate v e l o c i t i e s of prominent p o i n t s a c c u r a t e l y ; however  a problem of these methods is t h a t v e l o c i t i e s of only a sparsely sampled set of p o i n t s can be obtained  which are not dense enough to be u s e f u l f o r tasks such as image segmentation. 
another approach uses the fact t h a t for images of moving o b j e c t s the s p a t i a l and temporal i n t e n s i t y changes are not independent of each other and s a t i s f y a 
r e l a t i o n 
　　　　　　vx*gx+vy*gy=-dt 	 1  here  	 vx vy  	are the two components of the v e l o c i t y 	v e c t o r   	 gx gy  	represent the two components 	of 	the 	s p a t i a l 	i n t e n s i t y g r a d i e n t   	and dt represents the gray value d i f f e r e n c e between consecutive frames  	at a p o i n t 	  x   y   . 
since the s i n g l e c o n s t r a i n t of eq.  1  does not allow one to determine both components  vx vy  of the v e l o c i t y   a d d i t i o n a l assumptions are necessary. c a f f o r i o and r o c c a   1   and fennema and thompson assumed t h a t the v e l o c i t y is constant w i t h i n a region corresponding to the image of a moving o b j e c t   and applied a c l u s t e r i n g approach to determine the dominant v e l o c i t i e s in the scene. by t h i s global method  they obtained accurate v e l o c i t i e s o f o b j e c t s ; however  w i t h t h a t assumption  the method is a p p l i c a b l e only to objects which t r a n s l a t e p a r a l l e l to the image plane. horn and schunck studied a more general assumption; namely t h a t the v e l o c i t y v a r i e s smoothly. this assumption i s i n t e r e s t i n g because i t c o n s t r a i n s the v a r i a b i l i t y o f v e l o c i t i e s between neighboring points and allows one to estimate the v e l o c i t y of each point from l o c a l computation. however  the method seems to become more e f f i c i e n t and r e l i a b l e if we have some i n i t i a l estimates of v e l o c i t i e s . 
there has been no attempt to t r y to combine or r e l a t e the matching method by which accurate e s t i m a t i o n of v e l o c i t i e s  although of only a sparsely sampled set of p o i n t s   are obtained and the nonmatching method by which v e l o c i t i e s of a dense set oi p o i n t s can be estimated  but a d d i t i o n a l c o n s t r a i n t s are r e q u i r e d . in t h i s communication  we propose an approach which uses the v e l o c i t y estimates of the prominent f e a t u r e p o i n t s as r e l i a b l e i n i t i a l estimates of v e l o c i t i e s and propagates them to other p o i n t s using the c o n s t r a i n t r e l a t i o n between the neighboring p o i n t s . the v e l o c i t i e s estimated by the above method based on the local data may have errors caused by noise. to reduce or e l i m i n a t e these e s t i m a t i o n e r r o r s   we propose an i t e r a t i v e scheme which c o r r e c t s and modifies the e s t i m a t i o n from the v e l o c i t y values of the s p a t i a l and temporal neiborhood of a p o i n t . 
ii velocity estimation by propagation from  prominent points 
l o c a l c o m p u t a t i o n o f t h e v e l o c i t y i s   i n g e n e r a l   n o t p o s s i b l e s i n c e e q .   1   does n o t a l l o w one t o d e t e r m i n e b o t h c o m p o n e n t s o f t h e v e l o c i t y . t h i s w i l l b e c l e a r f r o m f i g . l w h e r e  a  shows a p a r t o f a n o b j e c t i n t h e p r e v i o u s f r a m e and   b   shows t h e same p a r t i n t h e n e x t f r a m e . i t i s n o t p o s s i b l e t o d e t e r m i n e t h e v e l o c i t y o f t h e l o c a l a r e a e n c l o s e d b y t h e r e c t a n g l e s i n c e i t c a n c o r r e s p o n d t o many a r e a s i n t h e n e x t f r a m e . however  a s shown i n f i g . 1   i t i s not d i f f i c u l t t o e s t a b l i s h c o r r e s p o n d e n c e s b e t w e e n t h e p r o m i n e n t f e a t u r e p o i n t s . once t h e s e h a v e been e s t a b l i s h e d   i t i s n o t d i f f i c u l t t o e s t a b l i s h c o r r e s p o n d e n c e s o f o t h e r p o i n t s b e c a u s e t h e c o r r e s p o n d e n c e s o f t h e f e a t u r e p o i n t s c o n s t r a i n p o s s i b l e c o r r e s p o n d e n c e s o f o t h e r p o i n t s   p r o v i d e d w e can assume t h a t t h e o b j e c t i s r i g i d and t h u s v e l o c i t i e s v a r y s m o o t h l y . 
1 

1 

eq.   1   . we o b t a i n the newly estimated v e l o c i t i e s at every p o i n t f o r every f r a m e   t * 1   . . .   n . this newly estimated 
sequence 	of 	v e l o c i t y 	maps  
v   x   y   t     t * 1   . . .   n     is again used as input for the next i t e r a t i o n . this process is i t e r a t e d u n t i l major changes do not occur in the sequence of v e l o c i t y maps. 
fig.1 shows some examples of the r e s u l t s . 
acknowledgement 
the author thanks h.-h. nagel f o r h i s support  encouragement and discussions f o r t h i s work  b. neumann for very nice i n t r o d u c t i o n t o the l a b o r a t o r y f a c i l i t i e s and software and members of k o g n i t i o n group of u n i v e r s i t a e t hamburg f o r t h e i r f r i e n d l y and timely suggestions to the l a b o r a t o r y f a c i l i t i e s a i d software. he also thanks to humboldt foundation for t h e i r h o s p i t a b i l i t y 
 under 	whose 	support 	t h i s 	work 	was performed. 
