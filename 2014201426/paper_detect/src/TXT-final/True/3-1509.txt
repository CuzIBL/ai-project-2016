
we propose a new algorithm for finding a target node in a network whose topology is known only locally. we formulate this task as a problem of decision making under uncertainty and use the statistical properties of the graph to guide this decision. this formulation uses the homophily and degree structure of the network simultaneously  differentiating our algorithm from those previously proposed in the literature. because homophily and degree disparity are characteristics frequently observed in real-world networks  the algorithm we propose is applicable to a wide variety of networks  including two families that have received much recent attention: small-world and scale-free networks.
1 introduction
in a well known study  travers & milgram  asked individuals in boston  massachusetts and omaha  nebraska to deliver a letter to a target person in boston  using an unconventional method: the letters were to reach the target person through a chain of acquaintances. the person starting the chain and all subsequent recipients of the letter were given some basic information about the target-including name  address  and occupation-and were asked to forward the letter to someone they knew on a first name basis  in an effort to deliver the letter to the target person with as few intermediaries as possible. of the 1 letters that were distributed  1% reached the target  with a median chain length of six.
¡¡these findings revealed two surprising properties of the social network-that short paths exist between seemingly unconnected individuals and that people are able to find them- and raised a number of questions: how do people perform this type of search  what properties of the social network make it searchable  and in their presence  how can we search a network efficiently  in this paper we address this last question and present an algorithm for efficient decentralized search in a class of networks that exhibit the properties of the social network of acquaintances.
¡¡at the time  the task faced by the participants in the travers & milgram study-searching for a target node in a large network whose topology is known only locally-was highly artificial  designed only to explore the structure of the social network of acquaintances. today  it appears naturally in various contexts. for example  a similar task is performed when people and focused crawlers  diligenti et al.  1; chakrabarti et al.  1  search for information in the world wide web by following links. the same is true of search protocols that form the backbone of decentralized peer-to-peer file sharing systems such as gnutella and freenet  clarke et al.  1  that lack a central server to answer queries.
¡¡if decentralized search is to succeed  it is essential that the underlying network possess some form of structure that can guide the search. the acquaintance network has at least two characteristics that create such structure. the first is homophily  the tendency of like to associate with like  in other words  the tendency of attributes of connected nodes to be correlated-people tend to be acquainted with other people who live in the same geographical area or who have the same occupation. the second characteristic is degree disparity- some people have more acquaintances than others and may act as hubs that connect different social circles. consideration of homophily gives rise to a message-passing algorithm that favors the neighbor that is the most similar to the target node  e.g.  an acquaintance who lives in boston  if the target person lives in boston   kleinberg  1a; 1b; 1; watts et al.  1   while consideration of degree structure gives rise to an algorithm that favors the neighbor with the highest degree  adamic et al.  1 .
¡¡building on the insights gained by this recent body of research  we propose a new message-passing algorithm- expected-value navigation  evn -for decentralized search in networks. our formulation of the problem is fundamentally different from prior approaches in that it considers the entirety of the factors that may influence the effectiveness of the search. we cast the problem faced by each node in the message chain as a decision making task under uncertainty  in which the objective is to minimize the expected length of the search path. this decision is guided by the statistical properties of the graph  in which both homophily and degree play a role. all prior algorithms have essentially used only part of the available information.
¡¡because homophily and degree disparity are characteristics frequently observed in real-world networks  evn is applicable to a wide variety of networks. we emphasize two families that have received much recent attention: small-world and scale-free networks.
¡¡small-world networks are loosely defined as a family of graphs with a combination of three properties that distinguish them from other graph families  e.g.  random graphs  fully connected graphs  and regular graphs : weak connectivity  strong clustering  and small diameter. many real world networks show the small-world structure  including the world wide web  the electrical power grid of the western united states  the collaboration graph of hollywood actors  and the neural network of the nematode worm c. elegans  watts and strogatz  1 . these networks  by definition  connect most node pairs by short paths  and evn may be particularly well suited for finding them as the small world structure may arise from homophily  kleinberg  1b .
¡¡scale-free networks are those networks with a power-law degree distribution  which means that the probability of a given degree k is proportional to k ¦Â  where ¦Â is a parameter known as the degree exponent. most nodes in such networks have only a few edges  but a few nodes have much higher degree. many small-world networks are scale-free  barabasi and albert  1 .
¡¡the remainder of this paper is organized as follows: we first provide a review of the relevant literature. we then present our formulation of the search problem  describe the algorithm we propose  and evaluate it on a collection of synthetic and real-world networks. we conclude with a discussion of our experimental results and directions for future research.
1 previous work
a number of message-passing algorithms have been proposed for conducting decentralized search in networks  in which each node receiving the message forwards it to one of its neighbors until the target is found. based on the decision criteria they use in selecting a forwarding node  these algorithms can be categorized as follows:
  degree-based-the decision is based on the degree structure of neighboring nodes.
  similarity-based-the decision is based on how similar the neighboring nodes are to the target node in terms of attribute values.
1 degree-based navigation
adamic et al.  proposed an algorithm that forwards the message to the highest-degree neighbor that has not seen the message. on a scale-free network with degree exponent 1  in which nodes knew their immediate neighbors and their neighbors  this algorithm performed fairly well. most nodes were easy to find-about 1% of the target nodes were found within 1 hops in a 1 node network-but a small proportion of nodes required a much larger hop count. similar results were obtained on a 1-node subgraph of the gnutella peer-to-peer file sharing system  which showed a power-law degree distribution with exponent 1. the algorithm  however  was not effective on networks with poisson degree distribution.
1 similarity-based navigation
in similarity-based navigation  nodes forward the message to the neighbor that is the most similar to the target node  given a number of attributes on nodes and a similarity metric. this type of search relies on network homophily. under some conditions  similarity among attribute values of neighboring nodes provides an approximation to a universal gradient that allows short paths to be identified from only local information.
¡¡the first algorithmic analysis of similarity-based navigation was performed by kleinberg  1b; 1a  on a simple network motivated by the geographical distribution of acquaintances. this network had nodes on a two-dimensional lattice; each node was connected to all other nodes within a given lattice distance and also to a number of additional nodes across the grid. the probability of a connection of the latter type was proportional to the lattice distance between the nodes raised to the power  ¦Á  where ¦Á is a model parameter called the clustering exponent. in this network  similarity between nodes is defined by their lattice position  and the clustering exponent controls the homophily in the graph: when ¦Á = 1  long-range contacts are uniformly distributed on the grid; as ¦Á increases  long-range contacts become more and more clustered in the node's vicinity.
¡¡kleinberg showed that when ¦Á = 1  similarity-based navigation achieves an expected path length bounded by a polylogarithmic function  i.e.  a polynomial function of the logarithm  of the number of nodes  and that ¦Á = 1 is the only clustering exponent at which a polylogarithmic bound on path length is possible. these results generalize to d-dimensional lattices for d ¡Ý 1  with the critical value of ¦Á = d.
¡¡kleinberg  later proved similar results for two other network models that defined node similarity differently  but as in his first model  the link probabilities were a function of the similarity between the nodes and a parameter that controls the degree of homophily in the graph. in both of these models  there was a critical value of the homophily parameter that allowed similarity-based navigation to achieve a search time polylogarithmic in the number of nodes  and for all other values of this parameter  a polylogarithmic upper bound was not possible.
¡¡similarity-based navigation was also explored by watts et al.    who proposed a hierarchical model of society and a homophily structure that measured similarity with distance in this hierarchy. the authors explored the influence of the number of hierarchies and the homophily parameter on the searchability of the network and found that similarity-based navigation was effective for a large region of the parameter space.
1 proposed algorithm: expected-value navigation
we propose a message passing algorithm that builds on the strengths of the algorithms discussed above. we derive this algorithm by formulating the problem as a decision making task under uncertainty  in which the goal is to minimize the expected path length to the target.
¡¡the expected value of the path length lst from neighbor s to target t is a weighted sum of all possible path lengths:
	e lst  = ¡Æi¡¤p lst = i 	 1 
 i
¡¡we assume that in computing this expected value the following information is available: a list of nodes that have already seen the message  the properties  i.e.  degree and attribute values  of neighboring nodes and of the target node  and the known  or estimated  homophily structure of the graph-in other words  a statistical relationship between node similarity and probability of a link. this last piece of information allows us to compute the probability that a given neighbor links to the target node.
¡¡we approximate the entire series in equation 1 using only the first two terms  which are easy to compute given the information available. this estimate captures much of the necessary information because there is no need to know the exact value of the expectation  only whether it is lower than the expectation computed for another neighbor.
¡¡if one of the neighbors is the target  this neighbor has e lst  = 1  the lowest possible value. otherwise  the node for which the second term in the series is the highest minimizes our estimate of e lst -the larger the probability of a path length of one  the smaller the probability of larger path lengths  and in general  the smaller the expected path length. note here that for a neighbor that has already seen the message  the second term in the series is zero-we know with certainty that it does not link to the target  otherwise it would have forwarded the message to the target and completed the search.
¡¡this gives rise to the following algorithm: if one of the neighbors is the target node  forward the message to this node. otherwise  forward the message to the unvisited neighbor with the highest probability of having a direct link to the target. if all neighbors have been visited  forward the message to a randomly selected neighbor.
¡¡we call this algorithm expected-value navigation  evn   based on its method of node selection. if the network shows no homophily  i.e.  if links are formed independently of node similarity  or if attributes are not available  evn reduces to the degree-based navigation of adamic et al. . on the other hand  if degree information is unavailable or if all nodes have equal degree  evn reduces to similarity-based navigation that avoids visited nodes when possible.
¡¡in order to apply evn in a given network  one needs to compute or estimate the probability that a link exists from one node to another  given the attribute value and degree of both nodes. we estimate this probability assuming that each link is placed independently of the others. for a link from node s to node t  the desired probability pst can then be computed by subtracting from 1 the probability that none of the links that originate at s ends at t:
	pst = 1  1 qst k	 1 
where qst is the probability that the first link from s ends at t  and k is the out-degree of node s. this is one of the simplest estimators that uses information on both homophily and degree-the underlying assumption of independent links is violated in the networks we consider-but our results show that it performs remarkably well.
1 experimental evaluation
we evaluated evn on a collection of synthetic and realworld networks  comparing its performance to three other message passing algorithms: similarity-based  degree-based  and random navigation. these algorithms treat visited neighbors similarly-ignoring them in the presence of unvisited neighbors  and selecting randomly among them otherwise- but differ in how they select among unvisited neighbors. similarity-based navigation selects the one most similar to the target node in attribute value  degree-based navigation selects the one with the highest degree  and random navigation selects randomly. if more than one neighbor satisfies the criteria  all algorithms select randomly among them.
¡¡it is possible to construct other variations of similaritybased  degree-based  and random navigation that differ in how they treat visited neighbors. for instance  the algorithm may ignore prior visitations  or only avoid the last visited node. the versions described above consistently outperformed these variations in our simulations; we therefore do not discuss them any further.
¡¡in addition to these four algorithms  we also present the performance of an optimal global algorithm  which returns the shortest path length from source to target if it is less than the number of hops allowed. the performance of the optimal algorithm is a ceiling for the other algorithms-if there is no short path  no algorithm can find it.
¡¡we present four performance measures: proportion of successful searches  prop   mean path length when successful  path   median path length when successful  median-path   and mean optimal path length when successful  opt-path . the last measure indicates the difficulty of the search tasks an algorithm succeeds at  and is useful when comparing mean path lengths of different algorithms-if one algorithm is able to succeed at more difficult search tasks than another one  the mean path lengths are not directly comparable.
1 synthetic networks
we considered directed networks with two types of outdegree distribution: power-law and poisson. we defined a single attribute on each node  which was distributed uniformly in the interval  1 . each network had 1 nodes; nodes with out-degree higher than 1 were not allowed. search was terminated after 1 hops if the target was not reached.
¡¡the number of outgoing links from each node was determined based on the out-degree distribution of the graph. for a link originating at node s  the probability of linking to node t was proportional to fst  the preference between the two nodes  which we defined as follows:
	fst =  max{|as  at|  1}  r	 1 
where as  at are attribute values on nodes s and t  and r is a
homophily parameter. the max term puts a bound on the preference values-in its absence  the preference between two
1.1	1	1.1
homophily parameter

	1	1
path length when successful
	1.1	1	1.1
homophily parameter

figure 1: performance on scale-free networks with degree parameter 1.1	1	1
¡¡
nodes may be arbitrarily large  as two attribute values may be arbitrarily close.
¡¡when r is zero  the graph shows no homophily-a link originating from a given node is equally likely to end at any other node. as r grows  links become more likely to connect nodes with similar attribute values. the findings in kleinberg  1b  suggest that small values of r give rise to a homophily structure too weak to guide the search effectively  while large values of r give rise to a graph structure that does not contain short paths.
¡¡in applying evn in these networks  we used pst = 1  1  fst/ ¡Æ j fsj  k  which was obtained from equation 1 by substituting qst with fst/¡Æ j fsj  the ratio of the preference between nodes s and t to the sum of preferences from s to all nodes in the network. in applying similarity-based navigation  we considered all neighbors within 1 of the target to be equally close  to account for the presence of the max term in equation 1.
networks with power-law degree distribution
we considered power-law distributions with degree parameters ranging from 1 to 1. this range includes the distributions most frequently observed in real-world networks. the homophily parameter ranged from 1 to 1. each possible combination of degree parameter and homophily parameter was evaluated on 1 randomly generated networks  unless noted otherwise   with 1 randomly selected search tasks in each network.
¡¡figure 1 shows performance on scale-free networks with degree parameter 1. in addition to prop  path  and optpath  this figure also presents the frequency of path lengths when the homophily parameter was 1  1  and 1. while similarity-based navigation was effective for large values of the homophily parameter and degree-based navigation was effective for lower values  evn was effective with over 1% success rate for all values of the homophily parameter and returned shorter path lengths than the other algorithms.

	 g 	 h 
figure 1: performance of evn on scale-free networks. the first row shows the proportion of successful searches by evn divided by that of  a  optimal   b  degree-based  and  c  similarity-based navigation; the second row shows mean path length  when successful  for evn divided by that of  d  optimal   e  degree-based  and  f  similarity-based navigation; the third row shows mean opt-path of evn divided by that of  g  degree-based and  h  similarity-based navigation.¡¡figure 1 shows performance on scale-free networks with varying degree parameters. the data points in this figure show mean values in 1 randomly generated networks. evn was effective under a wide range of parameter settings and consistently outperformed both degree-based and similaritybased navigation. evn succeeded at more difficult search tasks than degree-based navigation  as measured by opt-path  while returning considerably shorter path lengths. evn and similarity-based navigation performed similarly in opt-path  but evn returned shorter path lengths. the proportion of successful searches was higher for evn than for both degreebased and similarity-based navigation.
networks with poisson degree distribution
similar experiments were conducted on networks with a poisson degree distribution with a mean out-degree of 1  which approximately equals the mean degree in the scale-free networks that were tested.
¡¡figure 1 shows performance results. the figure reveals that similarity-based and degree-based navigation were not effective in these networks  succeeding in less than half of the search tasks for all values of the homophily parameter. evn returned a higher proportion of successful searches than both degree-based and similarity-based navigation; the difference was substantial for a large range of values of the homophily parameter. evn was most effective with homophily parameter values close to 1.
¡¡the path results shown in figure 1 may seem counterintuitive  with random navigation returning the lowest values for most values of the homophily parameter. recall  however  that path refers to the mean path length in successful searches  so the mean path lengths are not directly comparable-random navigation returned the lowest path values  but it succeed in only the easiest search tasks as measured by opt-path. the opt-path results show that evn succeeded at more difficult search tasks than both degree-based and similarity-based navigation. furthermore  evn returned considerably shorter path lengths than degree-based navigation  despite succeeding in more difficult search tasks.
robustness of evn
in estimating link probabilities  we used the sum of preferences from a given node to all other nodes in the network.

figure 1: performance on networks with poisson degree distribution.this sum is a normalizing constant that may be thought of as an indicator of network size-it is the sum of similar contributions from all nodes. in experiments we presented so far  we used the exact value of this global constant. dependence on such global information is clearly not desirable for a decentralized algorithm.
¡¡a number of methods for decentralized estimation of global network parameters exist  but all produce local variance in the estimates. such variance poses little problem for decentralized search algorithms such as evn  however  because each decision is made locally  and thus estimates of the constant on different nodes need not be consistent. however  serious problems could arise if bias in estimates of the constant degraded the searchability of the network.
¡¡we repeated the experiments reported on scale-free networks with degree parameter 1 by distorting the normalizing constant with a multiplier of 1  1  1  1  1  and 1 for all nodes in the network. because each node makes its decisions independently of the other nodes  that the constant was distorted in the same way for all nodes is irrelevant. no performance decrements were observed in either performance measure  except when the multiplier was 1 or 1. performance decrements for such low values of the multiplier are not unexpected-in these cases  the nodes operated in a 1 node network  but made decisions as if the network had only a single node or ten nodes. we expect that such poor estimates of the normalizing constant would be avoided easily in practice.
1 scientific citation network
we next present results on a real-world network: a citation graph of scientific papers. the nodes in our network were papers from the theoretical high-energy physics  hep-th  area of arxiv.org  an on-line archive of research papers. we included in our network papers that were published in 1 and had more than 1 non-self citations. the network included 1 nodes and 1 links.
¡¡decentralized search in this citation graph is an artificial task-though it does resemble searching for a particular piece of information before the advent of search engines-but the results are useful in evaluating the applicability of evn to a network that evolves naturally over time  with no known patterns of link formation.
¡¡we treated the citation graph as an undirected network  defining node similarity using paper titles and abstracts. the title and abstract of each paper were represented as weightedterm vectors using tfidf  term frequency ¡Á inverse document frequency  weighting. paper similarity was computed using a standard cosine correlation measure. we discretized this continuous similarity measure and for each discrete value it took  estimated qst in equation 1 in a straightforward manner from the network.
¡¡we conducted 1 randomly selected search tasks  terminating them after 1 hops if the target was not found. table 1 shows our performance measures; figure 1 shows the distribution of path lengths returned by each algorithm. similarity-based navigation was not effective in this task  while degree-based navigation was competitive. evn performed better than both in all performance measures. further comparison of evn and degree-based navigation revealed that evn succeeded at all search tasks for which degreebased navigation failed and that there were no search tasks in which degree-based navigation succeeded but evn did not. in those search tasks for which both algorithms succeeded 
1% of the time evn returned a shorter path than degree-
algorithmproppathmedian-pathopt-pathrandom111.1similarity-based111.1degree-based111.1evn111.1optimal111.1table 1: performance on hep-th citation graph.

figure 1: path length distributions in hep-th citation graph.
based search  mean difference in path length = 1 ; 1% of the time degree-based search yielded a shorter path than evn  mean difference in path length = 1 ; 1% of the time evn and degree-based search returned paths of same length.
¡¡we next analyzed the sensitivity of the algorithm to the qst values  which were estimated using the entire graph. we distorted qst values  for each discrete value of node similarity  by multiplying them by 1  1  1  and 1. the performance measures were essentially unaffected-they were all within 1% of their values reported above.
1 discussion
we presented a simple and principled algorithm for decentralized search in networks that show homophily and degree disparity. our formulation of the problem allows one to consider all factors that may influence search performance. in that  it differs fundamentally from previous work in this area  while providing a unifying framework for existing algorithms  which are special cases of the algorithm we present here. experimental results on a collection of synthetic and real-world networks indicate that our algorithm performs remarkably well  though it may be possible to achieve even better performance by using more sophisticated estimates of the statistical quantities involved.
¡¡the utility of our approach depends on the availability of statistical information regarding the relationship between node similarity and link formation. this information is typically available when a network is designed by an analyst who establishes the rules on how the network evolves over time  e.g.  zhang et al.  . but we expect that this type of information would also be easy to obtain in other types of networks.
acknowledgments
we would like to thank jennifer neville for providing the data on the hep-th scientific citation graph and to cynthia loiselle for providing comments on earlier drafts of this paper. this research is supported by nsf and lawrence livermore national laboratory  llnl  under contract numbers hr1-1 and w-1-eng-1. the u.s. government is authorized to reproduce and distribute reprints for governmental purposes notwithstanding any copyright notation hereon. the views and conclusions contained herein are those of the authors and should not be interpreted as necessarily representing the official policies or endorsements either expressed or implied  of nsf  llnl  or the u.s. government.
