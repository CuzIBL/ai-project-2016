 
　　　music transcription is a significant problem in machine perception. the system discussed in this paper  mana. takes as input either the sound of a recorded performance  or data captured using a musical keyboard. it produces conventional musical notation as output. it has successfully handled pieces ranging from 1th-century piano music to improvisations on conga drums  in the afrocuban style. 
　　　the paper describes the key ideas and techniques found in the temporal analysis component of mana  the goal of which is to assign a rhythmic value to each note played. 
　　　perception seems to result from the interplay of sensory evidence and pre-existing mental structures  datadriven agents pitted against model-driven agents in the formation of hypotheses that seem tolerable to our prejudices and not too distant from the data. to this first order view one must add a second order one  which allows the system to notice patterns among partially elaborated hypotheses  and to use these patterns to alter confidence ratings  according to  peer pressure  rules. 
　　　concerning the use of multiple criteria for hypothesis evaluation and pruning  which necessary in the context of perception systems  it is argued that the use of partial orders over multi-dimensional spaces of natural criteria yield more robust methods that approaches based on combining criteria down to scalars. 
	i 	introduction 
an ongoing research project at ccrma  stanford 
university  is concerned with exploring an ai approach to the recognition of musical structures in sound and other forms of data. the effective integration of numerical processing and symbolic processing towards the goal of machine perception is a central technical theme  while music transcription is the task goal. 
　　　automatic transcription from sound is clearly more difficult than transcription from keyboard strokes. it requires  prior to the musical analysis which is needed in both cases  an initial stage of acoustic analysis. further refinements may be obtained by feeding information gathered from the musical context back to acoustic levels of the analysis system. 
　　　it is perhaps less obvious that transcription from keyboard strokes alone presents a significant challenge. the problem is trivial if one either forbids expressive performance and rhythmic complexity  requiring strict metronomis accuracy in timing; or if one accepts musically absurd  but physically accurate  transcriptions  as may be obtained by setting the tempo and the metrical grid resolution to fixed values  and rounding durations to the nearest grid point. but one should keep in mind that  for example  an eighth note  1 of a beat  may be played shorter than a triplet eighth  1 of a beat  without confusing human listeners  provided the appropriate musical context. how to provide sufficient context mechanisms to reach correct decisions  often in spite of the physical evidence  without carrying context-driving to excess  may well be the most sensitive question in the design of robust perception systems. 
　　　in this paper  the discussion will be limited to the musical analysis component of mana  and further restricted to the temporal aspects of the analysis. the reader is referred to  f1a-b  sch1  for a discussion of acoustic analysis  and to  ciia1  m1  for a more comprehensive account of the methods used in musical analysis. section ii of the paper provides an overview of the system  and presents some of the key ideas and techniques used in temporal analysis. section iii discusses some of the problemsolving strategies whose compounded effect is a carefully measured dose of context-driving. section iv draws some conclusions and outlines the direction of future research  in which learning issues will play an increasing role. 
	ii 	musical analysis 
　　　the performance goal initially set for the system was to exhibit a fair degree of musical wisdom while transcribing expressively played 1th-century music. the input was restricted to a single musical voice. a first redesign of the temporal analysis permitted opening up the range of musical styles without having to train specific styles into the program. another redesign  which is is progress  is aimed at dealing with polyphonic sound. however  the system as discussed here only with one voice at a time 
　　　further progress towards increased grasp of the musical structure. including more robust methods for tempo tracking and meter determination  require moderately powerful learning techniques  of the  unsupervised  type. the idea is to uncover the most significant musical patterns in a piece  and to use the temporal patterns of pattern occurences as hints to the tempo and meter. near-misses also offer important possibilities  notably for error detection  near-missed to initiate self-doubt. 
a rational approximation generation 
　　　note values  metrical intervals and metrical positions are rational numbers  expressed in terms of a reference unit. given  say  a note duration x and the duration r of the metrical reference unit  both in seconds  one wishes to generate rational approximations of x/r as candidate note values for the given note  in terms of the given unit. the choice of rational approximations must take into account at least two criteria: closeness to the data  or fit   and simplicity of the fraction. the latter must be understood in terms of how simple or natural the resulting musical notation would be. the techniques of multi-criteria filtering  section iii-b  come into play at this point  to limit the number of answers retained. 
　　　the program relies on the same generator for a variety of different tasks  but it varies parameters such as the set of acceptable numerators and denominators  and the error thresholds. the most obvious use is in the generation of hypotheses for individual note values. there are others  and they use different tunings. 
　　　finally  the complexity measure for metric fractions is allowed to change over time. for example  fractions such as 1 and 1 may become simpler than 1 or 1 after sufficient statistical evidence of ternary meter has been gathered. this is an applications of peer pressure  cf. illa . 
b approach to the rhythmic value problem 
　　　the goal is to express note values as rational fractions of a  whole note. it turns out that this goal must be approached in a round-about manner  which goes in 1 steps as follows:  a  choose a reference unit r;  b  express note values as fractions of a reference unit r;  c  analyze the patterns of note values in order to determine values for metrical divisions like beat  bar and  at least  the whole note; and  d  convert from r-values to whole-note values. 
problem  b  is the rhythmic value problem. problem 
 c  is the meter problem  which is not discussed here. from a formal point of view  it appears that the value of r n step  a  is arbitrary. this is not so: the behavior of the rational approximator depends very much on the reference unit used. a first set of rules is used to determine r. statistical clustering of note values plays a role there. 
　　　the next key idea is to localize the problem  to regions where the tempo is supposedly held constant. this factors out the global tempo fluctuation  which can be represented by a piecewise linear correspondence between musical time and physical time. the slope of each linear segment is a tempo value  and the list of successive segments is regarded as the tempo line of the piece. a second set of rules  based on simple rhythmic and melodic patterns is used to determine the structural anchors. these notes are singled out as likely candidates to occupy strong positions in the  as yet undetermined  metric grid. for instance  these notes might occur at downbeats  or at least at beat boundaries. the endpoints of the tempo line segments  on the physical time axis  are placed at these structural anchor points. 
　　　a third set of rules determines the metrical duration of each tempo line segment  in terms of r. this completes the construction of the tempo line. once the tempo is known within each segment  it is possible to use the rational approximation generator to associate with each note a set of candidate rational values  in terms of r. among the combination of approximations which add up to the desired metric length it is possible to select one that represents the best compromise between musical simplicity and closeness to the data  for this segment. 
　　　in terms of search paradigms  choosing the tempo line before assigning individual note values is a special case of solving a problem in a much smaller abstract space. once an 
	b. mont-reynaud 	1 
abstract solution s is obtained  one returns to solving the original problem under the constraints imposed by s. 
	i l l 	problem-solving strategies 
　　　mana operates primarily in a bottom-up fashion  but it does use top-down constraints. the important point is that very few a priori top-down constraints are used. in other words  the program tries to refrain from having too strong a notion of what music  must  be like. on the other hand  a posteriori constraints are heavily relied upon. such context-driving operates in a top-down manner  but the context is acquired during previous bottom-up hypothesis generation. the idea is to promote homogeneity  or selfconsistency. in other words  the program operates under the assumption that a piece defines its own  style  and then wants to see more of the same  style . this feedback mechanism  termed peer pressure  is further examined in section iii-a. 
　　　instead of backtracking  the system relies on a multiple-value technique  whereby a set of alternatives is operated on parallel. techniques of multi-criteria filtering  cf iii-b  are used to to prune the sets of alternatives whenever evaluation criteria are added or modified. 
a 	peer pressure 
　　　the system uses several levels of abstraction in its description of the data. it combines data-driven and context-driven methods of hypothesis generation and evaluation. data-driven methods use features obtained at one level to generate hypotheses at the next level. contextdriven methods use information gathered at higher levels to re-evaluate and possibly re-generate lower-level hypotheses. a key problem is to arrange that feedback loops between the bottom-up and top-down modes either converge rapidly  either to a stable consensus  or to no effect at all. this problem is adressed by the peer pressure strategy  a method that allows a collection of hypotheses  obtained using statistics  clustering or pattern discovery methods  to promote hypotheses with similar contextual features. 
　　　using rather broad terms here  let us call  data  some collection of hypotheses at a given level of description  and  partial model  some description of the the set of data. the partial model might be a set of patterns found in the data  or a statistical summary of some aspect of the data. 
　　　peer pressure  which may be viewed as a noise reduotion technique  operates in two steps. the first step extracts a partial model from the data. the model must be  safe  before proceeding: under poor conditions  peer pressure may amplify noiset the second step modifies the data to create a better agreement with the partial model. each data point is re-examined in terms of this agreement. 
if the agreement is weak  the data point becomes a candidate for modification  that is  deletion  replacement by one or more other data points  or simple adjustment. strong patterns always get stronger by the use of this technique  which decreases the perceived disorder in the interpretation of the data. 
b 	multi-criteria filtering 
　　　in an attempt to achieve robustness over a wide range of examples and styles. mana relies on a variety of independent methods for hypothesis generation  and also on a multiplicity of evaluation criteria. rather than using backtracking  mana usually carries a small number of 1 b. mont-reynaud 
hypotheses in parallel. excessive pruning of a set of hypotheses  most likely to occur during early stages of analysis  may cause a system to overlook a good solution whose value is not yet obvious at that stage of the game. too little pruning  on the other hand  not only slows things down  but leaves noisy points which may affect the operation of peer pressure. thus  it is important to maintain a balanced degree of indecision. 
　　　in a multiple-criteria situation  a popular approach is to use a weighting scheme to produce a scalar from all the criteria. mana considers this method to be one of last resort  as it all too often leads to erroneous decisions. trying to improve the approach by making the weighting scheme dependent on context leaves the problem unchanged for initial decisions  which must be made before sufficient context is established. it also forces one to develop ways of changing the weights as a function of context  a rather hazardous enterprise. 
　　　it seems better to deal with the original multiplicity of criteria directly  especially during pruning stages. the intuition behind the scheme we use is quite simple: if hypothesis a is no worse than hypothesis b in any of the criteria  and better in at least one criterion  then  and only then  b should be pruned. this idea immediately generalizes to an arbitrary partial orderings in the space of criteria. we say that an hypothesis is dominated if it is larger than some other hypothesis  with respect to the chosen partial ordering. undominated hypotheses are those that correspond to minimal elements in the space of criteria. they are the only ones retained past a pruning stage. 
　　　since the retained hypotheses are minimal in the partial ordering  they trade one criterion for another: one hypothesis might be close to the observed data while the other is simpler but farther away  and a third is intermediate in both respects. the scheme is uniform  but leaves much flexibility in the choice of the partial ordering. in our application  this technique has been found extremely effective. 
	iv 	conclusions 
　　　elements of a methodology for achieving robustness in perception tasks have been gathered  along with some ideas more specific of the transcription domain. in terms of performance  the automatic transcription system described has also produced some rather interesting results. naturally  there is much more work to be done  both to improve robustness in single-voice examples  and to deal with polyphonic data. 
　　　experiments underway suggest that the response to these challenges will be based on  a  extending the use of adaptive feedback strategies into the acoustic levels of the system  so that signal processing and reasoning work handin-hand  and  b  developing the techniques for pattern discovery and selection to the point where second-order patterns become a reliable source of information. 
　　　in fact  in the process of this research  it has become more and more apparent that the musical domain provides an ideal setting for in-depth studies in machine perception and machine learning. statistical pattern recognition and unsupervised inductive learning  mic1  both have important roles to play in a flexible musical understanding system. 
