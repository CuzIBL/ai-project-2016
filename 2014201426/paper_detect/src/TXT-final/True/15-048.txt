 
	we 	present 	csrl 	 conceptual 	structures 
representation language  as a language to f a c i l i t a t e the development of expert diagnosis systems based on a paradigm of  cooperating diagnostic s p e c i a l i s t s .   mdx  the medical diagnosis system that has been developed in our laboratory over the past few years is based on t h i s paradigm. in our approach  diagnostic reasoning is one of several generic tasks  each of which c a l l s for a p a r t i c u l a r organizational and problem solving s t r u c t u r e . a diagnostic s t r u c t u r e is composed of a 
c o l l e c t i o n of s p e c i a l i s t s   each of which corresponds to a node or  concept  in a diagnostic hierarchy  e . g .   a c l a s s i f i c a t i o n of diseases. a top-down strategy called e s t a b l i s h - r e f i n e is used in which either a s p e c i a l i s t establishes and then refines i t s e l f   o r the s p e c i a l i s t r e j e c t s i t s e l f   pruning the hierarchy that it heads. csrl is a language for representing the concepts of a diagnostic hierarchy and for implementing the e s t a b l i s h - r e f i n e process. the body of a concept specifies how it w i l l respond to d i f f e r e n t messages from i t s superconcept. the knowledge to establish or r e j e c t a concept is factored i n t o knowledge groups  which correspond to s p e c i f i c decisions in the diagnosis. we also introduce the concept of a 
family of languages in which d i f f e r e n t languages f o r diagnosis are designed for d i f f e r e n t kinds of end users. 
	i 	i n t r o d u c t i o n 
   many kinds of problem solving for expert systems have been proposed w i t h i n the ai community. whatever the approach  there is a need to acquire the knowledge in a given domain and implement it in the s p i r i t of the problem solving paradigm. reducing the time to implement a system usually involves the c r e a t i o n of a high level language which r e f l e c t s the intended method of problem s o l v i n g . for example  emycin was created for b u i l d i n g systems based on mycin-like problem s o l v i n g . such languages are also intended to speed up the knowledge a c q u i s i t i o n process by allowing domain experts to input knowledge in a form close to t h e i r conceptual l e v e l . another goal is to make it easier to enforce consistency between the 
　　currently at knowledge systems area  xerox parc  1 coyote h i l l rd. f palo a l t o   ca 1 usa expert's knowledge and i t s implementation. in t h i s paper  we present csrl  conceptual structures representation language  as a language to f a c i l i t a t e the development of expert diagnosis systems based on the mdx approach to diagnostic problem solving   1   1     an approach that has been developed in our laboratory over the past few years. in a d d i t i o n   we introduce the concept of a family of languages in which d i f f e r e n t languages are designed f o r d i f f e r e n t kinds of end users. 
   f i r s t   we w i l l overview the r e l a t i o n s h i p of mdx to our o v e r a l l theory of problem solving types  the diagnostic problem solving that underlies mdx  and the differences between our approach and the knowledge base/inference engine approach. we then present csrl in r e l a t i o n s h i p to diagnosis and i l l u s t r a t e many of i t s constructs. next  we 
discuss the family of languages concept. f i n a l l y   our immediate plans for using csrl are l i s t e d . due to space l i m i t a t i o n s   some understanding of how mdx performs diagnosis is assumed. 
	ii 	overview of mdx 
a. 	types of problem solving 
   our group at ohio state has been concerned w i t h how knowledge is organized f o r expert problem s o l v i n g . we propose that there are well-defined generic tasks each of which c a l l s for a p a r t i c u l a r organizational and problem solving s t r u c t u r e  . some tasks that we have i d e n t i f i e d are diagnosis  consequence f i n d i n g   and knowledge-directed data r e t r i e v a l . the knowledge of a given domain that applies to a given task can be compiled i n t o a knowledge s t r u c t u r e which is tuned for that task. this s t r u c t u r e is composed of a c o l l e c t i o n of s p e c i a l i s t s   each of which perform the same problem s o l v i n g   but specialize in d i f f e r e n t concepts of the domain. also  each task is associated with a problem solving regime  i . e .   how the s p e c i a l i s t s coordinate f o r problem s o l v i n g . the implementation of mdx is based on the diagnostic t a s k . 
b. 	the diagnostic task 
   the diagnostic task is the i d e n t i f i c a t i o n of a case d e s c r i p t i o n w i t h a s p e c i f i c node in pre-determined diagnostic h i e r a r c h y . the idea of a 
   diagnostic hierarchy i s w e l l - e s t a b l i s h e d i n medicine in the form of disease c l a s s i f i c a t i o n . 
   
 we w i l l use medical terminology in the following  but the reader should keep in mind that the diagnostic task also applies to other domains  e.g.  cars  computers  and power plants.  for example  figure 1 shows that cholestasis  cirrosis  and hepatitis are subclasses of liver disease. cholestasis can be further refined into extra-hepatic and intra-hepatic cholestasis. in the diagnostic task  each disease is associated with a specialist that evaluates its presence or absence in a patient. specialists in mdx  for example  attempt to classify a cholestatic case according to its etiology. 

   a top-down s t r a t e g y   which we c a l l e s t a b l i s h - r e f i n e   is used for t h i s t a s k . in r e l a t i o n to f i g u r e 1  a simple version of t h i s strategy f o l l o w s . f i r s t the liver s p e c i a l i s t determines i f i t i s e s t a b l i s h e d   i . e .   i f l i v e r disease is l i k e l y . if so  liver r e f i n e s i t s e l f by invoking i t s s u b s p e c i a l i s t s . each succeeding level of s p e c i a l i s t s performs the same e s t a b l i s h and r e f i n e f u n c t i o n s . on the other hand  if the liver s p e c i a l i s t r e j e c t s i t s e l f   the whole hierarchy of l i v e r diseases can be pruned. this s t r a t e g y   in combination w i t h the diagnostic h i e r a r c h y   is the problem s o l v i n g regime of the diagnostic t a s k . for a d e t a i l e d analysis of diagnostic problem s o l v i n g   see gomez and chandrasekaran   1   . 
   an important companion to the diagnostic hierarchy is a data base a s s i s t a n t which organizes the findings in a relevant manner   1   1   . for example  to determine if a p a t i e n t has been exposed to a n e s t h e t i c s   the data base  if necessary  can i n f e r t h i s from other data  e . g .   major surgery or exposure to e t h e r . thus the diagnostic s t r u c t u r e is insulated from solving problems about f i n d i n g - f i n d i n g r e l a t i o n s h i p s   avoiding a p o t e n t i a l l y combinatorial explosion of f i n d i n g - d i s e a s e r e l a t i o n s h i p s in the s p e c i a l i s t s of the diagnostic s t r u c t u r e . 
c. 	differences 
   the usual approach to b u i l d i n g knowledge based systems is to emphasize a general knowledge r e p r e s e n t a t i o n s t r u c t u r e and d i f f e r e n t problem solvers which use that knowledge. one d i f f e r e n c e in the mdx approach is that the o r g a n i z a t i o n of i t s knowledge is not intended as a general r e p r e s e n t a t i o n f o r a l l problems. rather i t i s tuned s p e c i f i c a l l y for d i a g n o s i s . by l i m i t i n g the type of problem to be solved  a s p e c i f i c o r g a n i z a t i o n a l technique   c l a s s i f i c a t i o n h i e r a r c h y   
t. bylander et al. 1 
and problem solving strategy   e s t a b l i s h - r e f i n e   can be used to provide focus and c o n t r o l in the problem solving process. 
   another d i f f e r e n c e is that the s p e c i a l i s t s in the hierarchy are not a s t a t i c c o l l e c t i o n of knowledge. the 	knowledge 	of 	how 	to 	e s t a b l i s h 	or 	r e j e c t 	is embedded w i t h i n 	the 	s p e c i a l i s t s . 	each 	s p e c i a l i s t can then be viewed as a i n d i v i d u a l problem solver w i t h i t s own knowledge base. 	the e n t i r e c o l l e c t i o n of 	s p e c i a l i s t s 	engages 	in 	d i s t r i b u t e d problem-solving. 
	i l l 	csrl 
　csrl is a language for defining a diagnostic hierarchy and for implementing the establish-refine process. a diagnostic hierarchy is represented by defining concepts. relationships to neighboring concepts are specified in the declarations of the concept. establish-refine is implemented within csrl via message passing. each concept has a body which specifies how the concept w i l l respond to different messages  and which contains the statements which invoke other concepts with messages. the knowledge to establish or reject a concept is factored into knowledge groups  which determine how the case description relates to specific decisions in the diagnosis. for a 
　complete description of csrl  see bylander   1     
a. 	body and message blocks of a concept 
　the body of a concept contains a l i s t of message blocks  which specify how the concept w i l l respond to different messages from its superconcept. the message block contains a message pattern  which is matched against the incoming message  and a sequence of csrl statements  which are executed if the match succeeds. in figure 1  the body of cholestasis contains two message blocks. the f i r s t one w i l l be activated if an  establish cholestasis  
message is sent from its superconcept  liver  declared in the declarations section   and the second  for a  refine cholestasis  message. the l i t e r a l  self  is bound to the name of the concept. 

   message blocks f o r e s t a b l i s h messages are r e l a t i v e l y simple since the knowledge groups  described below  do most of the work. figure 1 
1 t. bylander et al. 
shows how one would look for the stone concept. the knowledge groups are named xray  physical  
history  and summary. within the  establish self  message block  an execute statement runs a l l the knowledge groups  and then an establish-reply statement asserts the value of summary as the establish value of stone. the establish value is an integer from -1 to 1  which represents symbolic probabilities from  definitely not  to  definite.  a value of 1 or 1 means that the concept has been established. this value is written on a blackboard   which other concepts can access. 

　refining a concept is more complicated since the message block must be carefully tailored to follow the establish-refine strategy. in figure 1  the  refine self  message block contains two callexpert statements. the f i r s t one calls each subconcept 
with an establish message  subconcepts is bound to the declared l i s t of subconcepts . the second callexpert statement calls each subconcept that was established with a refine message. 
　message passing is appropriate for the diagnostic task since the establish-refine regime easily translates into a message protocol  in which the messages clearly indicate the important activities of the concept. also note that although each concept would have an establish message block in this formulation  the way that a concept establishes itself is concept-specific  i . e .   a concept has its own knowledge groups. 
b. 	knowledge groups 
   the knowledge-groups section contains a l i s t of knowledge groups  which are used to evaluate how the case description relates to the establish value of a concept. a knowledge group  kg  can be thought of as a cluster of production rules which map the values of a l i s t of conditions  boolean and arithmetic operations on data  to some conclusion on a discrete  symbolic scale. different types of kg's perform this mapping differently  e.g.  
　　stone is a subconcept of extra-hep in mdx. it represents the disease  stone causing extra-hepatic cholestasis.  

directly mapping values to conclusion  or having each rule add or subtract a set number of  confidence  units. generally  the knowledge in a concept is factored into several kg's  and other kg's are used to combine their results. see  for a discussion on combining diagnostic knowledge in this way  as well as reasoning with uncertain data. 
as an example  figure 1 is the physical kg of the 
stone concept presented above. the conditions query the data base  not defined in csrl  for whether the patient has cholangitis  colicky pain in the liver  or has been vomiting. each rule in the match section is evaluated u n t i l one  matches.  the value corresponding to this rule becomes the value of the kg. for example  the f i r s t rule tests whether the f i r s t and second conditions are true  the     means doesn't matter . if so  then 1 becomes the value of the knowledge group. otherwise  other rules are evaluated. the resulting value of the table measures the strength of physical evidence towards establishing the stone concept. the xray and history kg's of stone similarly evaluate the radiological and historical evidence. the summary kg combines their results 
 the values of the other kg's are the conditions of summary  into the establish value of stone. 

　factoring the knowledge of a concept in this manner has many advantages. only the relevant knowledge gets invoked. it allows knowledge to be acquired more easily from domain experts because you can focus their attention on some specific 
subtask. it also allows knowledge to be debugged because it is easier to see what purpose is being served by a knowledge group. this f a c t o r i n g would make it easier for experts to d i r e c t l y enter the knowledge at some f u t u r e time. 
c. 	implementation of csrl 
   csrl is implemented on a dec 1 using elisp  a d i a l e c t of lisp developed at rutgers  and a l o c a l version of frl  frame representation language . the csrl i n t e r p r e t e r and environment takes up an a d d i t i o n a l 1k words of storage. the environment includes a thorough syntax check when concepts are d e f i n e d   commands to invoke any concept w i t h any message  and a simple trace f a c i l i t y . csrl c u r r e n t l y allows l i t t l e user i n t e r a c t i o n while i t is running  but in the f u t u r e we plan to add a 
   simple explanation f a c i l i t y and to allow the user to  advise  the system during execution. 
	iv 	family of languages 
   designing languages for knowledge representation o f t e n has to face c o n f l i c t i n g requirements. at one end  they should be powerful enough to allow d i f f e r e n t kinds of knowledge and c o n t r o l to be expressed. the power is needed in the form of f l e x i b i l i t y in the programming constructs a v a i l a b l e . at the other end  the language should be simple enough so that non-programmers such as domain experts can d i r e c t l y encode t h e i r knowledge without having to worry about the representation in the machine. 
   we are studying how to do t h i s for the diagnostic task by using csrl to experiment w i t h the n o t i o n of   f a m i l y of languages.  the basic idea is that the same task is embedded in a l l languages in the f a m i l y . however  some of the languages make stronger commitments to a p a r t i c u l a r message passing p r o t o c o l or s t r u c t u r i n g of knowledge. thus at the lowest l e v e l we have message passing and knowledge grouping but no commitment to any set of messages or any types of knowledge groups. in t h i s r e g a r d   the language would become a general-purpose language such as loops  . in f a c t   we are considering using loops as the bottom-level of the diagnosis f a m i l y . 
   the h i g h e r - l e v e l languages in the f a m i l y would begin to t i e these general f a c i l i t i e s to the s p e c i f i c s of the diagnostic t a s k . for example  a f i x e d set of message types may be allowed to carry out the message passing p r o t o c o l of mdx. the highest levels may go so f a r as to create types of concepts  w i t h b u i l t in templates f o r the knowledge groups and body. this would allow users to pick out the appropriate template and concentrate only o n f i l l i n g i n the knowledge. 
   csrl f i t s i n t o t h i s framework in the f o l l o w i n g way. a strong commitment is made concerning the types of knowledge groups t h a t are a v a i l a b l e   but no commitment is made as to the set of messages t h a t must be used. however  the flow of c o n t r o l is definetly restricted to be top-down. 
	t. bylander et al. 	1 
	v 	current plans 
   our group at ohio state is c u r r e n t l y using csrl in a v a r i e t y of domains i n c l u d i n g blood type a n a l y s i s   cars  and nuclear power p l a n t s . we are also t r a n s l a t i n g mdx's diagnostic s t r u c t u r e from the present lisp code to csrl. we also plan to implement a diagnosis language which non-programmers can use w i t h minimal t r a i n i n g to implement prototype diagnostic systems. 
acknowledgments 
   we would l i k e to acknowledge jack smith and jon s t i c k l e n for several discussions during csrl's design phase. the language development is funded by a grant from the b a t t e l l e memorial laboratories 
u n i v e r s i t y d i s t r i b u t i o n program  and experimentation and a p p l i c a t i o n in d i f f e r e n t domains is supported by afosr grant 1  and nsf grant mcs-1 . 
