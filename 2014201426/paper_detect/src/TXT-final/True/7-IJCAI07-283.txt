
we evaluate a new hybrid language processing approach designed for interactive applications that maintain an interaction with users over multiple turns.  specifically  we describe a method for using a simple topic hierarchy in combination with a standard information retrieval measure of semantic similarity to reason about the selection of appropriate feedback in response to extended language inputs in the context of an interactive tutorial system designed to support creative problem solving. our evaluation demonstrates the value of using a machine learning approach that takes feedback from experts into account for optimizing the hierarchy based feedback selection strategy.
1 introduction
　in this paper we describe and evaluate a new hybrid language processing approach designed for interactive language processing applications that maintain an extended interaction with users over multiple turns.  except in the case of complete user initiative  the system must have some explicit representation of the state-space of reasonable dialogues in the form of a hierarchy of dialogue recipes or templates  ros└ et al.  1   or an ontology of dialogue topics  popescu  aleven  and koedinger  1  or discourse states  tetreault & litman  1  in order to ensure coherence at the level of topic transitions and ultimately task success. it is also necessary to ensure robust understanding of user input. while state-of-the-art systems typically achieve robust understanding by encouraging users to contribute concise contributions in order to avoid recognition errors  litman & pan  1   recently a new emphasis on applications that require more sophisticated language from users  such as tutorial dialogue systems  wang et al.  1; ros└ & 

*
  this work was funded in part by nsf grant sbe1 and the national science council  nsc  of taiwan under contract no. nsc1-s-1.vanlehn  1; popescu  aleven  & koedinger  1   is emerging as a new focus area for the computational linguistics community.
　a major thrust of research in the language technologies community for the past decade has been the development of shallow language processing approaches that require very little knowledge engineering and that can be applied efficiently to very large corpora.  typically text categorization algorithms and text retrieval algorithms operate on large portions of text  such as whole news articles  ko & seo  1 .  however  while this technology has frequently been applied to dialogue applications where users contribute extended contributions  e.g.  graesser et al.  1; malatesta et al.  1   they have often been met with less success than in more typical text retrieval applications.  the demands of interactive language processing systems are different from more typical text retrieval applications because texts are much shorter  precision is more important  and domain specific development data is in short supply. nevertheless  the performance of shallow language processing approaches can be enhanced by drawing upon the knowledge sources that must be part of the system for the purposes described above.
　we describe a method for using a simple topic hierarchy in combination with a standard information retrieval measure of semantic similarity to reason about extended language inputs in the context of an interactive tutorial system designed to support creative problem solving. our evaluation demonstrates that while a common-sense approach to combining these two sources of information provides some advantage over shallow language processing alone  that a more substantial improvement can be achieved by tuning the integration algorithm using a machine learning approach that takes feedback from experts into account.
1 motivation for hierarchy based feedback 
　supporting creative problem solving of ill-structured problems is a new direction in the intelligent tutoring community  aleven et al.  1   which poses specific challenges for language processing technology that can be used to facilitate this type of learning. in this paper we specifically address the problem of eliciting ideation.  while supporting knowledge construction and reflection can be accomplished using dialogue strategies where the system has the initiative  supporting student ideation requires abdicating control to the student.  systems such as the geometry explanation tutor  popescu  aleven  & koedinger  1  and auto-tutor  graesser et al.  1  support this student directed ideation using a reactive rather than a proactive dialogue management strategy.  
　our baseline hierarchy based feedback approach  wang et al.  1  is similar in spirit to that adopted in the geometry explanation tutor and auto-tutor.  however  our approach differs from this prior work in several important respects.  first  similar to popescu et al.   we attach feedback messages to nodes in our hierarchy so that we can use a match between a student contribution and a node in the hierarchy as a basis for selecting a feedback message.  however  in contrast to popescu et al.   we do not utilize a deep  symbolic approach to language understanding.  instead  we attach a number of prototype texts to each leaf node in the hierarchy and determine which node to match to based on a shallow semantic similarity measure.  in our approach  the value of the similarity score is a key component in our strategy selection process.  if the match is deemed good based on our shallow similarity measure  we select the matched node as the basis for our feedback selection.  otherwise  we move up a level of abstraction in the hierarchy in order to compensate for the partial match.  thus  our approach is much lighter weight in that it does not require heavy knowledge representation or inferencing technology.   
　similar to graesser et al.   we make use of a finite state machine to determine how to use the hierarchy to select feedback.  however  in contrast to the auto-tutor approach  our strategy is motivated more by general principles of dialogue coherence rather than a specific knowledge elicitation strategy designed to elicit a specific idea from a student with progressively more pointed hints. 
1 technical approach in detail  
　our system accepts student input in chinese  although our approach can easily be applied to other languages.  as a preprocessing step  the chinese text must be segmented into individual lexical items using technology provided by the chinese knowledge and information processing  ckip  group at academia sinica  ma & chen  1 .  this preprocessing step is not necessary except for languages like chinese and japanese that have no spaces between words.  a word vector is then assembled from the tokenized text  with each position in the vector corresponding to a single lexical item  and term weight equal to a function of term frequency within and across instances  referred to as tfidf.  note that text classification using simple word vectors such as this can be done effectively without any morphological processing even for highly synthetic languages such as german  donmez et al.  1 . 
　a shallow semantic similarity measure is computed between texts by computing the cosine correlation between their respective word vectors.  this semantic similarity measure is used to select the best matching idea node in the hierarchy.  each idea node in the hierarchy is associated with a list of prototype texts.  the idea node associated with the text that is rated as most similar to the student text is selected as the best matching node.  the magnitude of the computed semantic similarity is used to estimate how good the match is.   
　we make use of two finite state machines  fsms  to guide the strategy for selecting feedback messages based on the best matching node  the estimated goodness of the match  and a record of which idea nodes have been uttered by the student in previous contributions.  in our fsm based approach to feedback selection  a finite set of states  q  represents the range of possible system functional behavior  including actions such as checking the coverage of idea nodes attached to an abstract concept node or moving from one node to a higher node in the hierarchy representing a more abstract idea.   the finite alphabet    represents the set of events that can trigger a transition from one state to another  such as the condition that all idea nodes subsumed by the current node have been covered  which in this case triggers a transition to a state requiring the system to select a new conceptual node.  
　the feedback produced by the system consists of two parts.  the first part is referred to as a comment  which is meant to offer feedback specifically directed at the details of what students have contributed.  the comment text associated with the most closely matching idea node is selected  unless the goodness of the match is rated as low  in which case a more abstract node that subsumes that idea node is selected instead.  the second portion of the feedback is referred to as a tutorial  the purpose of which is to direct the student to a new idea  preferably which coherently follows from the current idea if such a subsequent focus exists in the hierarchy and has not yet been covered by the student. in this way students have the opportunity to learn how to evaluate their ideas  and they are encouraged to continue contributing additional ideas.  two separate fsms are designed for the selection of each of the two feedback portions. in the current design  a comment is selected based on a function only of the current student contribution  while a tutorial is selected based on a function of the student contribution and the context of students' previous responses within the same session.  this is what we refer to as the hierarchy approach to feedback selection.   
table 1 example of multi-turn interaction contrasting the with hierarchy approach to feedback selection with the no hierarchy approach.
student response matched 
conceptmatch 
quality hierarchy response no hierarchy response intense rainfall nature-1 good match it's good to think about the influence of rainfall.  is the fact that taiwan is located in the convergent plate-boundary region relevant to the occurrence of a debris flow it's good to think about the influence of rainfall.  what issues might be related to shortcomings in public education improper development of moun-
tains social-1bad
match  creative phrasing you seem to have some thoughts about social policy and public administration.  what issues might be related to shortcomings in public education it's a good idea to think about policy making.  what king of weather conditions might increase the possibility of a debris flow hazard the current policies do not regulate urban development well social-1good
match it's a good idea to think about policy making.  what issues might be related to shortcomings in public education it's a good idea to think about policy making.  is the fact that taiwan is located in the convergent plateboundary zone relevant to the occurrence of a debris flow batman did not come to help social-1bad
match  nonsense
student answeryou seem to have some thoughts about social policy and public administration.  is the public not aware enough about the severity of debris flow hazards it's a good idea to think about policy making.  is it possible that the location has a particular geological structure that makes it prone to debris flow 　to further illustrate our hierarchy approach to feedback selection as well as to demonstrate where the value of using a simple idea hierarchy in feedback selection can be found  we compare our hierarchy approach to a baseline no hierarchy approach using the example in table 1.  in the no hierarchy approach  the comment is selected based strictly on the best matching idea node  and the tutorial is selected  randomly.  we consider this a reasonable comparison condition because without an idea hierarchy  it is not possible to use a strategy such as described above to compensate for poor matches or to select a next tutorial focus that is close to the current focus  since there is no organization of the inventory of idea nodes. 
　the extended example in table 1 illustrates how the isa hierarchy is beneficial for the fsm-based feedback selection over a multi-turn interaction. while this is a constructed example  the evaluation presented later in the paper demonstrates that the hierarchy can indeed be used strategically in practice to yield higher quality feedback responses to real student inputs.  in the leftmost column of table 1 we see a sequence of student contributions.  to the right of that we see the selected best matching node from the hierarchy as well as an indication of match quality.  the two rightmost columns display the resulting comment and tutorial texts for the hierarchy approach and the no hierarchy approach respectively.  note that the comment texts are presented in plain text  and the tutorial texts are presented in italics.   

figure 1 average ratings for the two human coders for each of the four approaches for comment selection and tuto-　in the first row  we see a typical student response.  since it matches well to an idea node  and since it is the first contribution in an extended interaction  both approaches generate an acceptable response.  next  however  the student contributes what is an acceptable idea  but with creative phrasing that does not match well to any of the nodes in the hierarchy.  because of this  a poor selection is made for the best matching node.  as a result  in the no hierarchy case  a slightly incoherent comment is produced.  in contrast  next to that in the table we see that with the hierarchy approach  a more abstract comment text that sounds less incoherent in the context is selected.  next  the student contributes a reasonable idea that again matches well to a node in the hierarchy  but it happens to be the same node that matched previously.  thus  we see in the last column of table 1 that the no hierarchy approach generates an identical comment to that used previously.  while it is appropriate now and follows coherently from what the student has most recently uttered  it sounds awkward because it is identical to what was produced in the previous exchange.  in contrast  if we now look in column 1 of table 1 for the corresponding hierarchy based feedback  a different comment is produced since this time the match is good  and thus the algorithm does not select a more abstract feedback message.  the selected tutorial text is the same since the student has still not responded to this suggestion from the previous turn.  in this case  a repeated tutorial text sounds less awkward than a repeated comment text because it is reminding the student of what the student still has not done.  in the final student contribution  a nonsense student answer is given.  again  the same best matching node is selected  but this time the match is bad again. the no hierarchy approach selects the same comment text for the third time.  in contrast  the hierarchy approach reverts back to the more abstract comment and  rial selection separately.
selects a tutorial with the continued focus on social policy  which has been a coherent theme across the last three exchanges.  in contrast  the focus of tutorial texts in the no hierarchy approach does not follow a logical progression.
1 evaluation of baseline approaches
　we first evaluated the two baseline approaches  namely the hierarchy  h  approach and the no hierarchy  nh  approach using a corpus containing 1 entries of ideas contributed from 1 taiwanese high school students in response to the question  what are the possible factors that may cause a debris flow hazard to happen    which was given to them as part of an inquiry learning unit in their earth sciences class. we refer to this as the debris flow hazard question.  for each input entry  the two comment/tutorial selection methods  hierarchy  h  and no hierarchy  nh   were executed in order to generate two feedback versions  each consisting of a comment and a tutorial. we recruited two independent judges not directly involved in the research to rate the quality of the comment and tutorial offered by the two different methods in response to each student idea. each coder assigned a separate binary score  acceptable/not acceptable  to each comment and tutorial message produced by each of the two methods. in order to prevent biasing the judges in favor of one approach or the other  the coders were kept blind to the method used in constructing each message by presenting the feedback produced by the two approaches as a pair  but in a randomized order. note that because of this randomization it was necessary for each student contribution/feedback pair to be treated as an independent exchange  divorced from its extended context  for the purpose of this evaluation  although this disadvantages the evaluation of the context-oriented hierarchy approach.
　figure 1 displays the results not only for the two baseline approaches  but also for the heuristic approaches described below.  first  let us consider only the comparison between the two baseline approaches. coder 1's scores were significantly higher than those of coder 1  as evaluated using a binary logistic regression  p   .1 .  nevertheless  we also see a trend for coder 1 to prefer the hierarchy method  while with coder 1 we see the opposite trend.  however  neither of these differences were statistically significant. thus  based on this initial evaluation  the simple version of the hierarchy approach did not yield a significant improvement in feedback generation over the no hierarchy approach. a reliable improvement over the baseline approach is  however  achieved using the optimizations discussed in the remainder of the paper  and evaluated in section 1.
1 learning heuristics for optimizing feedback selection
　an error analysis from our initial evaluation revealed that the strategy for selecting a more abstract comment to compensate for a bad match was only effective about half the time.  in fact  in some cases  the no hierarchy response was preferred.  furthermore  we noticed that using the magnitude of semantic similarity as the only basis for determining whether it was better to select a feedback message at a higher level of abstraction was not an effective strategy since the meaning of good versus bad match in terms of semantic similarity score was not stable across idea nodes due to differing amounts of variance in possible phrasings of the concepts and variable coverage of alternative phrasings in the prototype lists. 
　to capture the regular patterns found in the acceptability evaluation of the human raters  we used a decision tree learning approach. note that this is similar in spirit to prior work on dialogue strategy induction based on usability questionnaires  litman et al.  1 .  however  decision tree learning is a simpler machine learning approach to the reinforcement learning approach used in litman's work  and thus requires far less training data.  we achieved encouraging results with a minimal amount of training data  specifically 1 examples.  the amount of data required for our investigation was an amount that can be collected in a single classroom session and evaluated by human raters for the acceptability of the generated feedback within 1 working days.  the distribution of examples was consistent with the natural variation in frequency between the occurrence of the alternative ideas represented in the hierarchy.  no attempt was made to keep the distribution of ideas equal. 
　the features we selected for our machine learning approach were extracted from the logs recorded by our feedback generation algorithm discussed above in section 1.  these features are based only on information that one would expect to have access to in a wide range of possible approaches relying on a domain ontology to maintain coherence in the dialogue.  based on our error analysis of the two baseline approaches  we selected as features the idea id of the closest matching node in the hierarchy  the similarity score based on lexical overlap between the student contribution and the best matching prototype explanation in the best matching idea node  the feedback message id of the selected message from the hierarchy approach  the feedback message id of the selected message from the no hierarchy approach  and a binary variable indicating whether the similarity score was above average or below average.   
　because the human coders were not always consistent in their evaluation of the alternative feedback approaches  we trained the decision tree learner to predict whether the average acceptability rating of the two judges would be high or low.  we did this by averaging the acceptability ratings of the two raters and then assigning instances with an above median average score to a target score of high  and all others to a target score of low.  we used the j1 implementation of decision tree learning found in the weka toolkit  witten and frank  1 .  in order to compensate for the high branch factor in several of the features  we set the binarysplits parameter to true.  furthermore  we increased the minimum number of instances per leaf node to 1 in order to avoid over-fitting.   
　overall  it was more difficult to predict the acceptability of the tutorial feedback than the comment feedback  partly because the frequency of an unacceptable tutorial selection was relatively rare for both feedback generation approaches.  furthermore  the acceptability of the hierarchy approach was less predictable than that of the no hierarchy approach  partly because the strategy for selecting a more abstract feedback message was sometimes counter-productive.  using cross validation  we were able to achieve a high average performance for comment selection  and a somewhat lower performance for tutorial selection for both the hierarchy and no hierarchy approaches.  for comment selection  we achieved a percent accuracy of 1%  .1 kappa  for the no hierarchy approach and 1%  .1 kappa  for the hierarchy approach.  for tutorial selection  we achieved a percent accuracy of 1%  .1 kappa  for the no hierarchy approach and 1%  .1 kappa  for the hierarchy approach. despite the relatively low level of predictability of the acceptability judgments  this noisy predictor of acceptability lead to an overall increase in acceptability rating of generated feedback in their use within the meta-heuristics described and evaluated in the next section. 
1 evaluating heuristic approaches to feedback selection
 because the heuristic methods work by choosing to select either the feedback produced with the hierarchy or no hierarchy approach depending upon their prediction of which will optimize their score  we can estimate the human rater's assessment of their respective feedback quality by selecting for each example the corresponding human rating  either from the hierarchy or no hierarchy feedback  for each idea depending on which would be selected by the heuristic.   
 we evaluated the average score for the two meta heuristics using a form of stratified cross-validation as follows:  on each iteration  using 1% of the data we trained a decision tree learner separately for the hierarchy and no hierarchy approaches just as in the evaluation described in the preceding section to predict whether the quality of the feedback produced with that approach will be rated as high or low. we used those trained classifiers to assign predictions to the feedback produced by the hierarchy and no hierarchy approaches in the 1% of the data set aside as testing data on that iteration.  we then evaluated the quality of the feedback produced by the heuristic approaches in the testing data by applying the two meta heuristics to the predicted quality scores.  thus  for meta 1  if the quality prediction for the hierarchy approach was low  we would select the no hierarchy feedback  otherwise we would select the hierarchy feedback.  for meta 1  we would select the no hierarchy feedback only in the case where the hierarchy feedback was predicted to be of low quality and the no hierarchy feedback was predicted to be of high quality.  because the quality of the hierarchy and no hierarchy approaches was already rated by the human coders  we could compute the quality of the heuristic approaches based on the already assigned scores.   
 figure 1 shows the success of the two heuristic approaches at increasing the overall quality of the generated feedback.  overall  both for comment and tutorial generation  the meta-heuristics were more successful than the baseline approaches.  we evaluated the statistical significance of this difference separately for comment and tutorial generation in each case using a binary logistic regression where the outcome variable was the binary acceptability rating and the two independent variables were the feedback generation approach and the rater.  in this statistical model  the acceptability rating of each rater for each feedback approach on each example student contribution was treated as a separate data point.  specifically for comment selection  the proportion of acceptable to non-acceptable feedback messages was significantly higher for both meta heuristics in comparison to the no hierarchy approach  p   .1 .  the best scoring approach was meta-heuristic 1  which takes the predicted quality of both the hierarchy and no hierarchy approaches into account.  for tutorial selection  the meta heuristics yielded an improvement although the improvement failed to reach the level of statistical significance.  however  it should be noted that all approaches performed well from a practical standpoint.  thus  the improvement was mainly necessary for comment selection  where we see the greatest impact. 
1 conclusions and current directions  
　we have described a new hybrid language processing approach that uses a concept hierarchy to maintain coherence in its feedback selection in the context of an extended interaction with users over multiple turns.  in contrast to the graesser et al.  approach  which is superficially similar to ours  our hierarchy based feedback approach is motivated by general principles of dialogue coherence rather than a specific scaffolded knowledge elicitation strategy consisting of sequences of more and more pointed hints.  specifically  we evaluate a decision tree learning approach for tuning the strategy for using the hierarchy in feedback selection  demonstrating a significant advantage for the optimized approach in comparison with an approach that does not use the hierarchy.  these successful results were achieved with a very small amount of training data  in contrast to other work using reinforcement learning approaches that require at least an order of magnitude more data  e.g.  tetreault & litman  1 .  these results achieve a practical level of acceptability in feedback quality despite taking a far simpler  less knowledge engineering oriented approach than that of popescu and colleagues  popescu  aleven  & koedinger  1 .   
　in a recent lab study we demonstrated that our feedback generation approach is successful for increasing student learning as students engage in the debris flow hazard task  whether they do so individually or in pairs  wang et al.  submitted . 
