 
　　　the process of recognizing the postal codes or zip codes in a handwritten address can be aided by many sources of external knowledge. city and state names are obvious examples that can be used in conjunction with a city-state-zip directory to provide evidence about digits in a zip code. this paper describes an extension of this methodology that uses knowledge about legal street names and sujfixes to constrain the digits in a zip code. the technique does not require complete recognition of all characters in words. rather  a feature description of words is used to index a set of possible zip codes. some preliminary experiments with the zlp+1 database are discussed. it is shown that even a relatively simple description of two words in the street line of an address can significantly reduce the number of zip codes that could appear on a piece of mail. 
1. introduction 
　　　reading the zip code within the destination address area of a mailpiece is of central importance in automated mail sorting  1} the problem is not always amenable to straightforward alphanumeric character recognition - particularly when the address is handwritten. fortunately  the numeric zip code in a destination address does not usually occur in isolation. there is additional or redundant information in the form of a city name  a state name  a street address  the name of a destination  and perhaps an attention line mao. there is usually a return address and sometimes advertising material. all this knowledge has some potential to contribute to recognition accuracy. previous artificial intelligence approaches to the general reading problem have focused on the use ol intra-word knowledge  1 . a robust methodology is needed to focus the various sources of inter-word knowledge on the reading problem  1 . 
　　　the most obvious use of inter-word or external knowledge in handwritten zip code recognition is for the city and state to confirm a five digit zip code. state information constrains the first digit whereas city information constrains the second and possibly the third digits. thus if the city and state information is known  the number of alternatives is reduced for zip code recognition. there exist multi-line reading equipment today that are capable of using city and state information as well as street information in determining a nine-digit zip code. 
　　　besides the knowledge in the city/state/zip line  or lines   there is a wealth of knowledge in the street line that could be utilized. several sources of external knowledge that could be used to constrain the digits in a zip code are illustrated in figure 1. for example  if mail for a particular city is being sorted  recognizing the pre-directional code as n might limit the zip code tp one that occurs north of some known boundary. a better use of external knowledge is to recognize the post-directional code  e.g.  nw  ne  etc.  when sorting mail for cities that use such 
1 	perception 
codes  e.g  washington  d.c. . this could significantly reduce the number of zip codes that could match a mail piece. recognizing the street name or the organization would have a similar effect. if combined with a suitably arranged dictionary  this would in many instances specify the zip code. 
　　　the focus of this research is on a technique of using exter nal knowledge to constrain the digits in a five-digit zip code. usually  accurate recognition of all the characters in a word  such as the city name  is required to use external knowledge. there is usually little tolerance for broken  touching  or smeared characters. such a recognition procedure would be appropriate for clean well-printed text  in which case there may be no need to look beyond the zip code. what is desired instead is a technique that is robust in the presence of noise and can extract some useful information from textual portions of a destination address. such a technique should be able to constrain the digits of a postal code even if it cannot fully recognize the text. 
　　　the technique proposed here computes a noise-tolerant feature description of a specific word or words in an address. this feature description is then used to access a dictionary and return a number of zip codes that correspond to words with that feature description. this cither produces a unique identification of the zip code. or. by constraining the digits of the zip code  provides information that could be used to advantage in recognition. this methodology does not require exact recognition of all the characters in the words it examines. only some features have to be calculated and these features may provide only a gross description of the word. however  such a feature description may provide useful knowledge even though it is tolerant to noise and easy to compute. 

figure 1. template for the face of a mailpiece. 
　　　
1. method for constraint generation 
　　　a method is presented for constraining the digits in a zip code. the digital images of isolated words in an address are input. it is assumed that the words come from known categories such as the first word- in a street name. a feature description of an input word serves as an index into a dictionary that returns one or more zip codes associated with the input word. this set of zip codes is referred to as the neighborhood of the words with that feature description. the objective of this procedure is to find as small a neighborhood as possible. ideally  a simple feature extraction routine could be used to find a neighborhood that contains a single zip code. 
　　　this methodology differs from a conventional approach to contextual postprocessing since it does not require an attempt at complete recognition of all the digits in a zip code before attempting to utilize other information in an address - again by attempting complete recognition of all the isolated characters in a word . instead  a description of the gross visual characteristics 
of words are used to access a knowledge-base and return likely candidates for the zip code  even before attempting recognition of the zip code. 
　　　an example of this procedure is presented in figure 1. there are twenty six five-digit zip codes that could appear on a 
　　　piece of mail with the city and state names of  wilmington  delaware  on it. thus the city and state information constrain the number of possibilities to twenty six from a theoretical max lmum of kx   xx  or the practical maximum of about 1  about this many /.ip codes are in use . the map in figure 1 shows the geographic distribution of ten of the twenty six codes. the remaining sixteen are assigned to unique businesses or to post office boxes. 
　　　under the assumption that a mail stream is being sorted for the citv of wilmington  it is not passible to route a piece of mail to its correct five digit zip code without reading information in some area of the address besides the city/state/zip line. one possibilitv is to use the number of characters as a feature description for the second word in the line above the city/state/zip line. under the assumption that this word is either a pre-directional code  n s f w nw nf sw sl  or the first word in a street name  a suitably organized dictionary could be used to determine the zip codes associated with all the words having that feature description. such a dictionary structure is shown in figure 1 c . the dictionary is indexed by the number of characters in a word. the neighborhoods of zip codes are shown and the size of each neighborhood  ns  is indicated. using this dictionary  the example address in figure 1 b   and the assumption that the number of characters in the first word of the street address  van  is correctly determined  the number of zip codes that could match 
the address is reduced from twenty six  figure 1 a   to nineteen. 
1. statistical simulation 
　　　a statistical simulation of the technique proposed  in this paper for constraining the digits in zip codes was constructed to test the effect of several alternative feature sets. each feature set has different characteristics in terms of computability and tolerance to noise. the feature set used in practice would depend on these considerations as well as how tightly constrained the zip code should be. the computability and noise tolerance factors are very implementation-dependent. however  the constraint factors 
can be estimated by the statistics defined below. 
the database for the simulation was a subset of the zip+1 
national directory file for the state of delaware. the zip+1 file contains all the information needed to assign a 1-digit zip code to any address in the united states . this is done by storing  among other information  the ranges of numbers on every street 

　　　figure 1. example of constraining zip codes using feature descriptions:  a  the 1 five-digit zip codes for wilmington  delaware   b  an example address   c  the dictionary for one feature: length of the first word in the street name. 
that correspond to each 1-digit zip code. the complete street name can contain up to four fields  explained in section 1 : predirectional  street name  street suffix  and post-directional. 
　　　it was desired to test the proposed methodology on a model of a mail stream where the usual strategy of using external knowledge to constrain the digits in a zip code by examining the city and state names would not work. this is a subset of the database that has the same city and state names. therefore  the largest such subset in the given database was chosen. this yielded a file of all the street names and five-digit zip codes in the city of wilmington. 
　　　the wilmington database was pre-processed so that it included the full spelling for the street suffixes as well as its usual usps abbreviation. this was done by substitutions such as 

　　　figure 1. geographic distribution of zip codes in wilmington  delaware. 
	hull and srihari 	1 
　　　
boulevard for blvd. lane for ln. circle for cir  
street for str  etc. in many cases this yielded two records for every one input: the original and a copy with the substitution for the suffix. there were 1 records in the original database and 1 in the preprocessed version. the preprocessed database should represent a large percentage of the ways the names of streets would be written for destinations in wilmington. 
　　　several experiments were conducted for different feature descriptions. two constraints were used in each expenment: either the first word or the first and last words from the complete street name. the first word was the pre-directional  if it existed  otherwise it was the first word in the street name. the second word was either the post-directional  the street suffix  or the last word in the street name  chosen in that order. it was assumed that these words could be located in an address by finding the second word and the last word in the line immediately above the city/state/zip line. presumably the first word in the line is the number of the street address. in the example address of figure 1 b   the first and last words in the complete street name are van and street. 
　　　dictionaries similar to that shown in figure 1 c  were constructed for several different feature sets. the ability of these feature sets to determine which of the twenty six possible fivedigit zip codes matched addresses in the database was simulated by computing the three statistics defined below. where in the dictionary  nsi is the size of the /' neighborhood  nt is the frequency of the i' feature description in the mail stream being 
m	o	d	s the number o f words that 
uniquely specify a zip code. 
　　　ans is a static measure of performance that gives the expected number of zip codes in a partition of the dictionary. ans  provides a dynamic measure of performance that indicates the expected number of zip codes associated with a piece of mail in a modeled mail stream. %uniq provides the percentage of addresses in the mail stream with a feature description that uniquely specifies a zip code. 
     these statistics were computed using four different feature descriptions. the results of these expenments are shown below. 

1. discussion and conclusions 
　　　the results of these experiments illustrate several aspects of this approach. a very simple feature of just the number of characters in two words produced an anst value of about 1. this is much better than the value of twenty six that would be encountered if no constraints were used. if only one letter and the number of characters in one word can be recognized  ans  is reduced to 1. if the first character and the lengths of two words can be computed  a value of 1 is obtained for ansr when the first and last characters in two words can be recognized  the ans value is only 1. also  the zip code for up to 1% of the mail stream is determined with no other feature tests. this is encouraging but comes at the cost of an increase in ans' to 1. a similar trend occurred with the fourth feature set where ans  was about the same at 1  but %ounlq increased to 
1%. if only the first word in the street address is considered  anst is only 1  but a zip code is uniquely determined for only 1% of the pieces. 
　　　future work in this area should include an improved simulation of the mail handling environment. the population of addresses used for the experiments discussed here contained at most two entries for each street in each five-digit zip code zone. the simulation thus assumes an equal amount of mail is destined for each street. an improvement would incorporate data that more accurately reflects the amount of mail going to each street. 
acknowledgements 
     we are grateful to glen davis of arthur d. little  inc. for his assistance in acquiring several of the databases used for exper lments discussed in this paper. we acknowledge the support of the office of advanced technology of the united states postal service under contract boa 1-1. 
