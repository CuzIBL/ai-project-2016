 
in this paper we introduce coverage maps as a new way of representing the environment of a mobile robot. coverage maps store for each cell of a given grid a posterior about the amount the corresponding cell is covered by an obstacle. using this representation a mobile robot can more accurately reason about its uncertainty in the map of the environment than with standard occupancy grids. we present a model for proximity sensors designed to update coverage maps upon sensory input. we also describe how coverage maps can be used to formulate a decision-theoretic approach for mobile robot exploration. we present experiments carried out with real robots in which accurate maps are build from noisy ultrasound data. finally  we present a comparison of different view-point selection strategies for mobile robot exploration. 
1 introduction 
generating maps is one of the fundamental tasks of mobile robots and many researchers have focused on the problem of how to represent the environment as well as how to acquire models using this representation  1  1  1  1  1 . the mapping problem itself has several aspects that have been studied intensively in the past. some of the most important aspects are the localization of the vehicle during mapping  appropriate models of the environment and the sensors  as well as strategies for guiding the vehicle. in literature  the localization problem plays an important role  since the quality of the resulting map depends strongly on the accuracy of the pose estimates during the mapping process. however  the accuracy of the map also depends on the choice of view-points during exploration. especially if noisy sensors are used  the map will be quite inaccurate in areas which have been sensed a few times only or maybe even from disadvantageous viewpoints. 
¡¡exploration is the task of guiding a vehicle in such a way that it covers the environment with its sensors. efficient exploration strategies are also relevant for surface inspection  
   *this work has partly been supported by the german science foundation  dfg  under contract number sfb/tr1. 
mine sweeping  or surveillance 1  1 . in the past  several strategies for exploration have been developed. one group of approaches deals with the problem of simultaneous localization and mapping  1  1   an aspect that we do not address in this paper. a common technique for exploration strategies is to extract frontiers between known and unknown areas  1  1  1  and to visit the nearest unexplored place. these approaches only distinguish between scanned and un-scanned areas and do not take into account the actual information gathered at each view-point. to overcome this limitation  gonzales et al.  determine the amount of unseen area that might be visible to the robot from possible view-points. to incorporate the uncertainty of the robot about the state of the environment moorehead et al.  as well as bourgault et al.   1  use occupancy grids  and compute the entropy of each cell in the grid to determine the utility of scanning from a certain location. whaite and ferrie  present an approach that also uses the entropy to measure the uncertainty in the geometric structure of objects that are scanned with a laser range sensor. in contrast to the work described here they use a parametric representation of the objects to be scanned. edlinger and puttkamer  developed a hierarchical exploration strategy for office environments. their approach first explores rooms and then traverses through doorways to explore other parts of the environment. tailor and kriegman  describe a system for visiting all landmarks in the environment of the robot. their robot maintains a list of unvisited landmarks that are approached and mapped by the robot. dudek et al. 1  propose a strategy for exploring an unknown graph-like environment. their algorithm does not consider distance metrics and is designed for robots with very limited perceptual capabilities. recently koenig has shown  that a strategy  which guides the vehicle to the closest point that has not been covered yet  keeps the traveled distance reasonably small . however  as experiments reported in this paper illustrate  such techniques can lead to a serious increase of measurements necessary to build an accurate map if the robot is not able to incorporate measurements on-the-fly while it is moving. this might be the case  for example  for robots extracting distance information from camera images. 
¡¡in this paper we introduce coverage maps as a new probabilistic way to represent the belief of the robot about the state of the environment. in contrast to occupancy grids   in which each cell is considered as either occupied or free  cov-

robotics 	1 


figure 1: typical occupancy map obtained in situations in which cells are only partly occupied  left image  and a coverage map containing the corresponding coverage values  right image . 
erage maps represent in each cell of a given discretization a posterior about the amount this cell is covered by an object. as an example consider the situation depicted in figure 1 in which a cell is partly covered by an obstacle. with the standard occupancy algorithm the probability that this cell is occupied will converge to 1 if the sensors of the robot repeatedly detect the obstacle. the left picture of this figure shows the resulting occupancy probabilities  black represents high likelihood . since the object does only cover 1% of this cell  a 
coverage value of .1  as shown in the right image of figure 1  would be a better approximation of the true situation. in addition to the representation aspect  we also present a sensor model that allows the robot to appropriately update a coverage map upon sensory input and describe how coverage maps can be used to realize a decision-theoretic approach to exploration of unknown environments. 
¡¡this paper is organized as follows. in the next section we introduce coverage maps. in section 1 we present a probabilistic technique to update a given coverage map upon sensory input. in section 1 we describe a decision-theoretic approach to exploration based on coverage maps. in section 1 we present experiments illustrating that our approach allows a mobile robot can learn accurate maps from noisy range sensors. additionally  we present experiments comparing different view-point selection strategies for exploration. 
1 	coverage maps 
as already mentioned above  occupancy grids rest on the assumption that the environment has binary structure  i.e. that each grid cell is either occupied or free. this assumption  however  is not always justified. for example  if the environment contains a wall that is not parallel to the x- or yaxis of the grid there must be grid cells which are only partly covered. in occupancy grids the probability that such cells are occupied will inevitably converge to one  see figure 1 . coverage maps overcome this limitation by storing a posterior about its coverage for each cell. coverage values range from 1 to 1. whereas a coverage of 1 means that the cell is fully occupied  an empty cell has a coverage of 1. since the robot usually does not know the true coverage of a grid cell  it maintains a probabilistic belief p cl  about the coverage of the cell c/. in principle  there are different ways of representing p cl . they range from parametric distributions such as  mixtures of  gaussians or non-parametric variants such as histograms. throughout this paper we assume that each is given by a histogram over possible coverage values. more precisely  we store a histogram for each grid cell  in which each bin contains the probability that the corresponding grid cell has the particular coverage. a typical example is depicted in figure 1. it shows the posterior for the cell containing the obstacle in the situation illustrated in figure 1 obtained after 1 measurements. 

coverage 
figure 1: coverage posterior for the cell containing the obstacle in the situation depicted in figure 1. 
1 	updating coverage maps 
to update a coverage map based on sensory input  we apply a bayesian update scheme similar to that of occupancy grids. throughout this paper we assume that our sensor provides distance information. accordingly  we have to convert the distance information to coverage values. what we need to know is the coverage map c that has the highest likelihood under all distance measurements if we use bayes rule and assume that consecutive measurements are independent given that we know the map c  we obtain: 

equation  1  is obtained from equation  1  by assuming that p c  is constant and that is constant for every t. the variables and represent normalization constants ensuring that the left-hand side sums up to one over all c. under the strong assumption that the individual cells of a coverage map are independent1 we finally obtain: 


thus  to update a map given a measurement we simply have to multiply the current belief about the coverage of each cell . by the belief about the coverage of this cell resulting from . additionally the maximum likelihood coverage map is obtained by choosing the mode of the coverage histogram 
for each cell 
it remains to describe how we actually compute 
i.e. how we determine the distribution about the potential coverage values of a cell with distance to the sensor given a measurement in our current system  we use a mixture of a gaussian and a uniform distribution to compute the probability that the coverage of 
 1  
the value of the uniform distribution is computed using the function which increases monotonously in dl and d. 
it reflects a typical behavior of proximity sensors like sonars  because the accuracy of a measurement decreases with the distance to the obstacle. of the gaussian is computed in the 
 1  
where is the grid resolution of the map. note that we distinguish three situations  depending on whether the measurement ends in or not. suppose that the measurement does not end in and the distance is shorter than  in this case we have in such a situation  the mean of the 
gaussian is zero  since it is more likely that a cell covered by a range measurement that does not end in it is completely empty. the second line of equation  1  represents the situation in which ends within in this case the mean is inverse proportional to the amount the cell is covered by d. finally  cells lying up to behind a cell  in which the measurement ends  are most likely completely occupied so that the mean is 1. 
¡¡the value of the standard deviation of the gaussian also is a function that is monotonously increasing in 
and d except when 	in this range 	has a constant value that exceeds all values outside of this interval. 
¡¡to obtain the optimal parameters for the functions in our sensor model we apply the maximum likelihood principle. we first apply a highly accurate scan-alignment procedure  on laser range information. next we manually extract geometric objects from the corresponding range data. given these geometric primitives we use straightforward geometric projections to compute the ground truth information  i.e.  the exact coverage of each cell of a given discretization. we evaluate a particular setting for the parameters of our model by determining the likelihood of the ground truth given a coverage map obtained using this setting. to maximize the likelihood we apply local search techniques in the parameter space. figure for a measured distance of obtained for ultrasound data recorded with our b1r robot albert  which is depicted in picture  a  of figure 1. as the plot illustrates  for a measured distance of cells close 

figure 1: sensor model for a measured distance 

to the robot are unoccupied with high likelihood. however  cells close to the measured distance are covered with high probability. figure 1 shows two coverage maps build from real sonar data obtained by a real robot. image  b  depicts a map of the sieg hall at the university of washington and  c  a map of the office environment of our laboratory. 
1 	strategies for choosing the next view-point 
one of the key problems during exploration is to choose appropriate vantage points. at the selected location the robot will perform the next measurement to retrieve new information about its environment. in this section we will present four methods to choose an appropriate position. in general there are two different aspects that are relevant for the viewpoint selection. on the one hand  the uncertainty of the robot in the map should be as small as possible  and on the other hand  the number of measurements to be incorporated as well as the distance traveled should be minimized. 
¡¡to determine the uncertainty in the state of a particular cell we consider the entropy of the posterior for that cell. entropy is a general measure for the uncertainty of a belief. the entropy of a histogram consisting of bins is defined as: 
 1  
h is maximal in case of a uniform distribution. the minimal value zero is obtained if the system is absolutely certain about the state of the corresponding cell. thus  if we want to minimize the uncertainty in the current map  all we need to do is to reduce the entropy of the histograms in the coverage map. furthermore  we can specify  at which moment the exploration task has been completed. suppose the size of the environment is limited. then the goal of the exploration process for a coverage map c has been achieved if for all cells that can be reached by the robot  corresponds to the histogram representing the coverage of additionally  the system has to detect a situation in which the robot is unable to reduce the entropy of a cell below to ensure the termination of the exploration task. in our system this is achieved by monitoring the change of entropy. if this change is below .1 for five consecutive measurements  the cell is regarded as explored enough. 

robotics 	1 


figure 1: picture  a  shows our b1r robot albert equipped with a ring of 1 sonar sensors. image  b  depicts a coverage map generated for data collected in the sieg hall building of the university of washington. picture  c  displays the coverage map of our laboratory environment. 

1 	closest location  cl  
a simple and frequently used strategy is to drive to the closest location at which the robot can gather information about a cell that has not been explored well enough. this way the question whether a cell has been explored well enough depends on the actual measure used to quantify the uncertainty about individual grid cells. in our approach this measure is the entropy. a cell is regarded as been sensed accurately enough if the entropy of the coverage belief does not exceed e or if it does not change any longer. this strategy cl does not take into account how much information will be obtained at a particular view-point. rather it seeks to minimize the distance to that location: 
		 1  
where l c  is the set of cells which have a grid cell with high entropy in its visible range and is the distance between the locations and given the current map of the environment. 
1 	maximum information gain  ig  and 
 ig-win  
the second strategy is solely governed by the information gain that can be obtained about the environment at a specific view-point. the information gain is defined as the change of entropy introduced by incorporating the measurement obtained at that location into the map. if we integrate a single measurement d into a cell  the information gain is defined as: 
 1  
where surement d according to our sensor model. the information gain of a measurement is then computed as the sum of the information gains for all cells covered by that measurement. since we do not know which measurement we will receive if the robot measures at a certain position  we have to integrate over all possible measurements to compute the expected information gain for that view-point: 
 1  
here is the set of cells covered by measurement d. to efficiently compute the likelihood of an observation we apply a ray-tracing technique similar to moravec and elfes using the current maximum likelihood coverage map. 
¡¡since the complexity of equation  1  depends exponentially on the number of dimensions of the measurement  we consider all measurements independently. for example  for our robot equipped with 1 ultrasound sensors we compute the average information gain over all 1 sensors. the next view-point is then defined as: 
		 1  
¡¡one of the disadvantages of this strategy is that it does not take into account the distance to be traveled by the robot. to deal with this problem we also consider the strategy ig-win which restricts the search for potential vantage points to a local window until this has been explored. once this has been done  there is no need for the robot to return to this area again. 
1 combination of ig and cl  ig-cl  
the final strategy discussed in this paper tries to combine the properties of the strategies cl and ig. the goal is to find an optimal tradeoff between the evaluation functions  1  and  1 : 

by adapting the weight a the user can easily influence the behavior of a robot and optimize its performance for a special task. a value close to zero results in a behavior similar to the strategy cl. for high values of a the strategy converges to the strategy ig. please note that functions of this type have successfully been applied in the past for coordinating multiple robots during exploration  1  1 . 
1 	experiments 
we implemented the models and exploration strategies described above and performed a series of exploration runs in different environments. the goal of the experiments presented in this section is to illustrate that a robot can build accurate maps using our models. additionally we describe experiments in which we analyze the properties of the four view-point selection techniques described above. 
1 	advantage over scan counting 
the first experiment is designed to illustrate that an approach which considers the uncertainty in the belief about the coverage of a cell to select view-points yields more accurate maps than techniques relying on scan counting approaches. scan 
robotics 


figure 1: these images depict maps and trajectories of the robot obtained in the corridor of our office environment. the left map  a  is a typical occupancy grid map obtained when every cell needs to be covered just once. image  b  shows a coverage map obtained with the strategy cl. the rightmost image  c  shows an occupancy map obtained using scan counting with a threshold of n = 1. 


counting techniques count the number of times a cell is intercepted by a measurement. several exploration techniques  1  1  1  assume that a place is explored if it has been scanned once. this is problematic especially when the underlying sensors are noisy. figure 1  a  shows a typical occupancy grid map of our laboratory environment obtained from real sonar data when using the scan counting technique. since the exploration process is stopped as soon as all reachable locations were covered by a measurement  many cells of the resulting occupancy map have a high uncertainty  see table 1 . this is due to the high amount of sensor noise  which sonars often produce. on the other hand  if we use our approach and consider the uncertainty in the coverage of individual cells to select view-points  the resulting maps are more accurate  see figure 1 b  . 
   obviously  a straightforward extension of the scan counting would be to assume that each cell has to be covered n times and not only once. an occupancy grid obtained by this extension can be seen in figure 1  c . in this experiment we additionally discounted longer beams in order to account for the fact that range sensors provide fewer information for distant places. whereas this map looks similar as the corresponding coverage map  the robot's uncertainty about the state of the environment is higher. this is illustrated by the values given in table 1. the right column of this table contains the percentage of cells in c for which the entropy exceeds the given threshold. thus  even extended scan counting does not guarantee that in the end every cell is explored well enough. typically  some cells will be measured too often  others not often enough. 
   figure 1 shows the result of a series of 1 simulation experiments. in these experiments we forced the robot to reach a scan count of n where n varied between 1 and 1 we counted the number of cells m that would be explored well enough given the entropy criterion for coverage maps and plotted the length of the overall path against m. the resulting graph is shown in figure 1. the cross on the right side indifigure 1: average path length of the robot depending on the number of sufficiently explored cells  left image  and the simulation environment used during this experiment  right image . 
cates the path length obtained when using the strategy  for coverage maps. as can be seen  if more than 1% of the map should be explored well enough  a decision-theoretic exploration strategy yields shorter trajectories than extended scan counting. 
1 	a comparison of the view-point selection strategies 
robots performing 1-d exploration tasks with sonars oder laser scanners normally integrate every sensor measurement because the amount of data is reasonably small and easy to integrate. in this section we consider the situation that analyzing a measurement produces high costs. this might by the case if e.g. the distance information needs to be extracted from stereo images. in such a situation the number of measurements needed for the exploration task is a value of interest. as mentioned above  one of the major advantages of our coverage maps is that they allow the integration of the uncertainty into the selection process of the next view-point. the experiments in this section are designed to compare the performance of the different strategies. to carry out the experiments  we varied the size of the local window when using  and the weight in the evaluation function of  see equation  1  . in figure 1  a  and  b  the numbers behind show the value of the weight  and the numbers behind indicate the radius of a circle which defines the local window. the results have been obtained using 1 runs per strategy in the environment shown in figure 1  d . please note that further experiments carried out in alternative environments showed similar results and are omitted for the sake of brevity. the maximum allowed entropy during all experiments described in this section was set to .1. 
¡¡figure 1  a  shows the average number of measurements necessary to complete the exploration task for each strategy. as can be seen from the figure  the strategy needs the minimum amount of measurements. the strategy with  needs approximately the same number of measure1 


figure 1: figure  a  shows the average number of measurements needed by different strategics  whereas in  b  depicts the average path length of the exploration for each strategy. the value behind shows the size of the local window and b e h i n d t h e value of the parameter a. the error-bars show the .1 significance interval. the images  c  and  d  show the paths driven during the exploration experiment. figure  c  shows a sample path of method and the  d  a path generated by 

ments as the strategy  requires the maximum number of measurements compared to all other strategies considered here. the reason is that it only seeks to minimize the path length without considering the information gained at particular locations. the error-bars correspond to the 1% confidence interval. 
¡¡in our experiments we found that a nearest neighbor viewpoint selection strategy like  outperforms an approach considering information gain if the robot is allowed to integrate measurements while it is moving  assuming that the acquisition and integration of measurements can be done fast . this can be seen in figure 1  b   which plots the average path length driven by the robot during the exploration task for all different strategies. with respect to the path length the strategy  shows the best behavior as the resulting trajectories are shorter than those of all other techniques. thus  the 	strategy efficiently covers the terrain. in contrast to that  the 	strategy ignores the distance to be driven and therefore produces an extremely long path which results in the worst behavior of all strategies  see also figure 1  & strategy with 	  appears to yield a good trade-off between number of measurements and overall path length. according to the experiments it slightly outperforms the  strategy. 
1 	conclusions 
in this paper we have introduced a new representation scheme for maps build with mobile robots from sensor data. in contrast to standard occupancy maps our coverage maps store a posterior for each cell about its coverage. this offers the opportunity to more accurately compute the uncertainty of the robot about the corresponding area in the environment. additionally  we have presented a sensor model designed to update these maps upon sensory input. finally  we have compared decision-theoretic approaches to guide a vehicle during exploration. 
¡¡the technique has been implemented and evaluated in extensive simulation runs and real world applications. the experiments illustrate that by using coverage maps it is possible to build accurate maps even if noisy sensors are used. experiments analyzing different exploration strategies indicate that a technique combining the maximum uncertainty reduction and the distance to be traveled yields the best trade-off between the number of necessary measurements and the length of the resulting paths. 
