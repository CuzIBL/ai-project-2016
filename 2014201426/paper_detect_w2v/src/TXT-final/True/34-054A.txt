
　　　this paper describes a program  bribip  capable of making decisions in an environment of imperfect information. it is frequently necessary that such decisions be made in r e a l l i f e - as  f o r example  the decisions made in the day-to-day running of a f i r m . as a paradigm of such s i t u a t i o n s   the game of contract bridge  1  was chosen  f o r several reasons: 
1  despite being a game of imperfect information  it is well-defined: in p a r t i c u l a r   tne scoring systems give a way of assessing the strength of any r e s u l t i n g program. 
1  although for any one player in the game  there is an environment of imperfect information  the four players between them have t o t a l knowledge of any s i t u a t i o n . this leads naturally to a program based on e x p l i c i t reasoning about why the other players react as tney do  rather than a p r o b a b l i s t i c approacn. this can be contrasted with games sucn as poker  where not a l l the cards are d e a l t   and thus a probablistic approach is necessary  even for humans. in f a c t   an e a r l i e r program  1   based on a p r o b a b l i s t i c approach  was w r i t t e n   and found to be unsatisfactory because the r e s u l t i n g data-structures were not subtle enough to r e f l e c t the l o g i c a l processes needed to play a good game  and because the p r o b a b l i s t i c approach severely underestimated the need for a detailed p l a n . in view of these d i f f i c u t i e s the current program  which can make e x p l i c i t deductions in a conniver-like fashion  has been b u i l t . 
1  tnere is a great deal of l i t e r a t u r e on the theory of bridge  and hence a wealth of suggestions as to how the program should work. many of these suggestions are not in an immediately useful form - f o r example  when it is hoped to add the p o s s i b i l i t y of a pseudo-squeeze to the other chances  one should f i r s t casn the winners in the s u i t where the length is v i s i b l e in dummy  - but they can be modified to suit our needs. however  many are in an immediately useful format  and can be straightway represented in the program - f o r example  open on 1 or more points and at least four of the s u i t     etc. 
1  the author is interested in bridge to the extent of representing essex university in club competitions. 
　　　the last two reasons are closely connected  and r e f l e c t a thesis which underlies t h i s research: that the best way to produce an i n t e l l i g e n t program is to code i n t o it expert knowledge. this has been seen to be true of chess   1     and of checkers  where samuel   1   1  co-operated with expert players in order to determine the parameters in his evaluation 
functions. 
　　　the program is w r i t t e n in popcorn   1     and occupies 1k of 1-bit core on the pdp-1  plus the p1 i n t e r p r e t e r and run-time system. the program bids to the standard of the average club player  and is capable of e x t r a c t i n g from a bidding sequence the d i r e c t inferences of the hidden hands  but not  as y e t   the i n d i r e c t inferences based on the unmade b i d s     and is capable of maintaining a  usually  consistent data-base r e f l e c t i n g the hidden hands  which it can also modify in the l i g h t of seeing the f i r s t card played and the dummy hand. the program bids at approximately the speed of a human player. several examples   i n which the program bids the south hands : 

1 

general approach 
　　　the program is based on two distinct but closely related ideas: f i r s t l y   close analysis of the bidding and the play to gain information previously unknown  and secondly  the u t i l i s a t i o n of such information  and the programs knowledge of the game  in the creation of a plan which the program can follow. 
　　　in making a plan  the program w i l l differ from most game-playing programs written to date  although miller  1   berliner and others have investigated a similar approach in the case of chess . the more usual tree-searching approach was rejected on several grounds: 
1  i am interested in transferring to the program the knowledge gained by bridgeplayers in the past decades. the body of such knowledge is vast  and to ignore it seems extremely short-sighted. the author is looking for an a r t i f i c i a l intelligence 
solution to the problem - and ai could well be defined as the implementation of knowledge/inference systems. it follows that instead of reducing this body of knowledge to a set of numbers  the author wishes explicitly to reason about i t . 
1  an evaluation function in a game of imperfect information would presumably return a probablistic result. this makes mini-maxing a complex task. one can conceive of singlevalued evaluation functions   such as the number of tricks won plus the expected number s t i l l to be won   but such functions are highly a r t i f i c i a l   and a great deal of information is lost in the process. 
1  any tree-searching method that truncates the tree  as must happen in a l l but a few cases in the later stages of the game  can f a l l foul of what berliner calls the 'horizon affect' - i.e. a false value is assigned to a given move; false because of an affect further down the tree  and thus invisible to the routine  
1  if one studies the concepts used by human bridge players  one finds such concepts as  bid to a slam    draw trumps    show f i r s t rouna control    finesse the queen of clubs   and so on. a successful bridge program w i l l also need to have such concepts  and the author does not believe that such detailed planning is possible in an evaluation function. it is f a i r l y clear  however  how mini-strategies of such a form can be generated by a reasoning program. 
	information 	available 
　　　probably the most important activity performed by the program is the collection of information about the hidden hands. there are several opportunities for collecting such 
information: 
1 

       f i r s t l y   during the bidding stage  wnere the program attempts to gauge the strengths and weaknesses  perhaps even to the point of holding  or not holding  i n d i v i d u a l cards  of the nidden hands  from wnat bids tney make. there a r t two aspects to t n i s : tne straightforward aspect of analysing tne meaning of each b i d   and the more subtle aspect of considering wny a d i f f e r e n t bid was not made. i'or example  consider tne p a r t i a l sequence: 

wnat information is available from south's bid of 1 s   nere we assune that north/south use the bidding system known as essex standard acol . tnis can be simply interpreted as snowing a nighcard points count of at least 1  and at least 1 spades. nowever  a deeper analysis is possible  and yields more information. if we assume that south is making wnat he believes to be his best b i d   tnen tne bid of 1 s describes nis nand more precisely tnan any other. from t h i s   we may i n f e r that he holds more spades tnan  say  diamonds  as with longer diamonds  or with an equal number  ne would have bid 1 d   i t being a cheaper b i d   . s i m i l a r l y   he cannot hold more than three clubs  or ne would have bid 1 c. more information is available from the facts tnat ne did not bid 1 h  1 nt  e t c . etc. to f a c i l i t a t e the description of ones hand  there have evolved bidding conventions - pre-arranged bids with special meanings describing the hand. these conventions are gathered together in s e l f consistent systems  such as goren   1     acol   1     roman  1  e t c . while such systems provide useful guidelines f o r tne b i d d i n g   they by no means make the process of bidding mechanical. within any system there is a need f o r detailed l o g i c a l thought in choosing the b i d . consequently  the planning section of the program is included as part of the bidding. consider tne following hand: 

f a i r l y obviously  with t h i s hand  one can make b s with no help from partner  1 s if partner holds one of the missing aces  and 1 nt should he hold both. the correct b i d   t h e r e f o r e   would be an asking b i d   enquiring of partner how many aces he held. however  the thought  i can make 1 s  plus a t r i c k for every ace partner holds  implies the existence  and perhaps construction  of a rudimentary or p a r t i a l plan for so doing. 
　　　the actual process of t r a n s f e r r i n g information between the players is best considered in four sections  mirrored by four routines in the program. 	one routine is used once in every round of bidding to choose the programs own bids  another i n t e r p r e t s the partners bidding  and the remaining two i n t e r p r e t the opponents bidding. 	at f i r s t s i g h t   one might believe that the three i n t e r p r e t i n g 
r o u t i n e s are c l o s e l y connected  and i n t h e t r i v i a l sense t h a t they a l l update t h e same d a t a base t h e y a r e     but i t i s u s e f u l t o s e p a r a t e 
them  a s they have s l i g h t l y d i f f e r i n g e f f e c t s concerned w i t h i n t e r - p r o c e s s communication. 
       i n t e r - p r o c e s s communication i s modelled by messages which o v e r r i d e t h e standard a c t i o n o f t h e r e c e i v i n g r o u t i n e . f o r example  s h o u l d t h e program make t h e 1 nt b i d d e s c r i b e d a b o v e   i t w i l l send t o t h e r o u t i n e i n t e r p r e t i n g p a r t n e r s response a message s a y i n g  i have j u s t made a blackwood b i d a s k i n g f o r a c e s . 
i n t e r p r e t 	the b i d you r e c e i v e 	i n 	t h a t 	l i g h t   . 
       a l l f o u r r o u t i n e s have t o access knowledge o f the b i d d i n g system. there are s e v e r a l ways in which t h i s c o u l d be done. in one p o s s i b l e method  t h e system is held as a d a t a s t r u c t u r e - most p r o b a b l y a t r e e - and t h e n a l l the r o u t i n e s i n t e r p r e t i t . t h i s seems to be t h e most c o m p u t a t i o n a l l y f e a s i b l e method  and has been used b e f o r e   1     but is somewhat u n s a t i s f a c t o r y i n t h a t t h e d a t a s t r u c t u r e w i l l be o n l y a vague a p p r o x i m a t i o n to t h e t r u e t r e e - which would be of astronomic s i z e . a p r e f e r r e d approach is to have the main p a r t s of the system coded as m i n i - p r o c e d u r e s   f o r example conniver m e t h o d s     and add t h e s e methods t o   o r d e l e t e them f r o m   t h e data-base a s t h e y become r e l e v a n t . 
       h o p e f u l l y   we s h o u l d emerge from t h e b i d d i n g sequence w i t h a r e a s o n a b l y a c c u r a t e 
       p r e d i c t i o n about t h e hidden hands  and a 
       t e n t a t i v e p l a n as to how t h e c o n t r a c t c o u l d 
       be made  or d e f e a t e d   as t h e case may be. 
       a t t h i s p o i n t   the p l a y i n g stage i s e n t e r e d . 
       a f t e r t h e f i r s t l e a d   t h e dummy hand i s s p r e a d   
       and t h e dummy t a k e s no f u r t h e r p a r t in t h e p l a y o f t h i s hand. 
       assuming t h e program not to be dummy  i t has two connected t a s k s t o p e r f o r m a t t h i s p o i n t . i t should r e v i e w the b i d d i n g   but t h i s t i m e knowing the dummy h a n d   and s e e i n g whether any o f i t s assumptions are e i t h e r u n t e n a b l e   or nedd m o d i f y i n g - one can o f t e n p i n p o i n t the l o c a t i o n o f s e v e r a l key cards i n t h i s way. suppose t h e program h o l d s t h e aces of h e a r t s and c l u b s   and south has made a b i d i n d i c a t i n g t h e h o l d i n g of one a c e . t h e n   should dummy h o l d t h e ace of diamonds  we may p l a c e south w i t h t h e ace of spades  and v i c e v e r s a . this r e v i e w w i l l be made c o n s i d e r a b l y more e f f i c i e n t i f t h e program b u i l d s u p   d u r i n g the b i d d i n g s t a g e   a l i s t o f cues f o r t h i n g s f o r which to watch dummy. concurrent w i t h t h i s improvement o f t h e d a t a - b a s e   t h e r e 
       should be an analogous improvement of t h e p l a n . 
	program 	d e t a i l s 
1        a f t e r t h e c o m p a r a t i v e f a i l u r e o f bripp1   t h e e a r l i e r   and u n s u c c e s s f u l   program based o n p r o b a b l i s t i c t e c h n i q u e s     i t was decided t o w r i t e bribip w i t h d i f f e r e n t d e s i g n d e c i s i o n s a s p r e v i o u s l y d e s c r i b e d . 
　　　tne p a r t i c u l a r bidding systems implemented is a highly-modified version of acol used by some of the university of essex bridge team. this is described in 	 1 . 	this system was cnosen as tne author was f a m i l i a r with i t . us rs of standard acol may f i n d some bids unusual - t h i s is due to e c c e n t r i c i t i e s in the bidding system  not to bugs in the program. 
　　　to demonstrate the operation in the program  we work through a d e a l   showing the various routines in operation. the program bids the south hand  and east is the dealer. the four hands  of which the program only knows i t s own  of course  are: 
　　　having received i t s hand - in t h i s case from tne t e l e t y p e   but there is also the f a c i l i t y of computer-dealt hands - the program analyses i t s hand f o r various features. 
　　　the features routine returns seven features of the hand: 
1  the highcard points count. this is used to determine whether or not the programs hand is strong enough to open the b i d d i n g   or to respond  or whether a special opening bid is permissable. 
1  an estimate of the playing strength of each s u i t . 	the actual estimate returned is the length plus one-tenth the points count  with a weighting of 1 on majours. 	thus souths spades are rated at 1* 1 + 1  = 1. 
1  a l i s t of the s u i t s in which the hand has f i r s t - r o u n d c o n t r o l   by which we mean an ace or void - the point being that if that suit is l e d   the hand can almost c e r t a i n l y win the t r i c k . 1  tne d i s t r i b u t i o n points count. 
1  wnetner or not the hand is balanced. a balanced hand is a prerequisite for the program to consider a natural  as opposed to conventional  bid in notrumps. 
b  1 if the hand is not suitable for a weak two opening  or the possible s u i t if it i s . 
1  ♂ 1f tne hand is not suitable for a preemptive b i d   o r t h e s u i t i f i t i s . thus  in t n i s case features returns 

and  as a side e f f e c t   adds to the data-base various facts about the hand - which cards are h e l d   the length of each s u i t   the points in each s u i t   and the t o t a l points-count. it is true that the same facts are also held e x p l i c i t l y   but it is useful to have them duplicated in the data-base  as  in c o n n i v e r - l i k e languages such as popcorn  ifadded methods are used to i n t e r a c t with the facts in the data-base. for example  there is an ifadded method invoked whenever any player shows f i r s t - r o u n d c o n t r o l . this method searches the data-base f o r the fact that any players  other than the one showing f i r s t - r o u n d c o n t r o l   but including the program i t s e l f   is known to hold the ace in the s u i t . if so  then we know the f i r s t - r o u n d control is based on a void. 
       control then enters the bidding routine proper. it f i r s t i n i t i a l i z e s some variables and  pseudo-variables . these pseudo-variables appear to be standard v a r i a b l e s   but behind the scenes they are functions that access and/or update the data-base. east opens 'nobid'. bribip is aware that 1 points or more is needed to open the b i d d i n g   and so concludes that east holds  at most  1 p o i n t s . this fact is added to the data-base. since east  having nobid once  is l i k e l y to continue doing so  especially if west also n o t i d s   . brbip henceforth expects east to nobid  and w i l l only analyse other   i n some sense ' s u r p r i z i n g '   b i d s . 
       it is then the programs turn to b i d . having f i r s t checked that it does not hold a hand q u a l i f y i n g f o r a special opening b i d   it considers the p o s s i b i l i t y of making a standard s u i t opening. the only requirement f o r t h i s is at least 1 p o i n t s   and t h i s is eminently possible. having s a t i s f i e d i t s e l f that it has the strength to do so  it calculates which is i t s best s u i t   i n t h i s case  spades  and bids i s . it then i n t e r p r e t s i t s own bid - at f i r s t sight a superfluous process  but in practise useful f o r the facts added to the data base. the i n t e r p r e t a t i o n adds the fact that south bid spades to the base  and sets the value of the pseudo-variable weveopened. in f a c t   two databases are used - one to hold a l l facts bribip knows  and another a l l facts bribip has shown. 
　　　west nobids  and is marked as holding less than 1 points. 
　　　north responds 1s. this is analysed as a standard response  showing a points count of 1 or more. this is added to the data-base  along with the information that north bid spades. the addition of norths points count t r i g g e r s an ifadded method that calculates s a f e l e v e l   in t h i s case 1  safelevel is a pseudo-variable used to estimate whether there are good reasons to suppose a game or slam is on  and thus to decide whether there is any point in showing f i r s t - r o u n d controls. the addition of the fact that north bid spades t r i g g e r s an ifadded 
method that discovers that both sides of the partnership have bid in spades: thus spades is agreed as the trump s u i t . 
1 

　　　east again nobids  as expected   both east and west w i l l nobid throughout the auction  and w i l l not be considered any more in this analysis. 
　　　it is now souths turn to rebid. safelevel indicates the possibility of game  and trumps have been decided  and therefore the program decides that it is time to show first-round controls. south holds first-round control in three suits  diamonds  hearts and spades   and so he makes the lowest first-round control bid open to him  i.e. 1 d. 
　　　north responds 1 c. this is interpreted as showing first-round control in clubs  and denying first-round control in hearts - had he first-round control in hearts  he would have made the cheaper bid of 1 h. 
　　　south now shows his first-round control of hearts  by bidding 1 h. 
　　　north  whose bidding has so far not shown the power of his hand  now decides that if south  by himself  believes that game is on  then a slam is a distinct possibility. instead of signing off in spades  he therefore bids 1 nt. this is analysed as being a blackwood b i d   asking for aces. the interpreting routine passes this 
message to the bid-choosing routine. 
　　　when south again comes to b i d   it sees the message  and thus invokes the blackwood routine. blackwood counts the aces  finds three  and so returns a bid of s c.  note for cognescenti: we use roman blackwood . 
　　　north is thus assured that the partnersnip holds a l l the aces  and so asks for kings by bidding 1 nt. this is interpreted by bribip as being a blackwood bid as before. 
　　　therefore  south shows the holding of one king  by bidding b d. 
　　　north can then t e l l that the partnership holds a l l the aces  a l l the kings  at the very least 1 of the spades  and good opportunities for ruffing  for example  the clubs . he therefore bids 1 s  which is passed out  and can be made without d i f f i c u l t y . 
conclusions 
　　　the project was started in the hope of obtaining some general principles of decisionmaking in environments of imperfect information. to date  the only such principle found is the negative one; that probablistic methods are not in themselves sufficient. it was hoped to keep knowledge of bridge peripheral to the program  and use a general core  but it was found necessary to put this knowledge in the core i t s e l f . this leaves the author somewhat pessimistic about the possibility of a general program for decision-making. 
1 
