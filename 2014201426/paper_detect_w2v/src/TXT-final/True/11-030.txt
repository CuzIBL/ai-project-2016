 
       this paper presents an overview of an a l g o r i t h m f o r r i b d e t e c t i o n in chest x - r a y s . the goal o f the a l g o r i t h m i s t o r e t u r n the l o c a t i o n o f the borders of the r i b s to a screening system to enable i n t e r c o s t a l spaces to be e x t r a c t e d and analysed. 
　　the d e t e c t i o n of o b j e c t s in p i c t u r e s can usua l l y be separated i n t o two s t e p s : image enhancement and f e a t u r e e x t r a c t i o n . the amount of comput a t i o n r e q u i r e d by our a l g o r i t h m is minimized by processing only t h a t i n f o r m a t i o n which is required to achieve the goal of the a l g o r i t h m   and by using knowledge of the s t r u c t u r e of the r i b cage to uide the e x t r a c t i o n of the r i b borders. in pari c u l a r   s i g n i f i c a n t r e d u c t i o n i n computation i s achieved by a v o i d i n g the enhancement of the e n t i r e p i c t u r e . i n a d d i t i o n   not a l l p o i n t s i n the image need be considered as p o s s i b l e r i b border p o i n t s   nor do a l l p o i n t s on each r i b border need be detected . 
       the r i b borders are returned to the screening system as second degree p o l y n o m i a l s . results or t e s t i n g the a l g o r i t h m for a set of chest r a d i o graphs are i l l u s t r a t e d by superimposing the detected r i b borders onto the x-ray images. 
	1 	previous 	work 
       the e x i s t i n g a l g o r i t h m s f o r automatic r i b d e t e c t i o n by toriwaki  tor-1a . wechsler  wec-1a  wec-1b  and persoon  per-1  have a l l taken the approach of f i r s t preprocessing the e n -
- t i r e image by g l o b a l o p e r a t i o n s to enhance it and then f i n d i n g a l l the p o i n t s on each r i b border. 
       i f these a l g o r i t h m s are considered c a r e f u l l y   it becomes apparent t h a t much of the computation done by these three methods is not necessary. in a l l t h r e e a l g o r i t h m s   every p o i n t on each r i b 
       border i s   at sometime  l o c a t e d . as each border is represented by a low order p o l y n o m i a l   only a small number of p o i n t s need be located on each curve. furthermore  performing an o p e r a t i o n on the whole p i c t u r e or c o n s i d e r i n g a l l p o i n t s as equal candidates f o r r i b borders is both unnecessary and expensive. 
1 - 1 overview of the 	algorithm 
       d e t e c t i o n of the r i b borders procedes s e p a r a t e l y f o r each l u n g . the i n i t i a l step l o cates the lower border of two adjacent r i b s in the upper middle p o r t i o n of the lung f i e l d ; the average w i d t h of one of these s t a r t i n g r i b s is a l s o c a l c u l a t e d . the next step s e l e c t s v e r t i c a l s l i c e s through the lung f i e l d   enchances them  and d e t e c t s r i b border p o i n t s . the l o c a t i o n of the two s t a r t i n g r i b s and the average r i b width is used to guide the search on each s l i c e f o r the remaining r i b s . when border p o i n t s have been detected o n a l l s l i c e s   they are l i n k e d together to form a set of p o i n t s f o r each r i b border. f i n a l l y   second degree polynomials are f i t t e d to each b o r d e r . 
1 d e t e c t i n   of the. starting ribs  
in order to determine candidate areas f o r the 
this work has been supported by medicrch 
council of canada g r a n t ma1. and by national research council of canada grant a1. 
d e t e c t i o n of a l l the r i b borders on each s l i c e   two q u a n t i t i e s are r e q u i r e d : 1  the distance between two adjacent r i b s and 1  the average width qf one of these r i b s . 
       an extensive search f o r the s t a r t i n g r i b s is necessary because 1  the s t a r t i n g r i b s must be acc u r a t e l y found in order to provide i n f o r m a t i o n for the s e l e c t i o n of candidate areas f o r the remaining r i b s   and 1  there is no p r i o r knowledge about t h e i r expected p o s i t i o n s or width to guide the search. the d e t e c t i o n of the s t a r t i n g r i b s proceeds in the f o l l o w i n g 1 s t e p s : 
i  the 	area 	of search 	is 	selected 
       a s e c t i o n of the image is chosen which l i e s midway in the lung f i e l d between the bottom and the top of the l u n g . the s e c t i o n is 1 columns wide and 1 rows high  the o r i g i n a l image is 1 : t h i s covers an area of the image  from the mediastinum to the outside of the thorax and is large enough to include at l e a s t two complete r i b images. 
i i   	the selected 	area 	is pre-processed 
       the selected region is pre-processed using h y s t e r e s i s smoothing -  dud-1 . the smoothing w i n dow height is chosen dynamically via an a n a l y s i s of a grey l e v e l d i s t a n c e histogram. 
i i i   	detection o f possible 	rib borders 
       a f u n c i o n   mrib  is applied to each of the smoothed columns. mrib measures the amount a given i n t e r v a l on a s l i c e corresponds to a r i b image  by comparing the average grey l e v e l w i t h i n an i n t e r v a l w i t h t h a t o u t s i d e the i n t e r v a l . mrib i s a p p l i e d using a range of p o t e n t i a l s t a r t i n g points and r i b w i d t h s . e s s e n t i a l l y mrib behaves l i k e a 
       c o r r e l a t i o n f u n c t i o n . 
iv.  	l i n k i n g two sets 	of 	border points 
       the number of possible border p o i n t s occurr i n g at each of the 1 rows of the s e c t i o n is c a l c u l a t e d   two of the rows  r1 and r1  are selected as the rows c o n t a i n i n g the l a r g e s t number of poss i b l e border p o i n t s provided t h a t these rows are between 1 and 1 rows a p a r t . r1 and r1 are a s sumed to occur at the peaks in the curves of two adjacent r i b s . 
       two sets of p o i n t s are formed as the lower border p o i n t s of the two r i b s . the f i r s t p o i n t s entered in each sets are those possible border p o i n t s in smoothed columns which are c l o s e s t to r1 and r1  r e s p e c t i v e l y   the remaining p o i n t s in the sets are selected from the possible border p o i n t s in columns t h a t are c l o s e s t to the p r e v i o u s l y selected p o i n t s . 
v  	c a l c u l a t i o n of ttig. average rib width 
       the set of most l i k e l y widths of r i b s is averaged to o b t a i n the w i d t h of one of the s t a r t i n g r i b s . 
1rl d e t e c t i o n 	of 	other 	ribs 
       the other r i b s are detected by searching above or below already known r i b borders in an area in which the next r i b is expected to be l o c a t e d . r e l a t i o n s h i p s between i n t e r - r i b spacings have been demonstrated by persoon   p e r - 1     and v e r i f i e d by u s . the r i b border p o i n t s are found on a number of v e r t i c a l s l i c e s through the lung f i e l d s . the s l i c e s are spaced s e v e r a l columns a p a r t as not a l l p o i n t s on the r i b border are 

v i s i o n - 1 : 
1 

b r a c e 

necessary. 
1 experiments 
　　　our rib detection algorithm has been used to detect ribs in several chest radiographs. these x-rays show a variety of qualities  both in disease state and in film quality  to i l l u s t r a t e the results of the algorithm  the detected borders have been superimposed onto the image. figures 1a-1c show each radiograph; figures 1a-1c show the same x-ray with the rib borders superimposed. 
　　　as can be seen in the i l l u s t r a t i o n s   the a l gorithm is f a i r l y successful for good quality films; usually 1 pairs of ribs are detected. failure to detect a rib has five main causes: 
　　　1  the clavicle. because the image of the clavicle is similar in nature to the rib images and crosses the ribs at the top of the lung  rib border points are sometimes chosen which are actually borders of the clavicle. this occurs more frequently in images with very dark lung f i e l d s   such as in the image shown in figure 1-c  where the clavicle is more visible than the ribs. 
　　　1  the diaphragm area. if the bottom rib is close to the diaphragm  or the diaphragm does not have a sharp border  figure 1-c   points may be detected in the diaphragm instead of at the ribs or the points may be missed. in addition  if breast tissue is present in the x-ray then points may be detected in that tissue near the outside of the thorax rather than on the rib below. 
　　1  the heart border. the actual edges of the heart may be sufficiently lower in gray level than the estimated white value to allow some border points of the heart to be detected as rib borders  these points usually l i e close enough to the actual ribs to be included as border points but far enough away to make the curves representing the ribs inaccurate. 
　　　1  dark areas. if some of the ribs are not distinguishable in very dark lung fields  then several border points may be missing from those ribs. if there are large gaps in the ribs then the sets of border points may be incorrectly linked and the resulting curves may be inaccurate or unacceptable  this is the cause of missing rib borders in figures 1-b and 1-c. 
　　　1  disease. if disease obscures the ribs then border points may be missing or inaccurate  the algorithm is able to overcome tumours which do not completely obscure the ribs but performs poorly when a large amount of disease is present as in figure 1-c. in such cases the ribs are not v i s i ble anyway and the x-ray should be considered as abnormal. 
bibliography 
dud-1 	- 	duda r.o. 	and 	p.e. 	hart  	pattern 
classification and scene analysis. new york: john wiley  1.. 
per-1 - persoon e.  a new edge detection algorithm and i t s application in picture processing   school of electrical engineering  purdue university  tr-ee 1  october  1. 
tor-1a- 	toriwaki j.  	y.suenaga  	t.negoro  
t.fukumura  	 pattern 	recognition 	of chest x-ray 
images   computer graphics and image processing 1  pp. 1 ' 1. 
wec-1a- wechsler h. and j.sklansky   automatic detection of contours of ribs in chest radiographs   school of engineering  university of cali f o r n i a   irvine  tr-1  february 1. 
wec-1b- wechsler h.   automatic detection of 	rib 
contours in chest radiographs   phd dissertation  university of california  irvine  1. 

knowledge-base driven analysis of cinecardioangiograms 

these characteristics has already been implemented  reeves and buxton   1     . 

john k. tsotsos 
department of computer science 
university of toronto 
toronto  ontario  canada  m1s 1 
　　　　　this short note describes research into the application of ai techniques to the analysis of cinecardioangiograms. these are x-ray films of the heart taken while a radiopaque dye is injected into the heart cavity. the f i l m shows the opacified blood inside the l e f t v e n t r i c l e   thus o u t l i n i n g the inside wall of the cavity. the problem is to b u i l d a knowledge base which can guide the analysis of the motion of the walls in these f i l m s   determine the various parameters which physicians use in t h e i r diagnoses and recognize abnormalities of heart wall motion. 
　　　　　this research is being done in conjunction with the cardiovascular unit at toronto general hospital. the role of the medical experts is to provide the knowledge necessary for construction of the knowledge base and  to evaluate the performance of the system we produce. 
　　　　　another aspect of the project is to develop front and back ends to the knowledge based system. the front end consists of a d i g i t i z e r for the f i l m s   and a picture processing module which can accept guidance from the higher levels of the system. the back end includes displays for the information determined  graphs and movies of what the system recogni zes . 
　　　　　now that the overall scope of the project has been o u t l i n e d   l e t us look a l i t t l e more closely at the knowledge-based understanding p a r t . the general methodology is based on work by badler  and tsotsos   1 . the low level part has the following features: i  it implements a basic independent algorithm for determining the heart wall border  freuder  has a s i m i l a r l y b u i l t low l e v e l   ; i i   it can accept advice from the higher levels of the system on where to look for a border  this is useful for following around the border once i t s motion characteristics have been roughly determined ; i i i   it asks the high levels for v e r i f i c a t i o n as to whether a p a r t i c u l a r section of proposed border r e a l l y does belong to the border; iv  when i t thinks i t i s l o s t   i t asks the higher levels for r e - o r i e n t a t i o n ; 
v  it can communicate with the higher levels of the system while running in p a r a l l e l w i t h and independently of the remainder of the system. a system with the remainder of the system simulates the motion of the l e f t v e n t r i c l e using a 1-d thick-walled patch model  and uses t h i s model to guide the low l e v e l . each patch is an i n s t a n t i a t i o n of one of several heart muscle frames  minsky 1  . such a frame defines the properties of the patch during a heart cycle: shape and size changes  note that the constructs for the representation of these concepts were not handled by badler  and tsotsos   1     ; v e l o c i t y and t r a j e c t o r y information; normal and abnormal motions with tolerances. such information is clearly dependent on the actual heart viewed and on the patch location w i t h i n the w a l l . it is hoped that such information can be derived from the model using the fact that the contract i o n of muscle f i b e r generates a force but the knowledge of medical researchers on t h i s is very l i m i t e d and thus this may be hoping for a b i t too much. 
　　　　　using t h i s 1-d model the location of the border is predicted  image by image  by simply using the angle of the x-rays  which is known  incident of the heart and taking a p r o j e c t i o n on t h i s plane. this information is then used to guide the low l e v e l . the low level returns the actual borders found and the model is perturbed to f i t t h i s data. during this process  various parts of the patch frame  sub-frames  are activated to account for abnormal or unexplicable motion. 
