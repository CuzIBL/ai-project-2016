learning algorithms for software agents in uncertain and untrusted market environments 
thomas tran and robin cohen 
school of computer science  university of waterloo 
waterloo  on  canada n1l 1 
{tt1tran  rcohen} math.uwaterloo.ca 
　
　the problem of how to develop algorithms that guide the behaviour of personal  intelligent software agents participating in electronic marketplaces is a subject of increasing interest from both the academic and industrial research communities. since a multi-agent electronic market environment is  by its very nature  open  dynamic  uncertain  and untrusted  it is very important that participant agents are equipped with effective and feasible learning algorithms in order to achieve their goals. in this paper  we propose algorithms for buying and selling agents in electronic marketplaces  based on reputation modelling and reinforcement learning  rl . 
　we model the agent environment as an open marketplace which is populated with economic agents  buyers and sellers   freely entering or leaving the market. the process of buying and selling goods is realized via a 1-phase mechanism:  i  a buyer announces its request for a good   ii  sellers submit bids for delivering such goods.  iii  the buyer evaluates the submitted bids and selects a suitable seller. thus  the buying and selling process can be viewed as an auction where a seller is said to be winning the auction if it is able to sell its good to the buyer. we assume that the quality of a good offered by different sellers may not be the same  a seller may alter the quality of its goods  and there may be dishonest sellers in the market. we also assume that a buyer can examine the quality of the good it purchases only after it receives that good from the selected seller. 
　in our approach  buying agents learn to avoid the risk of purchasing low quality goods and to maximize their expected value of goods by dynamically maintaining sets of reputable and disreputable sellers. selling agents learn to maximize their expected profits by adjusting product prices and optionally altering the quality of their goods. 
　in our buying algorithm  a buyer b uses an expected value function /1  where fb g p s  represents buyer b's expected value of buying good g at price p from seller s. buyer b maintains reputation ratings for all sellers  and chooses among its set of reputable sellers sb a seller s that offers good g at price p with maximum expected value. in addition  with a small probability p  buyer b chooses to explore  rather than exploit  the marketplace to discover new reputable sellers by randomly selecting a seller 1  provided that s is not from the set of disreputable sellers sbdr. after paying seller s and receiving good g  buyer b can examine the quality q of g and calculate the true value vb g p q  of g. the expected value function fb is incrementally learned in an rl framework: 
where a is called the learning rate 
utation rating of s is then updated based on whether or not the true value of good g is greater than or equal to the value demanded by b. our reputation updating scheme implements the traditional ideas that reputation should be difficult to build up but easy to tear down  and that a transaction with higher value should be more appreciated than a lower one. the set of reputable and disreputable sellers are accord-
ingly re-calculated based on the updated reputation rating of 
s. 
　in our selling algorithm  a seller s makes use of an expected profit function  where  g p b  represents seller s expected profit if it sells good g at price p to buyer b. seller s chooses a price  to sell good g to buyer b such that its expected profit is maximized. after the transaction  the expected profit function hs is learned incrementally using rl: 
 where is the actual profit of seller s when it sells good g at price p to buyer 1  and is defined as follows: 
if .s wins the auction otherwise. 
 where  g  b  is the cost of seller s to produce good g for buyer b. our selling algorithm also allows sellers to alter the quality of their goods in order to meet the buyers' needs and to further increase their future profit  depending on the success of their previous sales with the buyers. 
　we believe that our approach should lead to improved satisfaction for buyers and sellers  since buyers should be less at risk of purchasing low quality goods when maintaining sets of reputable and disreputable sellers  and since sellers are allowed to adjust both price and quality to meet the buyers' demands. 
　we have performed experimentation to measure the value of our model on both microscopic and macroscopic levels. on the micro level  we were interested in examining the individual benefit of agents  particularly their level of satisfaction. our experimental results show that in both modest and large sized marketplaces  buyers following the proposed buying algorithm  i.e.  using the combination of rl and reputation modelling  will achieve better satisfaction than buyers using 
　
poster papers 	1 
　
rl alone  and that sellers following the proposed selling algorithm  i.e.  using rl and adjusting product quality  will make better profit than sellers using only rl. on the macro level  we studied how a market populated with our buyers and sellers would behave as a whole. our results demonstrate that such a market can reach an equilibrium state where the agent population remains stable  as some sellers who repeatedly fail to sell their goods will decide to leave the market   and this equilibrium is optimal for the participant agents. 
　we report some experimental results confirming the satisfaction of buyers following the proposed algorithm in a large sized marketplace. the simulated market is populated with 
1 sellers and 1 buyers where each buyer participates in 1 auctions. the seller population is equally divided into four groups: group a offers goods with quality chosen randomly from the quality interval  1  1 . group b consists of dishonest sellers  who try to attract buyers with high quality goods  q = 1  and then cheat them with really low quality ones  q = 1 . sellers in group c use rl but do not consider adjusting product quality; they offer goods with fixed quality 1. sellers in group d follow the proposed selling algorithm and offer goods with initial quality 1. the buyer population is divided equally into two groups: group i uses rl alone and group ii follows the proposed buying algorithm. we set quality equal to cost to support the common idea that it costs more to produce high quality goods. also  we set the true product value vb = 1.bq - p  the demanded product value tf1 = 1  the learning rate a = 1 and exploration rate p = 1 initially with both decreased over time by factor 1 down to amin- pmin = 1 . 1 . the results reported here are based on the average taken over the respective populations of the two groups of buyers. 
　figure 1 a  and  b  present the histograms of true product values obtained by a buyer using rl alone  and by a buyer following the proposed buying algorithm  respectively. clearly  the buyer following the proposed algorithm receives more goods with higher value  vb = 1  and fewer goods with lower values  vb = 1... 1   and is therefore better satisfied. in particular  the buyer following the proposed algorithm makes about 1 more purchases with high product value of 1  or 1 times greater  than those purchases made by the buyer using rl alone. 
　we are also interested in seeing how much better the buyer following the proposed algorithm is able to avoid interaction with the dishonest sellers. figure 1 a  and  b  show the profits made by the dishonest sellers from the buyer using rl alone  and from the buyer following the proposed algorithm  respectively. we notice that graph  a  is higher than graph  b   indicating that the dishonest sellers are able to make more profit from those buyers that only use rl but do not model sellers' reputation. moreover  the profit in graph  b  is reduced to zero after about 1 auctions  implying that in the long run the dishonest sellers are not able to make any profit from the buyer following the proposed algorithm  because they are rated as disreputable sellers and therefore no longer chosen by the buyer. 

figure 1: histograms of true product values obtained by a buyer using rl alone  a   and a buyer using the proposed algorithm  b . 

figure 1: profits made by the dishonest sellers from the buyer using rl alone  a   and the buyer using the proposed algorithm  b . 
　in general  our work demonstrates that reputation modelling can be used in combination with reinforcement learning to design intelligent learning agents that participate in electronic marketplaces. this research also aims to provide a principled framework for building effective economic agents and desirable electronic market environments. 
　
1 	poster papers 
