 
the original formulation of sharedplans  grosz and sidner  1  was developed to provide a model of collaborative planning in which it was not necessary for one agent to have intentions toward an act of a different agent. this formulation provided for two agents to coordinate their activities without introducing any notion of jointly held intentions  or  'weintentions' . however  it only treated activities that directly decomposed into single agents actions. in this paper we provide a revised and expanded version of sharedplans that accommodates actions involving groups of agents as well as complex actions that decompose into multi-agent actions. the new definitions also allow for contracting out certain actions  and provide a model with the features required in bratman's account of shared cooperative activity  bratman  1 . a reformulation of the model of individual plans that meshes with the definition of sharedplans is also provided. 
1 	introduction 
collaboration in planning and acting is an essential ingredient of multi-agent cooperative problem solving. in this paper we present a model of collaborative planning that supports cooperative problem solving by teams consisting of humans and computer systems. the model deals more completely with collaboration than previous theories did in meeting two criteria. first  collaborative planning and activity cannot be analyzed simply in terms of the plans of individual agents  but require an integrated treatment of the beliefs and intentions of the different collaborating agents. second  collaborative planning is a refinement process; a partial plan description is modified over the course of planning by the mul-
   * we thank joyce friedman for many provoking questions  and karen lochbaum for the same and for helpful comments on many drafts. this research was initiated when the first author was a harold perlman visiting professor  hebrew university  jerusalem. partial support for the first author was provided by u s west advanced technologies. the second author was supported by nsf grant no. iri-1. 
   bar ilan university  ramat gan  1 israel sarit bimacs.cs.biu.ac.il 
tiple collaborating agents. this model grew out of an attempt to provide an adequate treatment of the intentional component of discourse structure  grosz and sidner  1 . however  many multi-agent situations require that agents have an ability to plan and act together; merely avoiding conflicting actions or situations is not sufficient. thus  the model is applicable not only to natural language processing  but also to the general problem of the design of computer-based collaborating agents. 
　the original formulation of the sharedplan model of collaborative planning  grosz and sidner  1  extended pollack's mental state model of plans  pollack  1  to the situation in which two agents jointly have a plan to perform some action requiring actions by both agents. pollack s definition of the individual plan of an individual agent to do an action a includes four constituent mental attitudes:  1  belief that performance of certain actions would entail performance of we will refer to the as constituting  a recipe for    1  belief that the agent could perform each of the  1  intentions to do each of the   1  an intention to do a by doing the  to define sharedplans  grosz and sidner modified these components to provide a specification of the set of beliefs and intentions required for collaborative action. in subsequent work  lochbaum et al.  1; lochbaum  1   algorithms were provided for constructing and augmenting sharedplans in the context of a dialogue. 
　although this formulation overcame several problems of previous models of planning for discourse  e.g. the treatment of intentions of one agent toward another agents actions in applications of speech act theory  allen and perrault  1    it had several problems that emerged when we attempted to apply it  lochbaum et al.  1; lochbaum  1 . first  the original model 
presumed that every multi-agent action decomposed directly into single agent actions  a similar assumption underlies several alternative models  e.g.  cohen and levesque  1  . as a result  the model did not adequately provide for complex activities involving joint activity at multiple levels or for meshing of individual plans for individual action with collaborative plans for joint activity. second  the model did not account for the commitment of an agent to the success of a collaborative partner's actions. this omission combined with the first 
grosz and kraus 
so that the model accepted some plans as collaborative that were not.1 third  the agents who undertake the development of a collaborative plan often do not know a complete recipe for accomplishing their joint action; the model did not provide a sufficient means of describing the mental state of agents in this situation.1 each of these problems is addressed in this paper. 
   collaborative activity must rest eventually on the actions of individual agents; thus  sharedplans must include as constituents at some levels the individual plans of individual agents. but these individual plans may be more complex than those accounted for by pollack's formulation in two ways: the recipes require different types of relations  balkanski  1  and an agent may not initially know a complete recipe. hence  we also provide a revised definition of the plans of an individual agent. 
   we begin the description of the revised model with an overview of different types of intentional attitudes that play a role in collaborative planning. then we provide a definition of individual plans that accommodates more complex recipes but still requires complete knowledge of the recipe. to describe these full individual plans requires a specification of certain properties of intention  so we define the int.to operator at this point. next  we show how to ease the complete knowledge requirement  yielding a definition of partial individual plan. we then define sharedplans recursively in terms of full and partial sharedplans. a full sharedplan is the collaborative correlate of a full individual plan and includes full individual plans as constituents. to describe interactions among the intentions of the different agents requires that we introduce the notion of an agent intending that some proposition hold so we explain the int. th operator in this section. finally  we provide a definition of partial shartdplan. at each stage we discuss those aspects of the resulting theory that address the problems described above to provide a more adequate model of collaborative activity. 
1 	attitudes of intention 
the definitions of individual and sharedplans will use a first-order logic augmented with several modal operators. we introduce four different intention operators. two of these  int. to and int. th  represent intentions that have been adopted by an agent. the other two  pot.int. to and pot. int. th  are variations of the first two that are used to represent potential intentions  i.e. intentions an agent is considering adopting but to which it is not yet committed. int. to and pot.int. to are actiondirected whereas int. th and pot.int. th are propositiondirected. 
   1for example  joint activity like that in searle's mba counterexample  searle  1   but involving actions that decomposed at multiple levels would have been inaccurately characterized. 
   1the notion of a partial sharedplan  sharedplan*  was intended to represent this kind of partiality  but was never specified in any detail. 
   1ln pollack's simple plans the  and a were related only by the action relation of generation. 
distributed ai 
   an int. to commits an agent to means-ends reasoning  bratman  1  whereas an int.th does not directly engender such behavior. int.th's form the basis for meshing subplans  helping one's collaborator  and coordinating status updates  cohen and leveque  1 . an int. th may  however  lead to adoption of an int. to and thus indirectly to means-ends reasoning. potential intentions are used to account for an agent's need to weigh different possible courses of actions  bratman et al/.  1 ; they typically arise in the course of means-
ends reasoning. attitudes of pot.int. to stem from an agent's deliberations about how to do some action it is committed to perform. pot.int.th's arise in the course of collaborative planning and are needed to insure that agents' individual plans mesh correctly  bratman  1 . 
　the difference among these operators can be illustrated with an example we will use throughout the paper. two agents  jan and sandy  have agreed to make dinner together. their collaborative plan consists of jan making an appetizer  sandy the main course  and the two of them together making the dessert. their sharedplan to make dinner includes jan having an intention to 
 int. to  make the appetizer  and an individual plan for doing so   sandy having an intention to  int.to  make the main course  and an individual plan for doing so   and their having a sharedplan to make the dessert. the sharedplan for making dinner also includes sandy's intention that  int.th  jan 1can make' the appetizer  and jan's intention that  int.th  sandy 'can make' the main course. 
　jan may have decided to make cheese puffs for the appetizer  but not yet have chosen a recipe for doing so. if so  his individual plan will be partial. it will include an 
int. to get a recipe for cheese puffs and a full individual plan for doing so.1 in addition  he believes that he can perform all of the actions in the recipe once he gets it. as he determines the recipe and thus the actions he needs to perform  according to that recipe   he adopts potential intentions to  pot.int. to  perform these actions. the potential intentions will become part of a deliberation process  bratman et a/.  1  and through that process may become int. tvs. 


that the agent either can do the action at the time using the recipe1 or can get another agent to do it; cbag is the analogous group operator. when g  either a group or a single agent  has done a over 
time interval using the recipe in addition  we will use 
1 
1 	full individual plans 
actions in operator. the connective is really exclusive or  xor . 
grosz and kraus 

distributed al 
1 	sharedplans and intending that 
both the belief and the intention components of collaborative plans are more complex than those of individual plans. the collaborating agents must establish mutual belief of the ways in which they will perform their joint activity and must agree on the agent or agents who will do each action. actions requiring multiple agents engender subsidiary sharedplans of groups of agents; those requiring only a single agent lead to subsidiary individual plans. the agents also need to establish mutual belief of their individual intentions to act. 
　there are several important properties of these belief and intention components that are captured in the definitions that follow. first  agents do not need to know recipes for any actions that they are not personally committed to doing. in our meals example  jan and sandy need to establish mutual belief of the recipe for making dinner  namely that this will comprise jan's making the appetizer  sandy the main course  and the two of them together making the dessert. only jan needs to know the recipe for the appetizer; but sandy needs to share mutual belief that jan has such a recipe and can carry it out. the analogous case holds for sandy and a recipe for the main course. in contrast  sandy and jan need mutual belief of the recipe for making dessert. second  an agent only has int. 1vs to acts of which it is the agent. however  it has int.th's that the actions of other agents be successfully done. more generally  the ways in which the belief and intention operators are used differ. in the following definitions we presume the usual definition of mutual belief  kraus and lehmann  1  which requires infinite nestings of individual beliefs  but utilizes only a 
single belief operator  bel. in contrast  to handle the intentions that arise in sharedplans  we need two operators int. to and int. th but there is no need for infinite 
embeddings of these operators  either in themselves or within one another . however  both operators may be 
embedded within the mutual belief operator  mb. 
　the sharedplan operator  representing that a group of agents g has a plan to collaboratively perform some action a  is defined recursively in terms of full and partial sharedplans as follows: 
　a group of agents will be said to have a sharedplan just in case either  1  they have a full sharedplan for doing a or  1  they have a partial sharedplan  and a sharedplan to complete that partial plan as will be seen from the definitions of these two types of sharedplans  each of these possibilities leads eventually to individual intentions to do actions  including actions of elaborating or extending partial plans. 
1 	full sharedplans 
we will use the formula  to 
represent the situation in which a group of agents g has a full shared plan p at time  to do action a at 
grosz and kraus 

distributed al 


1 	conclusions and future work 
to provide an account of collaborative activity  searle 
 searle  1  introduced the notion of 'we-intention.' grosz and sidner  grosz and sidner  1  argued that such a notion should not be necessary and their initial formulation of sharedplans avoids use of one. however  the definitions provided in that formulation could only accommodate group activity that directly decomposed into actions of individual agents. subsequent work in ai on formalizing the plans and intentions of multiple agents has  like searle's proposal  included some notion of joint intention  cohen and levesque  1; rao et al.  1 . in this paper  we have provided a formulation that again avoids the need for a notion of 
joint intention. in this work  sharedplans serve two major roles. they summarize the set of beliefs and intentions needed for collaborative activity  and also provide the rationale for the process of revising beliefs and intentions; consequently  they motivate the collaborative correlate of means-ends reasoning in the plans of an individual agent. sharedplans ground out in the individual intentions of individual agents and the individual plans that they engender. this formulation accommodates the properties of shared cooperative activity proposed by bratman  bratman  1 . intentions to do constituent actions form the basis of each individual's actions. intentions-that directed toward other agents abilities to act and success in acting  as well as toward the success of the joint activity  ensure cooperation in subplans and helpful behavior. 
