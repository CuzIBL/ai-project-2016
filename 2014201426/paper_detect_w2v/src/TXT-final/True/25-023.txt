 
this paper explores different techniques for explanation within the framework of the situation calculus  using the so-called stolen car problem as its main example. two approaches to explanation are compared: the deductive approach usually found in the literature  and a less common abductive approach. both approaches are studied in the context of two different styles of representation. 
introduction 
a great deal of attention has been given to the problem of formalising prediction  that is reasoning forwards in time from causes to effects  and in particular to the logical aspect of the frame problem. fewer authors  however  have studied the converse problem of formalising temporal explanation  or postdiction   that is reasoning backwards in time from effects to causes. temporal explanation is certainly as important as prediction  as it underlies planning and diagnosis  as well as being a fundamental mode of reasoning in its own right  so a thorough understanding of its nature is basic to artificial intelligence. 
   this paper explores temporal explanation in the context of the situation calculus  mccarthy & hayes  1   a formalism which  as well as being the oldest and bestunderstood logic-based formalism for representing change in ai  has considerable expressive power  gelfond et al.  1   
 lin & shoham  1 . in this paper  two styles of representation for explanation problems are compared: the standard style used in the existing literature  and an alternative style. in addition  two fundamentally different approaches to explanation are explored: the deductive approach and the abductive approach. the paper presents the standard and alternative styles of representation first  then looks at the deductive approach  using both styles  and finally investigates the abductive approach. 
   most attempts to formalise temporal explanation have adopted the deductive approach  morgenstem & stein  1    lifschitz sl rabinov  1    baker  1    crawford & etherington  1 . suppose we have a formula t which captures the timeless laws of change in a given domain  and a formula h representing when certain time-varying facts are true. according to the deductive approach  the explanation of an additional such fact f will be among the logical consequences of t a h a f. according to the abductive approach  shanahan  1   an explanation is a formula a such that t a h a a has f among its logical consequences. 
　throughout this paper  i will use the so-called stolen car problem  scp  as a benchmark  kautz  1 . the task is to 
1 	automated reasoning 
model the reasoning involved in the following story. suppose i park my car in the morning and go to work. at lunch time  i might reasonably apply default persistence and infer that the car is still where i left it. however  when i return to the car park in the evening i find that it has gone. its disappearance requires an explanation. that is to say  we want to reason backwards in time to the  possible  causes of the car's disappearance. in this case  the only reasonable explanation for the car's disappearance is that it was stolen some time between morning and evening. so my previous conclusion that the car was still there at lunch time is open to question. the car may have been stolen any time after i parked it and before i observed that it was gone  so i cannot say anything about its whereabouts at lunch time. 
1. representing explanation problems 
the ontology of the situation calculus includes situations  actions and fluents. a situation is an instantaneous snapshot of the world  and a fluent is anything whose value is subject to change. i will employ variables of three sorts corresponding to this ontology.1 i will write result a s  to denote the situation which results when action a is performed in situation s  and holds f s  to represent that fluent f holds in situation s. if a fluent holds in a situation then it has the value true  and if it does not hold it has the value false. several authors have attempted to deal with temporal explanation within the framework of the situation calculus  lifschitz & rabinov  1    baker  1    crawford & etherington  1 . but i will now argue that the style of representation they all use is problematic. 
   to represent a particular domain using the situation calculus  we write two sets of sentences  one set describing which fluents change value as a result of performing each action  so-called axioms of motion   and one set describing which retain their value  so-called frame axioms . the main concern of a great deal of research on the formal representation of change has been the frame problem  or how to eliminate the need to write explicit frame axioms. one of the most successful attempts to overcome the frame problem is baker's .1 his solution does not suffer from the difficulties pointed out by hanks and mcdermott  and correctly handles ramifications  derived properties . it can also 
   1  in what follows  variables begin with lower-case letters  and predicate and function symbols begin with uppercase letters. all variables are universally quantified unless otherwise indicated. a suitable set of uniqueness-of-names axioms is assumed. 
   1  to follow closely the argument of this paper  the reader will require some familiarity with baker's work. 
cope with certain explanation problems. in particular  baker represents the stolen car scenario as follows  
	-holds stolen so  	 sri  
	s1 = result wait result waiuso   	 sr1  
	holds stolen s1  	 sr1  
   does this constitute a good representation of the scp  let us consider exacdy what knowledge we are trying to capture. the meaning of result wait result wait so   is the situation which results when two successive wait actions are performed in situation so. the assertion that s1 equals this situation means that the only two actions which occur between so and s1 are the two wait actions. it is implicit in this assertion that nothing else happens between so and s1. however  the whole point of the scp is that we do not know what actions take place between so and s1. we don't know what s1 equals in terms of the result function. since the intended meaning of wait is an action which has no effect  then it doesn't seem likely that s1 equals rcsult wait result wait s1  .1 however  since it is only by default that waiting has no effect  it is still possible to conclude that one of the wait actions is responsible for the car's disappearance. 
　rather than half-heartedly asserting that nothing happens between so and s1 and allowing default reasoning to override this assertion to conclude that wait actions sometimes have strange effects  a more intuitive representation of the scp asserts nothing about s1 beyond the fact that it is the result of a sequence of actions which starts in situation so. then the aim of explanation is to characterise s1 in terms of the result function  that is to characterise the sequence of actions which starts in so and leads to a situation s1 in which the car is gone. accordingly  i suggest the following 
representation of the scp 1 
	holds car-parked so  	 ar1  
	-holds car-parked s1  	 ar1  
	follows s1 s1  	 ar1  
where follows is defined thus  
	follows sc sa   -   sc=sa v 	 ar1  
     1a sb  sc=rcsult a sb  a follows sb sa    and where we have the following axiom of motion  
	-holds car-parked result steal s   	 ar1  
   the point being made here applies to explanation using the situation calculus in general  and is not restricted to the scp. lifschitz and rabinov   for example  use the same style as baker to represent a bloodless variation of the yale shooting problem  hanks & mcdermott  1   in which the victim remains alive after the shooting. their approach to explanation introduces the idea of a miracle  which is an unexpected effect of an action. once again  in 
1
　　 in fact  the very idea of a  wait  action seems rather strange  and the idea of a sequence of two wait actions seems stranger still. surely waiting is a pause between actions rather than an action in its own right. 
1
　　 1 prefer the formula - holds car-parked.s  to baker's holds stolen.s   although they fulfil the same role. 
their approach default reasoning is expected to override a  half-hearted  assertion that nothing happens between loading and shooting to conclude that in fact the wait action unloads the gun. as before  i suggest that the task of explanation is to determine exactly what sequence of actions takes place between loading and shooting. 
in what follows  the style of representation exemplified by 
 baker  1  and  lifschitz & rabinov  1  will be called the standard style  and the style which i have suggested will be called the alternative style. i will now examine both styles of representation in the context of the deductive approach to explanation  and later will examine both styles in the context of the abductive approach. 
1. deductive approach  standard style 
underlying the deductive approach to explanation championed by morgenstern and stein   lifschitz and rabinov   baker   and crawford and etherington  is a deductive approach to the assimilation of knowledge. let us suppose that we have a formula t which represents an agent's knowledge about the world. then  if the agent learns that f is the case  where f is not a consequence of t  the deductive approach to assimilating f is simply to add it to t. the formula t a f then represents the agent's knowledge about the world. 
　using this approach  how is the scp tackled within the framework of the situation calculus  let's consider the standard style of representation first. as well as  sri  to 
 sr1   we need a frame axiom. a common frame axiom is  
 holds f s   -  holds f resuit a s     -- ab a f s   1  
　the frame problem is normally overcome by minimising the extension of ab in some way  using circumscription for example. in baker's work   this is achieved by introducing an  existence-of-situations  axiom  then circumscribing  minimising ab and allowing the result function to vary. this avoids the problem hanks and mcdermott encountered with mccarthy's formulation 
 mccarthy  1    hanks & mcdermott  1 . however  since the scp doesn't involve actions with preconditions  it doesn't run into the hanks-mcdermott problem  and mccarthy's formulation  which minimises ab and allows holds to vary  is adequate. 
　initially  we know just  sri  and  sr1 . with wait the only action in the domain of discourse  nothing is abnormal  so minimising ab using either mccarthy's or baker's technique yields simply -ab a f s   from which we can conclude -.holds stolen s1 . 
　using the deductive approach to explanation  when we learn  sr1  we simply add it to  sri    sr1  and  1   and derive a new set of conclusions. from  sri  to  sr1  and 
 1   baker  gets  
ab wait stolen so  v 
ab wait stolen result wait so   
　this seems to be the consequence we intuitively expect  using the standard style of representation: the car is either stolen during the first wait action or during the second  and we cannot say for sure which of these disjuncts is true. minimising ab simply reduces the set of models to those in which one of the disjuncts is true  the other one false  and ab is false for everything else. however  this consequence 
shanahan 
doesn't really constitute an explanation at all. it simply says that one of the wait actions must have been abnormal. from  1   it can be seen that the abnormality of a wait action is not sufficient to bring about a change in the value of stolen. it is a necessary condition of such a change  not a sufficient one. 
　furthermore  if the domain is widened a little  other difficulties arise. suppose the domain includes actions with preconditions  thus necessitating a form of minimisation different to mccarthy's. the best-known candidates at present are chronological minimisation  for example  shoham  1    causal minimisation  for example  lifschitz  1    and baker's state-based minimisation . as baker points out  chronological minimisation  which postpones change until as late as possible  will insist that the car is stolen during the second wait action; causal minimisation can be modified to cope with explanation  lifschitz & rabinov  1   but has problems with ramifications  derived properties ; and his own approach  whilst adequate for the simple version of the problem presented above  falls apart as soon as another fluent is introduced which holds in so. 
   why should the need to tackle explanation problems interfere with our efforts to overcome the frame problem  in a later section  i will discuss the abductive approach to explanation  which doesn't interfere with minimisation in any way  but first i will examine the deductive approach applied to the alternative style of representation suggested in section 1. 
1. deductive approach  alternative style 
what happens when the deductive approach to explanation is used with the alternative style of representation  from  ar1  to  ar1  and  1   we have  
1a sa sb  ab a car-parked sa  a sb=result a sa  a follows sa so  a follows s1 sb   
from  ar1  and  1   minimising ab using either 
mccarthy's or baker's appraoch  we have  
ab a f s   -  
      a=steal a f=car-parked a holds car-parked s   and therefore  
1sa sb  sb=rcsult steal sa  a foliows sa s1  a follows s1 sb   
in other words  there is a steal action between situations 
so and s1  which is the intuitively correct explanation. to simplify sentences of the above form  i introduce a new predicate. the formula between a sl s1  represents that an action a occurs between situations s1 and s1  and is defined as follows. 
	between a sa sd   -  	 ar1  
1sb sc  sc=result a sb  a follows sb sa  a follows sd sc   
　then  the above explanation of the car's disappearance can be abbreviated to  
between steal s1 s1  
   so the deductive approach to the scp seems to work using the alternative representation. unlike the standard representation  the alternative representation doesn't 
1 	automated reasoning 
encounter difficulties with explanation problems in richer domains. suppose that we employ baker's approach to minimisation - the result function is allowed to vary  and there is an axiom asserting  for all possible combinations of fluents  the existence of a situation in which that combination holds. the problem that baker reports  using the standard representation is that the assertion that the car is not in the car park in s1 forces a new abnormality. there is a variety of choices for this abnormality  each of which satisfies axiom  1  whilst allowing the car to disappear. unfortunately  in a domain of any complexity  some of them are both counter-intuitive and minimal. 
　with the alternative representation  using baker's approach to minimisation  this problem simply doesn't arise. the assertion that the car is not in the car park in s1 does not force a new abnormality. rather  it forces a steal action to occur between so and s1  and steal actions are abnormal with respect to car-parked anyway. so the minimisation of ab is unaffected. 
　however  the approach described here is not complete without further minimisation. in the absence of  ar1   the explicit assertion that the car is not in the car park in s1  we wanted to be able to assume by default that it still was. from  ar1  and  ar1  to  ar1   knowing nothing about the theft  we wanted to be able to conclude holds car-parked s1 . unfortunately   ar1  is too weak to allow this conclusion. it simply says that there is some sequence of actions between 
so and s1  and does not disallow the possibility of a steal action occurring. 
   the alternative style of representation for explanation problems presupposes a framework which can cope with sequences of actions about which not everything is known. in the scp  for example  we don't know what actions have taken place between so and s1. however  we would like to assume by default that nothing happens we don't know about. 
   there arc several ways to achieve this. the approach i will sketch here is based on the work of pinto and reiter . the formula actual s  represents that the situation s is part of an actual narrative of events  about which we may have incomplete information. so we have  in the scp example  
	actual so  	actual s1  
　the actual narrative of events corresponds to one path through the tree of situations defined by the result function. the following three axioms guarantee this  following pinto and reiter . 
actual result a s   --  actual s  
i actual  rcsult al s   a actual result a1 s    --  al=a1 
result al sl  = result a1 s1  -   al=a1 a s1=s1  
   a fourth axiom1 is required to ensure that baker's approach continues to work in the presence of the last of the above axioms. 
 vfl holds fl sl   -  holds fl s1   a ab a f1 sl   -  ab a/1 s1  
　now actual is minimised with a lower priority than ab  and situation constants are allowed to vary  along with the thanks to vladimir lifschitz for suggesting this axiom. 

result function and the predicates between and follows. 
from now on  i will assume this new circumscription policy whenever i use the alternative style of representation. for further details the reader is referred to pinto and reiter . an alternative method for dealing with incomplete narratives  which could also be used here  is presented in  miller & 
shanahan  1 .1 
1. preconditions 
to complete the picture for the deductive approach with the alternative style  i will briefly investigate its application to an explanation problem involving preconditions. consider  ar1  to  ar1  and  ar1   but suppose that it is a precondition of a successful theft that the car park is unguarded. so instead of  ar1  we have  
		 ar1  
　initially the car park is guarded. but if a lazy security guard comes on duty  he immediately falls asleep  leaving the car park vulnerable to theft. we also know that fred is a lazy security guard. to represent this  the action guard x  is introduced  denoting that security guard x comes on duty  along with the unary predicate lazy. 
 ar1   ar1  
 ar1  
　now what can we conclude from the fact that the car is not parked in s1  the only plausible explanation  given the knowledge we have  is that fred came on duty and fell asleep  leaving the car park unguarded. then the car was stolen. minimising ab according to baker's approach  we get  

　then  working on the holds conjunct of this formula  we can show  

which simplifies to  

　in other words  a lazy security guard comes on duty and then the car is stolen. this is very nearly the desired result  but not quite because no mention is made of fred  the only lazy security guard we know of. of course  in a sense  this is quite correct  since nowhere have we said explicitly that fred is the only lazy guard. on the other hand  if it was fred that came on duty  that would explain the fact that the car park was unguarded at the wrong time. 
1
　　 the issue of narratives is orthogonal to the main point of the paper. the sketch given here is only offered as evidence that a working technique can be found. 
　to see that this could be a serious shortcoming  let's introduce a further complication to the story. in addition to the car park's being unguarded  there is another precondition to a successful theft. the alarm mustn't be on. instead of  ar1  or  ar1   we have  
		 ar1  
　initially the alarm is indeed off  but if fred comes on duty he always turns it on  knowing he's likely to fall asleep. however  if the thief smashes the alarm  it isn't on. 
 ar1  
 ar1   arm  
　the deductive approach cannot supply a more detailed explanation  in the light of these extra facts  than the one already given - a lazy security guard came on duty and then the car was stolen. since it cannot be concluded that fred was the lazy security guard who came on duly  using the deductive approach  we completely miss the subtlety that if it was fred who came on duty  then the thief must have smashed the alarm. 
　of course  it's true that  explanations come to an end somewhere   but this seems a little premature. we would like to find an approach to explanation that tells us that the following sequence of actions explains the car's disappearance - fred came on duty  the alarm was smashed  and the car was stolen. 
1. the abductive approach 
abduction is widely considered to be a mode of reasoning fundamental to ai  and it has a diverse range of applications  including diagnosis  planning  plan recognition  natural language interpretation  default reasoning  and of course temporal explanation. according to the abductive approach to explanation in the situation calculus  given a theory t comprising axioms of motion and the frame axiom  and any other necessary general axioms  such as baker's  existence of situations    and a history h representing that certain fluents hold in certain situations  to explain a new fact f representing that a fluent holds in a given situation we need to find a formula such that has f among its logical consequences. 
　in order to avoid trivial or weak explanations  a certain set of predicates are distinguished as abducible. explanations have to be in terms of abducible predicates. furthermore  to overcome the frame problem  some form of minimisation will be required. so more precisely  we say that  given t and h as above  a formula a is an explanation of a fact f if it mentions only abducible predicates  and 
1 where p* and q* are sets of predicates corresponding to a suitable circumscription policy to overcome the frame problem. of course  there may be many such a's to explain any given fact. it is also convenient to avoid explanations which are subsumed by other explanations. so we say that  given t and h  an explanation 

shanahan 

a of f is minimal if there is no explanation of f which is a subset of 
　in these abductive terms  what is the general form of an explanation problem expressed in the situation calculus  we are usually required to explain a conjunction of positive or negative holds literals. let's consider the scp  using the standard style of representation first. we want to explain  sr1   and we require explanations in terms of previously unsuspected abnormalities. so the obvious policy is to make ab abducible. 
be 
ab wait stolen so   and assume either mccarthy's or baker's circumscription policy. as pointed out in section 1  the abnormality of one of the wait actions is a necessary but not a sufficient condition for the car to be stolen. appropriately then   is not an explanation of  sr1  at all according to the abductive approach. similarly  if we let ab wait stolen result wait so    then it is still no explanation. in fact  given the standard representation and the abductive approach with ab made abducible  the disappearance of the car literally defies explanation. furthermore  since it incorporates no knowledge of steal actions  the standard representation doesn't permit any explanation of the car's disappearance without the inclusion in of new axioms of motion. 
　now let's consider the alternative style. the explanations we require are in terms of the sequence of actions which takes place between two situations. so the obvious abduction policy is to make between abducible. in the scp  we want to explain  ar1 . let t be the conjunction of  1  and  ar1  to  ar1   and let h be  ar1    ar1 . suppose we minimise abnormality according to cither mccarthy's or 
baker's approach  and we also minimise actual. consider between steal s1 s1 . does this constitute an explanation  
　minimising actual yields s1=result steal s1 . then  applying  ar1   we have -holds car-parked s1 . so  is indeed an explanation. there are other explanations too  but each of these involves a sequence of steal actions. it is easy to see that  subsumes all of these explanations  and therefore all minimal explanations will be equivalent to this approach bears a strong similarity to that of green 
 and kowalski  1  chapter 1  to plan formation in the situation calculus  in which resolution generates a binding of the form s=result al result a1 ...   to solve a goal of the form holds f s . this binding conforms exactly to the abductive idea of an explanation with the alternative style of representation  where equality is made abducible. 
　note that if we asserted that another action  say going to lunch  occurred between so and s1  then this would still constitute an explanation  and would furthermore be neutral about the relative order of lunch time and the car's theft. so it would not be possible to conclude  in the presence of that the car was still in the car park at lunch time. 
　next  we'll examine how the abductive approach fares with the alternative style of representation with preconditions. recall the variant of the scp with fred  the lazy security guard who switches on the alarm when he comes on duty. once again  we want to explain  ar1 . this time  assume baker's minimisation technique  to ensure that the precondition is properly treated. let t be the conjunction of an existence of situations axiom with  1    ar1    ar1    ar1  to  ar1    ar1  and  ar1 . let h be the conjunction of  ar1    ar1    ar1  and  ar1 . let 
　by way of contrast  the closest thing to an explanation supplied by the deductive approach  namely 
　doesn't constitute an explanation at all according to the abductive approach  even if we make lazy abducible. this is because it ignores the possibility that the lazy security guard is fred  who will turn the alarm on  thus preventing the steal action from being successful. 
discussion 
this paper is intended to be a critical study of various approaches to explanation within the framework of the situation calculus. the analysis would seem to recommend the abductive approach with the alternative style of representation. however  a number of issues remain to be discussed. 
　to begin with  the paper has adopted the situation calculus  with circumscription as a means of default reasoning  and has employed baker's approach to the frame problem. there are  of course  many alternatives. however  i conjecture that the lessons learned here will apply to other formalisms  other forms of default reasoning  and other approaches to the frame problem  see  shanahan  1   for example . 
　the impression given in this paper is that abduction and deduction are competing approaches to explanation. but it could be argued that abduction isn't a particular approach to explanation  it is the nature of explanation. a particular approach to explanation might perform abduction directly  or it might simulate it through deduction  so long as the explanations it produced conformed to the abductive definition. under this interpretation  there is no need to show the adequacy of the abductive approach  because it supplies the very criterion of adequacy. 
view of knowledge assimilation  new facts are always added 
1 	automated reasoning 　a related issue which merits some discussion is that of knowledge assimilation. a problem like the stolen car problem can be thought of simply as a reasoning problem - what are the possible explanations of the car's disappearance. alternatively  it can be thought of as a knowledge assimilation problem - how is the fact of the car's disappearance to be assimilated. the abductive and deductive approaches to explanation imply different views of knowledge assimilation. suppose that we have a knowledge base in the form of a formula t. under a classical  deductive directly to t. with an abductive view of knowledge assimilation  not every fact is eligible for direct addition to t. sometimes the assimilation of a new fact f demands the addition of a formula  of a certain form to t such that t 
f  kowalski  1  chapter 1 . that is  new facts sometimes have to be explained through abduction. 
　using abduction with the situation calculus  assimilating a new holds fact  such as the fact that my car is not in the car park in the evening  demands the addition of a formula representing that certain actions take place  so that the new fact becomes a logical consequence of the knowledge base. with the stolen car problem  there is a unique minimal explanation  but this not necessarily the case. one approach to dealing with multiple explanations is to add the disjunction of all minimal explanations to the knowledge base  but this issue is beyond the scope of this paper. 
　two important questions come to mind here. why do some facts demand explanation when others do not  and why are some predicates abducible when others are not  in so far as a problem like the scp is viewed simply as a reasoning problem  these questions are not very important  since the answers have to be written into the specification of the problem. but taking the wider  knowledge assimilation view  the questions become more pressing. a simple answer is that anything which can be considered a first cause doesn't require explanation  whereas anything which cannot be considered a first cause docs require explanation. for example  we might decide to consider the occurrence of an action as a first cause  but not the effects of an action. this is a partial justification for making between abducible  and insisting that holds facts  except those about the initial situation  must be explained. clearly though  these issues merit further study. 
　finally  an important question is the relationship between abduction and deduction  console et al.  1   ikonolige  1 . when do they coincide  or  if abduction is adopted as the specification of explanation as suggested above  when does deduction conform to that specification  and why does abduction work in some cases when deduction doesn't  in essence  abduction finds sufficient conditions for a fact to hold  whilst deduction only finds necessary conditions. in certain circumstances  necessary conditions are also sufficient conditions. this is the case when the knowledge involved is expressed in terms of biconditionals. the frame axiom  1   for example  makes it a necessary and sufficient condition for a fluent to hold in result a s  that the fluent holds in s  given that a isn't abnormal in this context. furthermore  one-way implications can sometimes behave like biconditionals in this way when minimisation is involved  because minimisation often has the effect of  completing  the implication  that is turning it into a biconditional. this was the case with ab in the scp. however  there is no reason to suppose that necessary and sufficient conditions will always coincide  even in the presence of minimisation  as we saw with extended scp  in which deduction failed because the predicate lazy was not completed. 
acknowledgements 
thanks to tony kakas  bob kowalski  vladimir lifschitz  
rob miller and javier pinto. the author is supported by an serc advanced research fellowship. 
