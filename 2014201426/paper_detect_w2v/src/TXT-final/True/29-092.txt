 
situation calculus is arguably the most widely studied and used formalism for reasoning about action and change. the main reason for its popularity is the ability to reason about different action sequences as explicit objects. in particular  planning can be formulated as an existence problem. this paper shows how these properties break down when incomplete information about the initial state and nondeterministic action effects are introduced  basically due to the fact that this incompleteness is not adequately manifested on the object level. a version of situation calculus is presented which adequately models the alternative ways the world can develop relative to a choice of actions. 
1 	introduction 
the contribution of this paper is to highlight some problems that arise in situation calculus when incomplete initial information or nondeterministic actions are considered  in particular when reasoning about plans. a new version of situation calculus is proposed that avoids these problems by containing incompleteness and nondeterminism within individual logical models just like different choices of actions are. 
　situation calculus  mccarthy and hayes  1; reiter  1  is a formalism for reasoning about action and change that has been widely studied and applied to a broad range of problems. its major strength relative to other formalisms is the possibility to do a large extent of reasoning on the object level. object-level reasoning occurs completely within the object language and within one single theory as opposed to meta-level reasoning which involves reasoning about theories. the advantage of object-level reasoning is that it is completely supported by the deductive system of the logic in use. problem solving is equivalent to finding logical proofs. 
　there are variations between different formalisms for action and change in how much reasoning can be done on the object level. on one extreme  there are stripsstyle formalisms  fikes and nilsson  1   where even 
temporal reasoning 
the state transition resulting from the application of an action is specified on the meta-level  namely as adding and deleting sentences to/from a state description. in the middle there are narrative-based formalisms such as event calculus  kowalski and sergot  1  and sandewall's logics  sandewall  1   where each theory t represents a specific choice of actions. at the other end of the scale there are branching formalisms such as situation calculus. the use of a branching time structure implies that different courses of actions can be contained within the same theory. 
　in situation calculus  henceforth referred to as sc  the time-structure is built up by successive applications of actions  starting from the initial situation s1. each action application results in a new situation. situations have names specifying via what sequence of actions they are reached  for instance do load  s1   do fire  so  and do fire  do load  so  . the fact that a fluent / holds in a situation s is expressed as holds f s   for instance  the effects of 
actions are specified using axioms such as the following.1 
		 i  
the predicate poss a s  denotes the conditions under which a is possible to execute  for instance poss fire s  = holds has-gun  s . the strength of this representation is that given a sc theory t with action effect axioms  all possible different action sequences and their effects are contained within t situations are first-order objects  and thus reasoning about different situations  i.e. different action sequences  can be done on the object level  deductively. in particular  a planning problem can be straight-forwardly represented as an existence problem  whereas in narrative-based formalisms planning has to be formulated as an abductive  and thus metalogical  problem. let t be a sc theory after the appropriate nonmonotonic preprocessing for minimizing change  for instance use of the explanation closure tech-
1
　　for notational convenience  any variable occurring free in a formula is assumed to be universally quantified. for instance  in the axiom for fire there is an implicit quantifier  prefixing the formula. 

niques in  reiter  1    and let g s  be a goal. in addition  let exec s  represent the fact that the situation s is reachable from the initial situation via a sequence of executable actions. formally expressed  exec s  =  s =    then 

the problem of finding a plan that achieves the goal is equivalent to proving the following. 
 1  
the binding of the s that satisfies is the plan. for instance  if one assumes a proper theory t for loading and shooting  a solution to the problem 
		 1  
is found in the binding a = do fire  do load  s1  . 
　the fact that action sequences  situations  are objects in sc  which makes it possible to perform reasoning tasks like planning purely deductively  has been emphasized as the major advantage of sc relative to narrative-based formalisms  see for instance  reiter  1  . this has motivated a substantial amount of work attempting to incorporate reasoning about metric time and temporal relations into sc  see  reiter  1  again   which is one of the strong points of narrative-based formalisms. unfortunately  the advantage of sc breaks down when the implicit assumptions of information completeness and determinism are abandoned. section 1 demonstrates this problem. section 1 presents a version of sc which deals correctly with incomplete information and nondeterminism on the level of individual actions  and section 1 introduces constructs for action composition. section 1 presents some conclusions and comparisons. 
1 	problems with incomplete information 
there is a strong assumption regarding complete information of the initial situation in the traditional sc formulation of the planning problem. to see why this is the case  consider the following scenario where an agent has to choose between two doors. one of the doors leads to freedom  free   whereas one leads to death  -alive  in the shape of a vicious cobra. let // denote that the left door leads to freedom  and assume that holds alive so aholds free so  but // is unspecified at s1. there are two actions goleft and goright defined as follows: 

just repeats the same erroneous formulation as above  exec so s  denotes that there is a sequence of executable actions from so to s . the dual problem of negative plan existence gives rise to similar difficulties.  is clearly an inadequate 
formulation of negative plan existence for the two-doors scenario. notice that it contradicts  1 . similar counterexamples can be constructed where incompleteness is due to an action with nondeterministic effects. as the action  due to the do function  just has one resulting situation in each model  it suffices to find one plan for each model. 
　in summary  when the implicit assumptions of complete initial information and determinism are abandoned  severe problems arise for sc. the reasons are the identification of plans with situations and  in the case of nondeterminism  the use of a do function. thus  the critique presented here applies to all versions of sc that have any of these two features. as a consequence  it is not possible to express properties such as positive and negative plan existence on the object level  and this severely limits the usefulness of sc as a tool for analysis and specification of higher-level reasoning. 
	karlsson 	1 

1 
1 
temporal reasoning 

	karlsson 	1 


figure 1: a model of the two-doors scenario  all other models are isomorphic . neither goleft nor goright leads to the goal free from all initial situations satisfying 
 however  if se were excluded and the situation and arcs marked with asterisks were missing  goleft would have appeared to lead to free. 
of this circumscription is a second-order formula  two results by lifschitz  lifschitz  1  and the fact that occl  -poss and -res only occur positively within the theories relative to which they are circumscribed imply that it is equivalent to a first-order formula. thus  the circumscribed parts of the theory are completely firstorder. however  this is not  always  the case for the situation existence axiom  or for the induction axiom mentioned in the next section. 
1 	action composition 
with the use of a res predicate above  a sequence of actions is no longer represented as a term of nested do's. instead  a type n for composite actions is introduced together with a predicate res* . it is assumed that this type is supported by a  second-order  induction axiom  ind . constructs for primitive actions and sequences are defined as follows. 
 1  
 1  
a poss1 predicate for composite actions can be defined in terms of res* and poss. 
 1  
 1  
notice that this definition implies that all the primitive actions along any path described by seq   must be possible to execute. 
　now  the positive  negative  plan existence problem can be formulated as follows  let i s  describe the initial conditions . 
		 1  
temporal reasoning 
for instance  consider the two-doors scenario again. it is obvious that for neither n = do goleft  nor n = do goright   fig. 1   it holds that 
		 1  
also observe the importance of the situation existence 
 se  axiom. if there are models where situations are missing  one might fail to conclude that there is no plan  fig 1 . 
　when planning with an incompletely specified initial situation and nondeterminism  the concept of a plan as a sequence appears to be insufficient. what one would like is the possibility to take different courses of actions depending on the circumstances. this is the approach taken in contingency planning or conditional planning  peot and smith  1 . in order to demonstrate the feasibility of representing plans as complex terms  it is important to address the problem of conditional constructs. the following is a definition for res* and poss* for a conditional construct  the predicate holds' denotes that a condition holds . 
 1   1  
in order to let one of the conditional branches be empty  a noop action is introduced. 


the substitution functions sb : d x d x d -  d and sb : c x v x v -  c are defined in the obvious way. finally  a set of unique name axioms are supplied for the conditions. essentially  two distinct terms of types d or c always denote two distinct objects  even if they refer to the same object via the v function or have the same truth value via the holds' predicate. conditions and designators are considered syntactical entities  and equality is based on syntactical identity  not reference. 
　now it is possible to construct conditional plans such as 
　　n = cond  if  do goleft   do goright    1  which is a solution to the two-doors-problem. it is straight-forward to show that n satisfies  1 . 
　a final remark: the condition in the plan above refers to the actual state of the world. preferably  such decisions should be based on the knowledge of the agent. that requires a theory that explicitly represents the agent's knowledge or beliefs  moore  1; levesque  1 . this is compatible with the technique presented in this section. 
1 	conclusions 
situation calculus is a formalism for reasoning about action and change that supports reasoning about alternative courses of action on the object level. however  it fails to provide adequate object-level support for reasoning about the different ways the world can develop relative to a specific choice of actions. this results in anomalies when situation calculus is used for higherlevel reasoning such as planning  as illustrated by the two-doors scenario. this paper has presented a modified version of sc that deals with this problem. it allows multiple initial situations and multiple alternative results of actions within individual models of an sc theory. in fact  the approach presented here can be considered a  modalization  of sc - it is possible to reason about possible and necessary results of a course of actions - although no explicit modal operators have been introduced. three important technical considerations are the use of a res relation instead of a do function  for nondeterminism  which is central to the paper   a situation existence axiom  as there are no terms denoting individual situations  and a type for composite actions  more suitable than individual situations for representing plans. also observe the simple circumscription policy employed 
 1   which does not involve any prioritizing or varying of predicates. this policy is a variant of sandewall's pmon policy  sandewall  1   originally for an integer time structure  which has been altered to fit the new temporal structure. 
　the motivating example of this paper is analogous to an example from  manna and waldinger  1  with a monkey and two boxes  one of which contains a banana and one of which contains a bomb. in their scbased approach  the synthesis of plans is supported by a deductive-tableau inference system. the point the authors make with the example is that the proofs for generating a plan should be constructive. manna's and waldinger's plan theory introduces plans as explicit objects. the application of an action or a plan to a state is modeled as a function yielding a new state  which implies determinism. although their motives are similar  the approach of manna and waldinger is substantially different from the work presented in this paper; in particular  the authors are not concerned with axiomatic solutions to the frame problem. 
　there are also similarities to work on planning with sensory actions by  among others  levesque  levesque  1  and davis  davis  1   which involve explicit theories of knowledge. levesque introduces complex action terms with sequential and conditional composition. furthermore  a plan is required to lead to the goal from all situations that are compatible with the agent's knowledge of the initial situation  and not just the initial situation. however  the purpose is not to deal with the problems addressed in this paper. in particular  actions are assumed to be deterministic. actually  as levesque uses a do function  the agent will  know  that actions are deterministic  even if they are specified not to be. also davis provides a type for plans  and in addition a result relation. the purpose with the relation is to let plans have unspecified results  and not to model nondeterminism. davis mentions nondeterminism as a future problem. 
　dynamic logic  pratt  1  is a polymodal formalism that has been applied to reasoning about action and change and to planning  rosenschein  1 . in dynamic logic semantics  a relation defines the possible next states when an action is executed in a state  in a manner similar to the res s a s'  relation in this paper. 
　to conclude  the essential novelty of this paper is that it combines plans as explicit objects with not only incomplete initial information but also nondeterministic effects. this is done in classical logic  with the aid of a relatively simple circumscriptive policy based on a compact yet powerful solution to the frame problem. regarding future work  an interesting project would be to combine nondeterminism and knowledge operators. 
	karlsson 	1 

acknowledgments 
i would like to thank silvia coradeschi  patrick doherty  marcus bjareland and the anonymous referees for their comments on previous versions of this paper. this research has been supported by the swedish research council for engineering sciences  tfr  grant 1. 
