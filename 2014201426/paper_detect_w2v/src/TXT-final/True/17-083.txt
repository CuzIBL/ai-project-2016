 
　　　though current expert system technology has become a major success  existing expert systems often f a l l short of human expertise in many ways. one important area is in the use of more basic  deep knowledge as an enhancement to the shallow  surface knowledge commonly employed. the integrated diagnostic model attempts to exploit the use of both types of knowledge by f i t t i n g the appropriate knowledge representation and u t i l i z a t i o n techniques to each. the result is two separate and independent expert systems which are then integrated and controlled by a higher-level module called the executor. 
	i 	introduction 
　　　in solving a problem  human experts often draw on many different kinds of knowledge. what usually makes an expert an expert is the  shallow     surface     compiled    1      low-road    emp l r i c a l     1     or  experiential   knowledge. such knowledge is acquired from other experts in the field or by first-hand experience in solving domain problems. it consists of rules-of-thumb that connect characteristics of a problem with i t s possible solutions. however  this type of knowledge is often just a short-cut through  or a compilation of  a more detailed and deeper understanding of the problem domain. this other kind of knowledge  r e ferred to as  deep    high-road    functional   or  physical  knowledge  allows an expert to  reason from f i r s t principles  in trying to solve a p a r t i c -
ularly d i f f i c u l t or unfamiliar problem. 
　　　the human expert has no apparent d i f f i c u l t y in converting from one kind of knowledge to another. he/she may begin solving a problem by using the experiential knowledge which leads to an isolation of the problem and then convert to using the deeper knowledge to analyze the problem further. if the i n i t i a l hunch proves to be wrong upon closer examination  the expert easily goes back to employing the more shallow  experiential knowledge. should a l l experience f a l l   he/she can s t i l l revert back to the deeper knowledge in attempting to solve the problem. 
　　　though current expert system technology relies heavily 	on shallow knowledge in solving a problem  some work has been done in developing systems 	that have deeper knowledge  1 1 1 1 1 . there are recognized benefits in being able to provide a deeper understanding of the problem  such as better performance at the periphery of the knowledge base and improved explanation capabilities. however  shallow knowledge must also be available for solving the more common problems and for situations where human understanding of the domain is not extensive enough to include a deeper model. therefore  it would be best for an expert system to integrate at least these two often diverse types of knowledge and be able to use them appropriately and efficiently. 
　　　the integrated diagnostic model  idm    1     shown in figure 1  is an expert system that contains both a shallow and a deep knowledge base. it was designed to work in the area of mechanical/electronic diagnosis and repair. it consists of three main modules: 1  the experient i a l expert  1  the physical expert  and 1  the executor. knowledge representation and u t i l i z a t i o n techniques have been developed to f i t the two diverse types of knowledge in these specialized mechanical/electronic diagnostic experts. in addition  the higher level control module  the executor  has been designed to direct the entire problem solving process. 
	ii 	knowledge representation in the idm 
　　　each of the three parts of the idm has i t s own knowledge base. the knowledge representation techniques used in the experiential and physical experts attempt to depict the type of knowledge that each embodies. the knowledge base in the executor provides a link between the two. 
　　　the experiential expert contains a knowledge base implemented as a three-level semantic network where each level is a semantic network in its own right. its general structure is shown in figure 1 and resembles that of casnet . this structure attempts to model some of the i n i t i a l experiential  causal reasoning that an expert does while solving a familiar problem. the lowest level in the semantic network  the 'information' level  contains any concrete  observable facts that can be obtained from the user. this could be information on how tight the generator belt i s   a voltage measurement in an electronic c i r c u i t   or the stain of an organism in a lab culture* the middle level  the hy-


figure 1. overview of the integrated diagnostic model 
potheses' level  contains knowledge that is not observably apparent but that can be deduced from the observable facts based upon experience. it usually concerns physical or physiological states of the device. examples of this type of knowledge are that the generator is not recharging the battery  that a wire is shorted in the circuit board  or that the patient is suffering from an infection of pseudomonas bacteria. the 'solutions  level in the semantic network contains knowledge about how to f i x the deduced problem. thus  it would suggest tightening the generator belt  repairing the wire  or placing the patient on a drug therapy of c o l i s t i n . 
　　　the physical expert contains a physical/functional model of the device under diagnosis. this model is based on a set of functional primitives that allows the device under consideration to be simulated qualitatively . examples of such primitives are: 
p. fink 1 
1  conduit an object which transports various substances throughout the system; examples are: a piston transferring thrust from a cylinder to the camshaft  mechanics   a wire transporting elect r i c i t y  electronics   arteries carrying oxygen to cells  physiology . 
1  joint an object which provides a connection between two or more of the other primitives; examples are: the meshing of gears  mechanics   the wire nut that connects two wires  electronics   the synapse between neurons in the brain  physiology . 
these primitives are implemented using a semantic network. the f i r s t three are represented by frame-like  nodes while the last two are represented by arcs. 
　　　this set of primitives is by no means complete. for example  it was necessary in the electrical domain to divide 'regulator  into 'switch' and 'relay' because their behavior d i f f e r ences were important in representing how a circuit functions. such a set provides an integrated way of representing the structure and behavior of a device. both physical and functional aspects can be represented within this one model. depending on the substance  such as electricity or water  that is being transported from node to node via the conduits and joints  an electrical  mechanical  etc. representation can be provided. 
　　　the system knowledge base for the executor consists of a conversion table that indicates what node or nodes in the experiential knowledge base are associated with what functional primitive nodes or arcs in the physical knowledge base and how they 

1  transformer an object which converts given substances into others; examples are: a generator converting mechanical energy into electricity  mechanics   
are related. the conversion table is essentially a set of registers that represent the nodes in the experiential knowledge base and the functional primitive nodes and arcs in the physical knowledge 


a solar cell converting photons into e l e c t r i c i ty  electronics   the collection of enzymes that converts glycogen into carbon dioxide and water  physiology . 
1  regulator an object which controls the activity of another object  usually as a function of the regulator's inputs; examples are: a turbocharger increasing the amount of fuel in the cylinder based upon the pressure of exhaust gasses  mechanics   a transistor controlling the current flow as a function of the base current  electronics   white blood cells regulating the amount of foreign objects in the blood stream  physiology . 
1  reservoir an object which stores a substance for release at a later time; examples are: a spring storing mechanical energy  mechanics   a capacitor storing a charge  electronics   mitochondria storing chemical energy in a cell  physiology . 

1 p. fink 
base. these registers contain values that indicate the state of the system's knowledge about that part of the problem. each register is also associated with a conversion equation or equations that t e l l tow to convert the information in a register or r e * sisters associated with one knowledge base into i n formation in a register or registers associated w i t h the other knowledge base. the correspondence between registers associated with the two knowledge bases is not necessarily one-to-one  but could be aany-to-one  one-to-many  or many-to-many. 
	i l l 	control in the idm 
	each of the three modules of the idm 	has 	its 
 wn control mechanism. the inference engines of :he two experts were designed to best take advan:age of the knowledge available to each. since the :wo types of knowledge have independent knowledge representations and inference engines  they create completely autonomous expert systems. these two expert systems are then integrated by the control lechanism of the executor. 
     the inference engine for the experiential expert is model-driven using a best-first search strategy. i n i t i a l data is acquired at the information level which then suggests hypotheses to consider. the hypotheses may then suggest more data that needs to be acquired from the information lev 1. on each arc there is a set of ratings  including probability  cost  and d i f f i c u l t y   that are :ombined to form a confidence factor for the association between the two nodes that the arc conlects. the highest factor is followed f i r s t . the search back and forth between hypotheses and i n f o r nation continues u n t i l a hypothesis has been v e r i fied with enough confidence. then the arcs between :he hypotheses and solutions are followed. should :he solution f a l l to solve the problem  others can be tried or the search for another cause of the  roblem can continue. 
     the inference engine for the physical expert ses some very general diagnostic reasoning rules :o examine the physical model and isolate the problem to a specific functional unit or units  represented by the appropriate functional primitive. these rules are based upon the values of the inputs and outputs of the functional units. they are: 
   if an output of a functional unit is unknown  ask the user. 
1  if an output from a functional unit appears incorrect  check i t s input. 
1  if an input to a functional 	unit 	appears 	i n correct  check the source of the input. 
i  if the input of a functional unit appears to be correct  but the output is not  assume that something is wrong with the functional unit being examined. 
this resembles the  discrepancy detection  methodology discussed by davis . once the problem has been isolated  more specific analysis can proceed in the same manner at a lower level  since the knowledge representation can be hierarchical. 
　　　the control at the executor level determines when each expert system is to be used. it also controls the transfer of information about the state of parts of the device under diagnosis between the expert systems and directs the interaction between the system and the user. 
　　　currently  top level control over which expert to use when is very simplistic. the experiential expert is run f i r s t and if it f a i l s to find a solution to the problem  the physical expert is run. this appears to be how an expert would reason about a problem  checking out a l l reasonable  familiar possibilities f i r s t   before resorting to a more basic   f i r s t principles  analysis. 
　　　a human  however  can use the knowledge gained during the experiential phase to help in the more detailed analysis. at the same time  knowledge acquired while doing a detailed analysis is not lost to the human expert when he/she goes back to the experiential type of reasoning. an expert system should be able to do the same. thus  while the experiential expert is running  a l l information 
gained is passed to the executor for conversion to a form useful to the physical expert  when appropriate. in this way the physical expert can monitor the progress and make certain inferences about the state of the device that is not available to the experiential expert. through this mechanism  it acquires a l l of the information that the experiential expert acquires  thus allowing it to begin diagnosis where the experiential expert leaves off  should the need arise. by this same 
mechanism it can communicate inferences it makes back to the experiential expert. these capabilities w i l l be demonstrated by an example in the next section. 
　　　the executor controls communication of i n f o r mation between the user and the two expert systems. any request for information needed by one of the expert systems is given to the executor which then determines whether the information is already known by the other expert system  or whether to ask the user. if the information is already available from the other expert system  the executor simply r e turns the information in the proper form to the r e questing expert system. otherwise it asks the user. should the user request an explanation at any point in the dialogue  the executor determines which expert should answer i t . currently  only  how  and  why  are legal questions. the answer to  how  is associated with the node that resulted in the last output to the user. the answer to  why  is currently always answered by the physical expert since the experiential expert could only offer a very shallow explanation. 

p. fink 1 

figure 1. 	an example experiential knowledge base for a simple heating system 

	iv 	an example 
　　　to illustrate how the system works  a simple heating system w i l l be used as an example. the experiential and physical knowledge bases are shown in figures 1 and 1  respectively. during a session  the physical representation appears in the top two-thirds of the screen to graphically portray the progression of the problem solution. the bottom third contains the dialogue. 
　　　suppose that the user enters the i n i t i a l problem that the house is too cold. the experiential 
expert begins by checking out the possibility that the heating system is disabled in some way. this is chosen f i r s t because it is very inexpensive and easy to check and it is necessary to know if the heating system is even set to be on. this leads to questions to the user concerning the state of the thermostat and  when it is established that the thermostat is on  set correctly  and working  a r e gister in the executor associated with the experiential knowledge base is set to indicate that the thermostat is alright. this information is useful to the physical expert in a different form. thus  a conversion takes place that sets registers associated with the power supply  the c o i l   and the contacts to correct. this causes the nodes on the display screen representing these units to turn dark  giving some indication to the user of the progress being made. this part of the example demonstrates how the system handles a many to many conversion of information. there is no such unit as a thermostat with a l l of its settings in the physical knowledge base  just as there is no power supply  c o i l   or contacts in the experiential knowledge base. 
f i r s t thing that the experiential expert wants to know under the hypothesis that the furnace is not producing enough heat is if the pilot light is on. if the answer to this question is yes  a register associated with the pilot light of the experiential knowledge base is set  which triggers a conversion to set a register associated with the pilot light of the physical knowledge base. in this case  the conversion is one-to-one and therefore straightforward. however  the physical expert can assume from this information that the liquid propane gas  1pg  tank has gas in it  at least as a f i r s t cut   that the lpg tank valve is working  and that a l l of the conduits from the lgp tank to the pilot light are alright. the fact that the lpg tank is not empty again triggers a conversion to set the register for the lpg tank of the experiential system. like the 


　　　the experiential analysis continues by check* ing the blower and then the furnace i t s e l f . the 

figure 1. 	an example physical knowledge base for a simple heating system 

1 p. fink 
previous conversion  it is one-to-one and therefore straightforward. however  this information proves to be useful to the experiential expert because the next question it would ask is if the 1pg tank is empty. rather than asking the user an apparently redundant question  the experiential expert can acquire the information through the registers in the executor. in this way  the 1dm is capable of propagating knowledge acquired by one expert to the other expert  thus avoiding asking possibly dumb or repetitive questions. 
　　　now suppose for this simple example  that the problem is with the lpg intake valve being stuck shut. the experiential expert w i l l therefore exhaust a l l of i t s possibilities  since it knows nothing of the lpg intake valve  and the physical expert's knowledge base would appear as in figure 1. only the pilot light sensor  the safety switch  the lpg intake valve  the combustion chamber  and various conduits remain to be checked. these are parts of the system that the experiential expert knows nothing about. 
　　　the physical expert takes over diagnosis by systematically checking each of the nodes in the system to determine i t s input and output. it begins with the i n i t i a l problem i t s e l f   the house being cold  which is represented by the conduit between the vent and the c o l l . it moves backwards from the vent to the blower and f i n a l l y to the combustion chamber using the rules discussed above to guide the search. the physical expert knows that i t s output is not correct since the air coming out of the vents is not warm  so it looks for the source of the combustion chamber's input  which is the pilot light and the lpg intake valve. the p i lot light is known to be alright but the lpg intake valve's state is unknown. the system therefore asks the user to check the valve. this is found to be stuck shut. once the valve is loosened the f u r nace begins working properly. 

figure 1. the physical knowledge base at the point where it takes control of the diagnosis 
　　　in this last sequence  where the physical expert f i n a l l y diagnoses the problem  we have demonstrated how a problem was found and solved that could not have been solved by the experiential expert because it lacked the proper knowledge. in such a simple example  of course  it would be possible to include such knowledge in the experiential expert. however  in a larger system  such as the automotive electrical system that we are implementing  the inclusion of every detail of the wiring diagram would be very d i f f i c u l t and diagnosing from it would not be straightforward in the experiential expert. it knows about such things as the battery  the generator  the fan belt  and certain prominent wire connections  but more detailed information on the components and wiring is l e f t to a more coherent and useful representation in the physical expert. 
v related work 
　　　over the past several years much work has been done in addressing the problem of employing more fundamental knowledge in an expert system  1 1 1 1 1 . however  most are concerned only with this deeper knowledge. work by patil et a l .  is probably the most closely r e lated to the work presented here because it is also concerned with integrating different levels of knowledge. in their work on abel  in the domain of diagnosing and treating electrolyte and acid-base disturbances  patil et a l . demonstrate how three different levels of knowledge representing the patient's state can be used to diagnose and treat the problem. it differs from our model not only in the number of levels of knowledge used but in how closely these levels are linked. in abel  the l e v els are designed to be compatible and consistent. the lower levels contain a more detailed version of the higher levels. knowledge at one level can be passed consistently to another through a set of special functions. the idm  on the other hand  does not necessarily require a consistent view of the problem between the experiential and the physical experts. each expert is developed independently and integrated at completion. the experiential knowledge employed in the idm resembles that used in the higher levels of abel. idm's experiential knowledge i s   in some cases  causal since the line between experiential and causal knowledge is somewhat indistinct. but the deeper knowledge employed in the idm is more closely related to the device under diagnosis than is abel's. the physical expert of the idm contains knowledge of the components of the device and how they behave and i n teract. cause and effect is thus propagated via the physical and functional structure of the device rather than directly represented as in abel. 
	vi 	conclusions and future work 
　　　the idm works well in the types of domains that it was designed for  namely mechanical/electronic diagnosis and repair. it 

even appears applicable to the medical domain  to debugging computer programs  and to failure modes and effects analysis of off-shore o i l d r i l l i n g platforms  using a different set of functional primitives . however  it does not appear applicable to such fields as mineral prospecting  speech recognition  and law. the experiential expert is 
most l i k e l y s t i l l viable  but the deep knowledge in these domains seems to require a different approach to representation than a set of functional primitives. the concept of processes  may be one possibility. 
　　　the idm exhibits a way of providing a w e l l defined but flexible control over the propagation of knowledge between the different experts that erabody the diverse types of knowledge about a problem domain. future work w i l l include efforts to generalize the approach so that the conversion table in the executor can be automatically generated from the knowledge bases of the experiential and physical experts. currently it is built by hand. we also plan to examine different top-level control strategies with respect to when to use each of the experts. this is an extremely d i f f i c u l t but important problem since it involves the question of how a human knows when to use each type of knowledge. another area for research could be in identifying other types of deep knowledge that appropriately f i t other domains such as the ones mentioned above. finally  the use of several different kinds of deep knowledge that represent different aspects of the same device  such as electronic and mechanical  could be investigated. 
