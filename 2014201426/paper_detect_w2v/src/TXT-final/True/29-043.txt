 
we propose a concept of active diagnosis that differs from the conventional passive  i.e. event-driven  diagnosis in temporal  diagnosis is carried out by always monitoring normal condition as opposed to identifying faulty only when abnormal condition is detected  sense as well as spatial  diagnosis is carried out by agents distributed in the sensor network  sense. as one way of realizing active diagnosis  we present immunity-based agents approach based on the self creating  monitoring  and maintaining feature of immune systems. we apply the approach to process diagnosis where the agents are defined on the sensor network. each agent corresponding to sensor or process constraint evaluates a kind of reliability by communicating other agents. system level recognition of sensor/process fault can be attained by continuously and mutually monitoring and maintaining consistency among sensor values and process constraints. 
1 	introduction 
diagnosis based on qualitative constraints  expressed by graphically  e.g.  iri et al. 1; ishida 1   or logically   have been studied extensively in several communities. one of the important aspect of diagnosis for dynamical systems  such as processing plants  would be that the abnormal state propagate rapidly through many parts  hence results in the pattern  normal/high/low; oscillation; stick etc.  of a large number of sensors  syndrome . the first thing to do may be filtering out unimportant sensor pattern and focusing on the key sensor pattern. we used qualitative reasoning to explain one sensor pattern from the other sensor pattern. in the qualitative diagnosis  by checking the consistency among sensor patterns  the sensor pattern that cannot be explained by the other sensor pattern will be focused  as in  ishida 1 . 
　there already has been proposed using the consistency monitoring and maintenance in the qualitative constraints among sensor values and process knowledge based on the metaphor of immune system  ishida 1 . 
1 	neural networks 
the main point of using the immune system metaphor is using agents  corresponding to immune related cells  that interact mutually  continuously  and dynamically. the immunity-based approach  thereby makes the consistency monitoring and maintenance possible in the dynamic environment where on-line data from sensors arrives dynamically. another important aspect of the immunity-based approach is that it agrees with the concept of active diagnosis presented in this paper and hence it would be one way of realizing the active diagnosis. 
　the concept of active diagnosis may be briefly stated as: diagnosis that is attained by actively and continuously monitoring consistency among the current state and normal state for reference. technologically  active diagnosis may be possible supported by the recent technological development in three fields: active sensing in the sensor technology  active agent in the network technology  and active data base in the data base technology. diagnostic system may be divided into three subsystems: knowledge data base for diagnosis; sensor system that is interface between diagnostic system and target system for diagnosis; and inference system that diagnose target system based on the knowledge data base and sensor system. innovation of active sensing  active agent  and active data base can support sensor system  inference system and knowledge data base  respectively. 
1 	active diagnosis and immunity-based approach 
diagnosis  in general  is basically considered an eventdriven task that is triggered by the event of fault and 
also it is based on the information in the pattern of abnormal  syndrome . however  as target system becomes information-intensive  the conventional event-driven approach may not be sufficient. we propose a concept of active diagnosis as opposed to the conventional passive diagnosis  event-driven diagnosis . the concept of active diagnosis is motivated by self-identification process of immune system; by recent argument of pro-activeness as an important element of agents  wooldridge et al 1 ; by the concept of active data base; and by the recent technological development of active sensing. 
active diagnosis may be characterized by the following requirements: 
  temporal requirement: self monitoring must be car-ried out all the time  as opposed to only when some fault is detected. 
  spatial requirement: monitoring/diagnosis is done by the agents working in a distributed manner in the sensor network. 
  functional requirement: it is biased relatively more to monitoring normal condition rather than to detecting abnormal condition. 
  consistency requirement: consistency among data must be monitored  similarly to active data base.  but not like active data base  not only consistency among the knowledge in the knowledge data base for diagnosis but also consistency among the online data from the sensor and the knowledge must be monitored.  
　thus  active diagnosis may require more resources for computation and communication than the conventional passive diagnosis. active diagnosis may be implemented based on the three technologies developed independently; active sensing for the instrumentation system of target system  active data base for the knowledge data base of diagnosis  and active agents on the sensor network. the technology of active sensing can be used for the temporal and functional requirement of active diagnosis; that of active agents for the spatial and functional requirement; and that of active data base for the consistency requirement. there may be many ways to realize the above active diagnosis. one way would be the immunity-based approach. immune system is considered the self-identification process that continuously monitor self  discriminate self/non-self  and maintain identity materially  tauber 1 . this essence of immune system agrees with the concept of active diagnosis that extends diagnosis from the event-driven task. immune network  idiotypic network  theory was proposed by jerne  jerne 1   further  learning model based on the idea of immune network has been studied  farmer et a/. 1 . learning model based on the neural network has been studied extensively  e.g.  hopfield 1; cohen & grossberg 1  . features of immune network we have tried to use may be summarized as follows. 
  recognition is done by distributed agents which dy-namically interacts with each other in parallel. the agents carry redundant information. 
  each agent reacts based only on its own knowledge. 
  memory is realized as stable equilibrium points of the dynamical network. recognition of the network is done by changing the state of the network from one stable equilibrium to another by disturbances on the network. 
1 	dynamic interaction among agents 
figure 1 shows the evaluation chain of five agents. each agent tries to identify the identity  faulty/normal for diagnosis  other agents. state variable  ri and its normalization ri  indicating the identity of agents are assigned to each agent. dynamical system is constructed by associating the time derivative of the state variable with state variables of other agents connected by the evaluation chain. 
　the continuous value ri between 1 and 1  indicating faulty and normal of the agent respectively  is assigned to each agent. we call the value ri calculated by the diagnostic models the reliability measure to distinguish it from probabilistic concept of reliability. 
　when the agents 1 and 1 are faulty  we have the test result as shown in figure 1. a possible association corresponding to the evaluation chain would be the following dynamical system: 

	1shida 	1 


figure 1: an example of evaluation chain 
1 	agents on the sensor network 
in this section  we relate the agents  that interact based on the dynamics presented in the previous section  to the sensor network for the application to process diagnosis. agents will be elaborated gradually from a simple one for sensor diagnosis to a complex one for process diagnosis for the convenience of presentation. 
1 	a g e n t s for sensor self-diagnosis 
in process diagnosis  it is often the case that measurements such as temperature  pressure  flows  measured independently are related with each other. in other words  some of these measurements are redundant. using the dependencies  many relations among sensors can be constructed. in the sensor network proposed in this section  each agent  corresponding to sensor  evaluates other agents using these relations  rather than just measuring the process values  ishida & mizessyn 1 . 
　in our approach  the agents of the network naturally correspond to the sensors  processes originated at sensors   and the relations are obtained from simple process knowledge. these relations between the values of the sensors have the following form: 
value of variable a   value of variable b from such a relation  we can build a link between the sensor monitoring the value a and that monitoring the value b  and say that agents of the previous sensors can evaluate with each other. 
　figure 1 shows the sensor network of these twenty-two sensors. sensors connected by bi-directional arc have mutually evaluating via above relations. figure 1 shows a sensor diagnosis system for the preheating process of a cement plant. more relations  arcs  among sensor values  higher diagnostic performance is obtained. in constructing the sensor net  not only process knowledge but the experimental knowledge among sensor values is used to obtain enough relations for diagnosis. further  in our implementation of sensor net builder  not only inequalities but equations with many funcitons can be used for the relations. in other application to a blast furnace of steal plant  about five hundred sensors  thermometers  are involved. by setting the relation more sensitive  the sensor net is known to be useful not only diagnosis but also monitoring global conditon of furnace. 
1 	neural networks 

figure 1: an example of the sensor network for a cement process 

figure 1: a session of sensor network of the cement 
plant 

figure 1: situation when process fault occurs 


	ishida 	1 

figure 1: tank with level and temperature controlled left  and its sensor net right  


figure 1: time evolution of the reliability measures when there is a leakage in the pipe between fi and fh or between fi and fc 
approach from the probabilistic reasoning is that it is for evaluating the reliability of the agent where each agent is capable of evaluating other agents  as opposed to evaluating simple event. it is possible to describe the event dependency of the reliability of agents by bayesian network  however  the network would be cyclic hence preventing the usual probabilistic approach. since the model can be simulated by a continuous differential equation  the method fits in the dynamic environment such as processing plants where the target system can be described by a differential equation. one demerit of our method is that we do not consider the axioms of probability. in fact  dynamics of reliability of each agent depends on the reliabilities of other adjacent agents  and unreliability does not appear in the dynamics. the dynamics of both reliability and unreliability of agents satisfying the constraint that their sum must be one would be a complicated differential equation. another interesting problem is to recast the probabilistic reasoning 
1 	neural. 	networks 
on bayesian network to the continuous differential equations  which would make simulation as well as stability analysis easier. 
　data reconciliation studied in the control theory community also focus on finding a consistent interpretation among data from senosrs. data reconciliation has been extensively studied for estimating the state of process filtering out noise by the state estimate methods  toja & biegler 1; liebman et al. 1 . however  when there are gross errors such as process/sensor faults  the techniques does not apply  since the constraints used for estimation changes due to these gross errors. some researches have been made for modifying the data reconciliation so that it will work even when gross errors may exist  toja &. biegler 1; narasimhan & harikumar 1a . extension of the immunity-based agent approach for process diagnosis so that it will work with measurement error by incorporating the data reconciliation has been proposed  ishida & tokimasa 1 . 
　the characteristic of the approach to process diagnosis is that it admits only relative relation between process values without referring  although possible  to the absolute value of the process values. one merit is that the approach does not suffer from the shifting of all the process values  which occurs depending on the load to the process or the change of environment such as seasonal change   since the method only focuses on the consistency among sensor values and the process knowledge. further  the change of some knowledge  embodiedy by agents  does not propagate to the other parts  since the relation among process values are rather independent from each other. when the model is implemented in a distributed processing environment  the evaluation of the reliability measure can be done in a fully distributed and autonomous manner in the sensor network. 
　the main difficulty of the approach discussed in this paper is to find enough relations between agents. generally speaking  such relations could be obtained from physical theories  mass or heat balances  thermodynamical principles  etc.   mathematics  the value of a flow is always a positive value  a ratio is comprised between 1 and 1  ...   or by experimentations. more the sensors values are redundant  more there are testing relations. the performance of the diagnosis depends on the quality of the relations involved; the diagnosability depends on the number of distinct relations  and the reliability of the diagnosis depends on the reliability of the relations involved. 
　so far we have discussed under the assumption that interactions among agents are determined beforehand. in the future  more adaptive and flexible system should be aimed where these interactions are generated by the active agents themselves. 
1 	conclusion 
we have proposed active diagnosis as a new diagnostic paradigm which may be realizable using the recent development of active sensing  active data base and active agents. we extracted an immunity-based agent approach from self identifying/defining/maintaining feature of immune systems. since the nature of immune system agrees with the concept of active diagnosis well  we point out that the approach would be one candidate for realizing an active diagnosis. as an immunity-based agent approach  on-line sensor-based diagnosis for process plant has been discussed by defining agent on the sensor network. 
acknowledgments 
this work has been supported in part by the asahi glass foundation. i owe some simulations in this paper to dr. f. mizessyn and mr. y. tokimasa. 
