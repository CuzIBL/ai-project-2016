 
one of the most important parts of a story is its ending. this is the point in which all open questions and conflicts in the narrative must be resolved. this paper presents a dynamic resolution method for interactive stories. the type of stories we support allows the user to participate as one of the characters and influence dynamically the development of the plot. the rest of the cast consists of discrete computer characters. our resolution method takes into account the motives of the user character to decide on:  i  the outcome of all character actions and  ii  the presentation sequence for these outcomes. the decision process is based on the current story context. in addition  it addresses the need to avoid ambiguities  to preserve consistency and to create suspense during the end. we have integrated this method in pegasus  an interactive story system set in ancient greece. 
1 introduction 
one of the most important parts of a story is its ending. this is the point in which all open questions and conflicts must be resolved in order for the audience to understand the main idea of the story and integrate all the plot developments around it. there are two types of possible endings. the first one resolves all open questions using the information provided in the story so far. the second one  known as deus ex machina  is based on the intervention of a character who has played no part in the story until that moment. although quite popular in ancient dramatic practice  deus ex machina solutions have been dismissed very often in modern dramaturgy mainly for lack of believability. 
　this paper presents a resolution method for interactive stories that supports the first type of ending. interactive stories are narratives in which the user takes part as one of the characters and interacts with the rest of the cast to influence dynamically the development of the plot. cast interaction is based on the execution of appropriate actions by each character. plot resolution  in this case  refers to the computation of the outcome of all character actions and the presentation of these results in the story. this work describes a resolution method that is dynamic  user-centered and unambiguous. dynamic means that it does not support a priori specific types of ending  such as the happy end for the user character. instead it determines the story outcome based on the contents of the current plot. as a result  this method can be used in conjunction with dynamic storyweaving methods to create stories in intelligent games or collaborative virtual worlds. user-centered means that the motives behind the actions of the user character in the story determine the final outcome. consequently  the system presents the resolution as a consequence of user behavior in the story  thus enhancing the clarity and believability of the final outcome. unambiguous means that the method decides on the results of all actions in the story  therefore leaving no questions unanswered to the user. this feature corresponds to the norm for closed  unambiguous endings found in classical theories of drama  and used in mainstream screen writing  1 1 . furthermore  this method generates a presentation sequence for the final outcome that takes into account the need to create suspense during the conclusion. finally  the decision on the results for all character actions preserves the causal dependencies between conflicting actions in the story. 
　possible uses for this research include the development of dynamic storyweaving methods for interactive entertainment systems  e.g.  stories  games  collaborative virtual worlds   or the creation of intelligent plot assistants for the design of these systems. 
　the rest of the paper is described as follows. section 1 describes the input to the plot resolution method. section 1 presents the steps used in this method. we give an example of the system at work in section 1. finally  section 1 presents some related work  while section 1 is a conclusions and future work section. 
1 system input 
1 	natural-language processing and graphical presentation plot resolution accepts as input a symbolic description of the story content. this consists of a temporal sequence of the character actions in the story so far. this sequence is expressed in a special-purpose language consisting of predicates that describe these 
actions  their motivations and goals  along with the types of cast interaction they implement. 
   resolution assumes that the behavior of each character is motivated by its goals in the story  the roles that it plays and its relation  e.g.  friend  enemy  with the rest of the cast. in general  character behavior consists of either favorable or unfavorable interference between cast members  depending on whether the initiating character wants to harm or cooperate  respectively  with another cast member. more specifically  goals motivate each character to interfere with the rest of the cast in order to achieve them. roles provide the norms regulating the behavior of each character in the story. each cast member seeks to protect its role-relevant norms from violations by other characters by interfering unfavorably against the offenders. analogously  each character is motivated to interfere favorably for cast members with similar normative beliefs. finally  positive  e.g. friendship  or negative  e.g. enmity  social relations motivate the parties involved to either help or block  respectively  each other in the service of their goals. 
　table 1 describes the primitives representing the possible character interactions and their outcome. interference  predicates /+ and i- in table 1  gives rise to the execution of one of possible actions for achieving it. these can be either actions for satisfying a goal or norm  predicate exec+ in table 1   or counter-actions for impeding it  predicate exec- in table 1 . for each action the motivating interference is noted  predicate motivates in table 1 . finally  action execution and interference can either succeed or fail  predicates succeeds and fails in table 1 . 
   for example  a character playing the priest role in the story  will seek to interfere with the behavior of the rest of the cast to impose all the norms associated with worshipping and obeying the gods. furthermore  a character  e.g.  x  with a goal of acquiring a valuable resource  e.g.  gold  from some other character  e.g. y  will seek to interfere favorably or unfavorably with y to satisfy this goal. this interference will initiate a set of appropriate actions for materializing it. for example a stealing action for the resource in question would materialize an unfavorable interference  while an exchange of this resource would implement a favorable one for y. these actions and  consequently  their associated interference can either succeed or fail. 
1 plot resolution 
plot resolution refers to the computation of the outcome of all character actions and its presentation in the story. the resolution method works as follows. initially  it determines all character motives that are affected positively or negatively by the actions of the user character in the story. based on the importance of these motives  it decides whether all user actions will succeed or fail. the method then resolves the actions of the rest of the cast that oppose the user actions. finally  the algorithm decides on the result of the remaining actions and composes a presentation sequence for the ending that increases suspense and preserves the causal dependencies between conflicting actions. 
   more specifically  plot resolution consists of the following sequence of steps: 
1. determine the motives of all user actions. 
　1.determine the relative importance of these motives and resolve all user actions and the actions of the cast that oppose them. 
1. resolve the remaining actions. 
1. present the ending. 
we present each one of these steps in more detail below. 
table 1: behavior primitives involving characters x and y. terms beginning with a small letter signify variables  while terms beginning with a capital letter denote constants. 

	sgouros 	1 
where the '-- '' symbol separates the left from the right 
hand side of a rule  while the 	and 	symbols denote 	furthermore  the outcome of an action related to a the conjunction and disjunction  respectively  of rule conditions or actions. the comment symbols enclose an english interpretation of a rule. 
　in the case of the previous example let us assume that character x interferes unfavorably against the user to defend the norm protecting private property. let us further assume that x materializes this interference by chasing the user after s/he tries to steal the jewel. this action of x conflicts with the user action with respect to the norm that protects private ownership. 
1 step 1 
step 1 decides whether s+ or s- will prevail based on a 
hierarchy indicating the relative importance of motives in the story. this hierarchy can be provided either by the original author of the story  i.e.  the one who created the cast and assigned roles in the story   or by the user before the story begins. furthermore  the comparison of the motive sets with respect to their importance can be done in various ways. 
   for example  the motive hierarchy in pegasus is provided by the story author. furthermore  this hierarchy indicates that all personal goals occupy the lowest point in it  therefore pegasus considers norm-related motives to be more important than the personal goals of the cast. in comparing motive sets  pegasus resolves the plot in favor of the set with the motive that is higher up in its hierarchy. therefore  in the case of the example of step 1 pegasus decides that s~ will prevail  since norm-related motives are more important than personal goals in its hierarchy. 
   if there is no hierarchy of importance for the character motives  or if there is no conflict between them  i.e.  s- =  then the method chooses to provide an upbeat resolution for the user  therefore $+ prevails. the justification for this decision is that audiences generally prefer happy endings  1 . 
   if s+ is deemed to be more important that s- then all user actions in the story succeed  otherwise all the actions of the cast that conflict with the user succeed. this prevalence rule is symbolically described as: 

goal or norm g has an impact on the outcome of all its conflicting actions in the story. in particular  the success of an action that seeks to achieve g causes all its conflicting actions to fail. the method notes the resolution order for the character actions in this case with the resolves predicate. this order is used later for scheduling the presentation of action outcomes. symbolically  we have the following pair of resolution order rules: 

　in the case of the jewel acquisition example in step 1  because s- prevails  then x succeeds in its chasing action. consequently the user fails to steal this jewel according to the first of the two resolution order rules above. 
1 step 1 
step 1 proceeds in two stages. the first stage determines the outcome of character actions not resolved during step 1. more specifically  if s+ prevails according to step 1 then the method allows all unresolved character actions driven by motives in s- to succeed and those driven by motives in s+ to fail. on the other hand  if s- prevails then the algorithm allows all unresolved character actions driven by motives in s+ to succeed and those driven by motives in s- to fail. 
   the justification for these decisions is that user interest in the story will increase  when the algorithm introduces an unexpected plot twist  just before it presents the outcome of the user character actions. in particular  assuming that s+ prevails in step 1  then step 1 ensures that the user will initially watch its allies  i.e.  characters supporting motives in s+ and reacting against motives in s-  fail and its opponents  i.e.  characters reacting against motives in s+ and supporting motives in s-  succeed in their endeavors. consequently  the user 

1 	natural-language processing and graphical presentation 

will expect to be defeated as well  only to be pleasantly surprised  when s/he will be presented with the favorable resolution for his/her actions computed in step 1. on the other hand  if we assume that s- prevails in step 1  then step 1 ensures that the user will initially watch its allies succeed and its opponents fail. consequently  the user will expect to win  only to become adversely surprised when s/he starts failing. in both cases  the dramatic effect of the plot resolution will be emphasized. 
   the second stage of step 1 determines randomly the outcome of the character actions that are not driven by any of the dominant motives. consequently  plot resolution exhibits a degree of variability  even when the user has followed the same sequence of actions in a scene. this feature is applicable in computer game applications  where the user has to go through a sequence of levels repeatedly  before s/he masters the skills that will allow him/her to move to more advanced levels. 
1 step 1 
step 1 schedules the presentation of all action outcomes. 
this presentation follows the resolution order established by the application of the resolution order rules during the previous steps. in particular  if action a resolves some other action a'  then the system presents the outcome of action a before that of a'. if we assume that the binary relation ' a   b ' denotes that the outcome of its first argument  i.e.  a  is presented earlier than the outcome of its second argument  i.e.  b   then this rule can be described as: 
resohles a  	a'  	-  	a 	  	a' 	 1  

this rule favors a sequence  in which the success of an action  e.g. a  is presented first  to explain the failure of all other actions that oppose the motives of a. in this case  the user realizes why the actions that fail  do so  thereby increasing the believability of plot resolution. 
　furthermore  if two actions are either resolved by  or are scheduled to follow a common action  then their outcomes are presented in a reverse chronological order from the one with which these actions were originally introduced in the story. the justification for this rule is that because the user participates as one of the characters of the story  s/he perceives more recent situations in the narrative as more immediate. consequently  s/he expects that these situations will be resolved first. if we assume that follows x  y  denotes that y is a later plot development than x  then this rule is described as: 

　finally  if the action of a character different from the user has been resolved directly by the system  then the presentation of this outcome precedes the presentation of the outcome for the user actions. this rule supports the presentation of the plot twist described in step 1  that seeks to surprise the user during plot resolution. furthermore  by pushing the resolution of the user actions at the end of the presentation  the system increases user suspense. this is the case  because the user is not aware of the fate of its endeavors until the last possible moment. symbolically  this presentation rule is described as: 

1 an example 
we have tested this method in pegasus  an interactive story set in ancient greece. during one of the scenes in pegasus the user visits eretria  a town with a big port. in eretria the user has the goal of obtaining a ship to sail to troy. the local cast for this scene consists of apateonis  the local trader  elanthos the king of eretria  and the user. the initial motives for the characters indicate that the king is an enemy of apateonis. in fact  elanthos has issued a decree forbidding anyone to make business with apateonis. furthermore  apateonis is a dishonest trader. in the following  we assume that: 
a = apateonis  e = elanthos  u = user  g = goal user  obtain ship    
　　rk = norm respect-king   po = normfprotect-ownership  where rk is the norm demanding respect for the king  while po is the norm protecting resource ownership. 
　the resolution algorithm accepts as input the temporal sequence of actions shown in table 1. this sequence can be summarized by hand as follows: 
 the user wants to obtain a ship. consequently  he tries to hire one from apateonis in exchange for a precious diamond that he owns. this action violates the royal decree that forbids to make business with apateonis. apateonis is dishonest and tries to steal the diamond from the user. the user reacts and attempts to confront the thief. elanthos  the king seeks to punish the user for violating his decree. the user attempts to hide from the king. elanthos tries to punish apateonis as well for his attempt to steal the diamond. apateonis seeks to hide from the king.   
　at this point  the system applies step 1 of the resolution method and detects the motives of user actions in time steps #1  #1 and #1 in table 1. based on these actions the algorithm creates the following motive sets: s+={g.po} s- = {rk} dm = {g po rk} 
meaning that the user tries to satisfy his goal of acquiring a ship and s/he also complies with the norm that protects 
	sgouros 	1 


1 	natural-language processing and graphical presentation 

　table 1 describes the presentation sequence for all the events in the story that is determined by step 1 of plot resolution. this sequence can be summarized by hand as follows: 
 apateonis succeeds in hiding from elanthos  therefore the king is unable to punish him. the user successfully hides from the king  therefore elanthos cannot punish him as well. the user successfully confronts apateonis. as a result the user succeeds in exchanging the diamond and apateonis fails in his stealing actions 
   pegasus runs on a windows pc. plot resolution is built on top of an atms-based rule engine written in c++  similar to the one described in . 
1 related work 
the resolution method accepts as input an action sequence produced by a plot control method similar to the one described in . 
　there has been significant research in ai for the creation of interfaces that feature believable interactive characters  see  for an overview  or for the creation of interactive story systems . this work has concentrated mainly on portraying the emotional state of these characters  on supporting full-body interactive video environments  or on developing directed improvisation paradigms in which computer characters improvise a joint course of behavior following users' directions  1 1 . in addition  al researchers in this field have conducted live experiments designed to understand how to create interactive drama . in these experiments human actors simulated a computer system for interactive drama. our work complements all this research by addressing computational issues not raised by any of the previous approaches  such as dynamic resolution techniques for interactive drama. 
　storyweaving has been investigated in tale-spin . this system provides a simple model for story generation that focuses on describing the stereotypical problemsolving behavior of story characters in pursuit of various goals. tale-spin supports deus ex machina types of endings because the user does not participate in the story as one of the characters. instead s/he has a directing role resolving all plot developments. in contrast  the computer decides dynamically on the resolution of all plot developments in our approach  based on the higher-level motives of the cast and the dramatic power of the story ending. consequently  this feature increases the believability of the resulting plots. 
1 conclusions 
we have described a dynamic  user-centered resolution method for interactive stories. this method can be used for the development of intelligent plot assistants for screenwriters or directors of interactive entertainment systems. in addition it can be incorporated in dynamic plot generation systems for interactive stories  games and/or collaborative virtual worlds. 
　future work in this area includes the development of table 1: final resolution sequence. dynamic multimedia presentation techniques that will be integrated with this resolution method  along with resolution algorithms for non-linear plot generation systems that cycle  contrast or repeat multiple story lines 
. 
