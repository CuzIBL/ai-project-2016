 
this paper describes a deductive approach to  region use  planning problems. the planning task is viewed as one of devising a complete set of policy rules by iteratively modifying the rules and making their deductive consequences readily available to the planner. the application of this approach to a national park region zoning problem is also described. central to the system are the representation of management policy as knowledge based rules and the detection of inconsistencies in the rules. the implementation of the system has three closely coupled components; a spatial database  an interactive graphics server and the deduction subsystem. the last of these is briefly described in the paper. 
1. introduction 
this paper describes a planning system which guides the evolution of a consistent set of management policy rules for a 
collection of regions. in addition the system deduces zoning maps for the regions from the policy rules  thereby guaranteeing that zonings satisfy policies. planning tasks of this kind are common in land use management where the spatial extent of facilities and the separation of incompatible activities are important elements in controlling land use. 
in its simplest form  region use planning involves the partitioning of an area  usually a geographic area  into zoned regions  where a zone stands for a set of permissions controlling activities in the associated region. the planning problem then can be construed as a search for single valued assignments of zones to regions which do not violate policy criteria. 
in practice  the construction of zoning maps involve planners in a range of unformalised practical considerations  political intrusions and conflicting demands  all of which have to be allowed for in the formulation of policy. under these circumstances inconsistent policies can arise easily and are often difficult to detect. the system described below can carry out the central task of ensuring that zone maps are consistent with policy rules. the resolution of inconsistencies is carried out by planners working interactively with the system. the aim is to construct a planning assistant rather than an expert planning system per se. 
the principal theme is that as planners develop and refine policy rules  they should have ready access to the deductive consequences of the rules viewed as constructors of  or constraints on  possible zoning maps. this theme is allied with the aims of expert systems and includes an emphasis on explanations of consequences of the policy rule base. 
1 	knowledge representation 
hugh g. mackenzie 
division of information technology csiro 
gpo box 1 
canberra  act australia 1 hgm  anucsd.oz seismo.css.gov 
the inferencing component of the planning system is called 
specs. specs assumes that planning tasks proceed from a collection of attributes of an area to be zoned and a collection of policy rules which a planner is required to follow in arriving at an overall zoning map. specs is one of three components in the planning system; the other two provide database and interactive graphics support. 
the planning system is a general tool  and is being applied to problems in national park planning and urban planning. the following section describes reefplan  a particular application which is used throughout as an illustrative example. 
1. the reefplan application 
the great barrier reef marine national park consists of five sections  one of which is called the cairns section. the problem of planning the cairns section has been studied by cocks et.al. cocks 1   using an approach based on 
luplan  ibid   a  land use  planning system developed at the csiro. the cairns section is covered by approximately 1 regions which have been designated  atomic  regions for the purposes of assigning zonings. typically each region contains a geographic feature such as a reef or shoal  an expanse of water closely associated with such features  or an area identified for its existing uses  such as shipping  fishing  etc. . the base data consists of approximately 1 attributes and the boundary coordinates for the 1 regions. figure 1 shows the regions in the cairns section  the westerly border being the coastline and the easterly boundary the continental shelf. 
activities to be controlled by zoning include fishing  swimming  coral and shell collecting  trolling  sight-seeing  recreational boating  and so on. the relationship between zones and activity permissions can be found in cocks 1. more or less in order of increasing permissibility  the zones are named preservation  p   scientific research  sr   marine national park type a and b  mnpa and mn1   general use type a and b  gua and gub .  these abbreviations arc freely used below . 
policy rules are illustrated by the following examples taken from cocks 1. 
a.l. all mapping units  regions  classified as sc  coastal shipping lane  or st  transverse shipping lane  will be zoned general use  type a   gua . 
b.1. as far as possible  ensure that areas associated with existing off-shore national parks or within 1 km of existing coastal national parks and nature reserves are zoned as mnpa  mnpb or s. 


b.ll. as far as possible  ensure that inter-reef areas are not zoned gua. 
b.1. as far as possible  ensure that fringing reefs and near shore areas are zoned mnp a or mnpb. 
there are some 1 rules of this kind represented in the current system. in the context of standard ai techniques the following points about the rule set are important. 
a. many rules have disjunctive consequences 
b. some rules have negated consequences 
c. many rules contain spatial predicates over regions 
d. there is no precedence ordering on the rules 
e. many rules contain the qualifier  as far as possible  
the consequences of a and b for the specs inferencing procedures are discussed in section 1. 
the need to compute a range of spatial relationships over relatively large amounts of coordinate data  point c  led to the construction of a spatial database system using techniques described in abel 1. 
taken together  points d and e finesse the problem of consistency in policy making since any  as far as possible   afap  rule can be rejected if otherwise it would lead to conflict. in fact the overall approach to mechanising a planner's assistant is mainly determined by how these afap rules are handled. our initial approach was to regard such rules as assumptions  instances of which could be retracted to avoid inconsistencies  in the style of a truth maintenance system . this approach captures the'permissiveness of afap policies in a fairly direct way but does not serve the goal of assisting a planner to develop definite policies which in themselves determine a zoning map. 
in the luplan scheme  policy rules are translated into components of an objective function which form the basis of a hill climbing search for a zone map of  maximum goodness . goodness here is a measure of the extent to which regions which are suitable for certain activities are zoned so as to permit those activities to take place  and vice versa for activities which are not suited to particular regions. the search begins from a 
user supplied  initial zone map  which provides a point in the search space where the climb begins. different initial maps lead to different final zonings  as do variations in the coefficients provided for the objective functions. 
the specs solution to the zoning problem is quite different from the one used by luplan. for example  in both systems region data taken together with given policy rules may result in many regions not being assigned a distinct zone. however the luplan approach accepts this low level of determinism and proceeds to find local maxima on a surface defined by coefficients relating rules and region attributes. in contrast  the specs approach is to assist the planner to complete the rule set so that the zone to be assigned to each of the regions is determined by the rules  strengthening them where necessary to avoid inconsistencies. thus the approach is to help planners refine and develop policy to the point where the problem is determined by the rules rather than offering one of many solutions found in a highly underdetermined space. 
the extent to which most of the indefiniteness can be removed from typical region use planning tasks by this method is an experimental matter. planners use intuitions and make aesthetic judgements in arriving at final zoning maps and the extent to which such knowledge can be formalised is unclear. however  by seeing the planner's task as one of decision making through rule strengthening  the specs approach provides a base for exploring formal justifications for giving regions particular zones. 
1  rule and answer representation 
specs uses a set of backward chaining rules to compute relations  in a manner similar to prolog  except that relations are computed in quasi-parallel  using standard techniques similar to those described in charniak 1. operators in rule antecedents include the usual prolog operators  together with the logical extensions described below  and general procedural escapes which can be used to access sql  the graphical interface  and the spatial database. 
a relation computed by specs is a set of 'tuple' objects  each of which has the following form  where the 1 and o are substitutions. 

given a set of variables {x1  x1 ...} a simple tuple generator represents the set of ground instances of the term  tuple x1  
	stanton and mackenzie 	1 

x1 ...   under the substitution 1. specs is explicitly designed for grounded answer relations so questions of interpretations of variables will not be discussed here. 
the usefulness of constructive negation arises where is not convenient or efficient to fix the domain of interpretation for an expression. for example in  not p x  a q x  ..  we wish to restrict the tuples satisfying q x  to those not satisfying p x  without enumerating the domain of p. 
rules b.1 and b.1 in section 1 have disjunctive consequents. 
such rules are not represented in that way but as standard rules which have a consequent which is the  most specific  generalisation of the set of disjunctions  and with an 'exclusive or' expression in the antecedent. this syntactic constraint was imposed for efficiency in searching the database. the xor operator constructs  multiple worlds   one for each of the disjuncts. subsequent unifications take place independently within each of the worlds. thus rule b.1  represented by: 
fringereef  r    z = mnpa xor  z = mnpb  =  zone  r  z  
can produce a disjunction tuple generator in which two new worlds are established  the associated substitution for one containing mnpa for  z and the other  mnpb. disjunction tuple generators also carry identification of the choice points which produced them  allowing split worlds to be reunited by an answer processing operation which carries out case analysis. in this way specs can deduce  zone rl p   from the three rules  
dugong habitat  r  high  =  zone  r  p  dugong habitat jr  medium  =  zone  r  p  
=  dugong habitat  r  medium  or dugong habitat  r. 
high  
since both worlds generated by the choice point in the third rule eventually contain  zone rl p  . 
rule b.l 1 in section 1 has a negated consequent rules of this form are supported in specs by constraint rules of an  if deduced  kind  where demons prohibit the existence of certain answer tuples. 
thus we could represent rule b. 1   naively  inter-reef  r  =  not zone  r gua    as a demon which checks for.the generation of an assertion unifying with  zone  r.gua   and allows it if it is not the case that  inter-reef  r   for that unification. 
we have also investigated using constraint rules to represent disjunctive consequents. a rule with the disjunctive consequent 'zone  r  p  or zone  r  gua ' could be formulated as such a constraint rule  which would prohibit a tuple to enter the relation unless it unified with 'zone  x.p ' or 'zonecx  gua '. however  many of the rules with disjunctive consequents are intended to be constructive in the sense of allowing a planner either to choose freely between alternatives on some external criteria  or to remove disjuncts where they can be shown to lead to conflicts in a zone map  cf. assumption based reasoning  doyle 1  dekleer 1  stanton 1 . in either case the constraints view of disjuncts is inappropriate. 
on the other hand  a classically complete treatment of disjuncts was ruled out  as it usually is  by efficiency considerations. the solution adopted in the current version of specs is to carry elements of a disjunct as if they were full members of the associated relation except that they are marked as  maybe  elements in the form {choose oj  o1 ...}  before otherwise surfacing in an answer  such elements may have been deleted due to the existence of an unmarked equivalent element thus 
1 	knowledge representation 
capturing one aspect of the intended meaning of rules such as b.1. the problem of the removal of alternatives which lead to conflicts is discussed in the next section. 
1. planning cycle 
a planning cycle consists of computing the  zone  relation  a binary relation relating regions  represented by small integers  to zones  represented by p  gua  etc . to produce a zoning map  the relation must be a function. during the development of a plan however  the relation might not not be a function because of rules assigning multiple zonings to some regions and no zonings at all to others  see davis 1 . incremental removal of these inconsistencies is the basis of the planning cycle. 
after computing the zone relation  its derivation may be examined textually or graphically  see figure 1 . sets of zone values are associated with colour  or  textures  in the case of monochrome screens. ambiguities are shown as described below. for any region  the rules involved in the zoning for that region  the zone values derived  and the base data held for the region may be examined by graphically selecting the region. 
the derivation tree for any tuple generator may also be examined by means of an explanation sub-system. the explanation system also explains why tuples were not derived. following the use of these tools to examine the relation  the underlying rules or base data may be modified to remove conflicts  and the cycle repeated. 
in order to display a relation it is regarded as a function and the dependent and independent variables identified. in reefplan   zone  r  z   is consideded to define z as a function of r. then equivalence classes of coreferent tuple generators arc found. tuple generators are coreferent if the independent variables unify  in reefplan  the variables must refer to the same region . to make this possible for the disjunction and exception tuple generators  we require that all substitutions in these tuples have the same independent variable values. two tuple generators are in conflict if some grounded variant of each one violates the 
functionality condition. that is  the independant variable terms from both tuples unify with mgu 1  and the dependent variable terms unify when 1 is applied to them. these classes are examined to detect conflicts and to remove choices which  a priori  cannot be made without producing a conflict. for example  if the class of coreferent tuples for  r =1 is: 
{ choose  r=l  z=p    r=l  z=gua    
 choose  r=l  z=p    r=l  z=mnp   } 
the relation would be transformed to show  r=l  z=p  as the only possibility. in addition  if  r=l  z=sr  were in the class  there would be no consistent choice and the relation would be transformed to indicate a conflict. a general solution to the rejection of alternatives which lead to conflicts involves selections among the maximally consistent subsets of alternative disjunct tuples  a step we have resisted until more experience of the planning problem has been obtained. 
following this relation processing  regions whose independent variable values are in conflict have that conflict indicated by a previously unused colour or texture; those where a choice is still possible are indicated in the same way. 

figure 1 
1. summary 
the research reported here aims to prove the efficacy of a deductive approach to region use planning problems. it views the planning task as one of devising a complete set of policy rules by iteratively strengthening the set of rules and making their deductive consequences readily available to the planner. this thesis is being explored on four fronts: rule forms for expressing policy and associated reasoning strategies; detection of rule set completeness; efficient spatial inferencing techniques over large databases; and interactive graphics services tightly coupled to the deduction processes. 
experience with the specs system so far has centred on the reefplan application. to obtain appropriate expressive power for this application  a form of disjunctive consequence and constructive negation were developed as enhancements to the familiar positive literal consequent rule structure. although these enhancements are restricted to a ground case in the current version of specs  they proved to be adequate for the reefplan problem. 
1. acknowledgements 
the work reported in this paper is part of a joint project on 
 spatial inferencing systems  between the computer science department  anu and the division of information 
technology  csiro  and is supported in part by an 
information technology grant. john smith  csiro  directed the construction of the spatial database interface. colin keith  greg toomey and scott milton made substantial contributions to the implemention of the system. thanks are also due to rob edmondson for many discussions about non-floundering negations in logic programming. 
