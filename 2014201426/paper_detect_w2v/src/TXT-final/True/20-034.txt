 
this paper presents a method for identifying highlights in images through the use of chromatic information. an existing model of reflectance is shown to predict that a highlight will usually involve a gradual additive color shift from the color of the object to the color of the illuminant. this shift is observed in real images and forms the basis of our algorithm. 
	1 	introduction 
the appearance of objects in the real world is related to the complex ways they reflect the light impinging on them from the light source present. different materials reflect light in various ways  but one thing common to most materials is the fact that they are neither totally matte nor totally mirror-like; it is a combination of these two modes of reflection that governs the appearance of most objects. in short  it is the sum of diffuse and specular reflections that determines the total reflection of light off surfaces. based on this statement  we observe that a shift in color occurs under some conditions  which leads to the development of an algorithm designed to identify the color changes which are due to specular reflection. 
   the motivation behind the quest for highlights originates in two opposing properties highlights possess. on one hand  highlights in images provide important information which can be used to determine shape  size  or curvature of objects  1 1 . on the other hand  highlights cause numerous problems for algorithms which require correspondence between consecutive images  such as stereo or motion algorithms  1 . 
	1 	the shift in color 
earlier studies into models of reflection pointed out that the total reflection of light striking an object is actually a sum of two components: specular and diffuse  1 . this combination determines the appearance of the object everywhere  be it shadow  highlight  or any other region. the most intriguing aspect of this statement is the fact that specularity is an additive process; that is  the regions which appear glossy have the color of the illuminant added to the diffuse color of the surface for nonxnetallic objects. the reason for this transition is a change in the weights  magnitudes  assigned to the diffuse and specular reflections. a realistic formulation of the physical processes * also  canadian institute for advanced research. 
1 	perception 
which vary these weights is found in . one interesting observation from this formulation is that as the viewing and illumination geometry changes  there is a shift in the relative strengths of the diffuse and specular reflections  from a stronger diffuse reflection to a stronger specular reflection. since this is in effect at all wavelengths  the implication on chromaticity will be a shift in color from the diffuse color to the color of the light source. 
　　suppose that the images with which we deal are transformed into a color constant space  c-space   one which is a linear transformation of the original  r g b  image into an image which discounts the illuminant; such a transformation is described in more detail elsewhere . we therefore assume that the image has been transformed in such a way that no matter what illuminant is used in the scene  the c-values1 of each pixel in the image will be the same. this implies that if the highlights indeed reflect the color of the light source  then changing the light source for the same scene should result in the same c- values for the highlight regions. thus the shift in color from the diffuse regions to the highlight regions should involve a transition from some c-values representing the  diffuse  color of the object to c-values representing the perfect reflector  mirror . moreover  barring any abrupt changes in the curvature or pigmentation of the object  the transition should be smooth  reflecting the monotonic change between the diffuse and specular reflections. this transition is the phenomenon we wish to use as a cue towards the detection of highlights. 
　　in order to verify that indeed the shift in color occurs in real images  some instances of highlights in images were sampled and plotted in c-space. the images were transformed into c-space and scatter plots of the c-values were generated. the regions from which the c-values were picked were always a highlight and a diffuse region beside it. one example is presented in figure 1  where a three-dimensional scatter plot of the cspace from the  cup  image is depicted  illustrating that around a highlight area there is a  dog leg  structure of the among the pixels. the original image is presented in plate l. 1 as can.be observed in the figure  there is indeed a smooth transition in the c-values in the form of a udog legn. moreover  the transition always involves 
1 the  r g b  values transformed into c-space. 
　　1 this image was provided by professor steve shafer of the calibrated imaging laboratory at carnegie mellon university  supported by the national science foundation and the defense advanced research projects agency. 


figure 1: scatter plot of highlight and surrounding cup. the dashed line represents reflectances of perfect reflectors. 
a shift of the c-values towards the same direction. in terms of the c-space  this direction is actually pointing towards the values of a perfect reflector  since highlights are supposedly a realization of mirror-like surfaces. this observation was analyzed numerically in the following way. c-values of a perfect reflector were generated under the assumption that a perfect reflector would reflect the light impinging on it at all wavelengths. the resulting c-values for a perfect reflector in wavelengths     were: 
this claim is 
illustrated in figure 1 with a  dashed  line segment starting at the origin and ending at the c-values of a perfect reflector  as given above. this line segment represents the c-values which reflect light equally at all wavelengths  for reflectances from 1 to  we can see that one of the legs points towards the end of this line segment. 
	1 	the algorithm 
the algorithm designed to detect possible highlights is based on the observations made in the previous section. it is a two step algorithm: first  it requires the segmentation of the image into regions  and compilation of information about regions and neighbors  and secondly  it attempts to find a  dog leg  relationship between every adjacent pair of regions. the major steps of the algorithm are: 
  chromatic-based segmentation of the  r g b  image and aggregation of small regions into larger ones. 
  transformation of the  r g b  values into c-values. 
  least squares approximation of the c-values in each region to a line in 1-d. 
for each pair of adjacent regions: 
  verification whether the lines   legs   are parallel - if so  a new pair of regions is tested. 
  computation of the point of intersection between the two lines and verification that the two lines indeed meet. 
  detection of the region in which most of the c  values are beyond the point of intersection  and labeling it as a candidate highlight. if both regions pass the test - a new pair of regions is tested. 
  verification whether the line representing the candi-date region is in the direction of a perfect reflector. 
the algorithm was applied on the images presented in plates 1 and 1  with the results of the regions considered as highlights depicted in plates 1 and 1. in all the images  the highlight regions are coded in a grid pattern superimposed on the original image. note that the shape of the regions does not precisely fit the shape of the highlights  due to the nature of the segmentation. 
	1 	discussion 
one assumption which was not dealt with was the number of light sources and their spectral power distribution. since the algorithm makes use of color constant descriptors of the image  and thus discounts one spectral power distribution of illuminants  the same assumption regarding the light source holds. therefore the algorithm can handle more than one light source in the scene  as long as all the light sources share the same spectral power distribution. the fact that there are no assumptions regarding the geometry of the objects allows the treatment of many light sources  since the algorithm is based on chromatic properties only. the scatter plot resulting from the inclusion of more light sources will not change since there will be no change in the chromaticity of the light sources  and consequently  in the colors of the diffuse and specular regions. 
   there remains one problem with the technique employed in this paper  namely  highlights on materials which share the same color as the light source. a simple example can be a highlight caused by a white illuminant on a white object. the problem  of course  is that there will be no color shift  since the diffuse and specular reflections share the same spectral power distribution. this results in the fact that there will be no  dog leg  in c-space since the only difference between the two regions will be the strength of the values of c1. this problem remains open at this stage. 
	1 	summary 
this paper discussed the problem of identifying probable highlights in real images. the solution we have proposed is based on the physics of interaction between light and materials  as formulated in models of optics and reflection. based on these models  a prediction as to the behavior of highlights  or the specular reflection  was made  and was observed in real images. based on the observed phenomenon  namely  the shift in the color of objects from the diffuse reflection to the the specular one  we have developed an algorithm designed to detect these shifts. the algorithm requires a segmentation of the image into regions  so that each region can be related to its neighbors to verify whether they share the shift in color. since the color shifts can be characterized by a  dog leg  behavior in color space  the algorithm was designed to detect such relationships between the regions  and augmented with rules that employ information about the expected color of highlights in the scene. the algorithm was tested with real images and produced good results in detecting the location of probable highlights. 
	gershon  jepson  and tsotsos 	1 

