 
with rapid development of the internet  demand is rising high for a personal tool to support writing foreign language document such as e-mail. however  translation result of an automatic mt system is often not satisfactory for this purpose and requires post-editing. in addition  a purely rule-based system does not necessarily provide a satisfactory result for specific expressions because of lack of corresponding rules  nor purely example-based system for expressions not covered by examples. a hybrid approach is worthwhile to pursuit  where automatic and interactive approaches  as well as rule-oriented and data-oriented approaches are integrated. in this article  we propose a hybrid interactive machine translation method that combines rule-based  corpus-based and example-based approach with an interactive man-machine interface. we show that the previously proposed rule-based model can be naturally integrated with different translation paradigms. the interactive operations  previously introduced and shown to be useful for disambiguation in the rule-based transfer  are shown to be also useful to control covering by and selection of the matching examples  two major decisions in the example-based translation method. we also mention an online learning scheme of translation pairs from the user interaction. 
1 	introduction 
with the rapid development of the internet  demand for a supporting tool for reading and writing foreign language document is rising high these days. while conventional automatic machine translation systems are useful for reading support where quick and rough translation * current address: nec research institute  u.s.a. 
does its job  they are not necessarily appropriate for writing support where the main task is to create a short original document such as e-mail. since the final quality is far more important  such tool is better to offer some interactive means to control the translation result. 
　with this in mind  an incremental interactive machine-aided translation method was introduced and a realization as an english writing support tool was shown muraki et al.  1; yamabana et al  1 . in this method  the source sentence is translated incrementally in a bottom-up manner  from a smaller part to a larger structure. in respective steps  the user can interactively control the process through simple operations of translation area correction and translation equivalent selection. a rule-based transfer engine provides translations obeying user's specification and shows them on a selection window. the partial results obtained in this manner are repeatedly combined to a larger expression in the subsequent translation steps  until the whole input is converted into a target language expression. 
　this method offers an interactive means to combine the word dictionary information with grammar rules to obtain a direct translation of the input sentence. however  rule-based method is not the only and desirable means for translation  especially considering its cost in describing and keeping the consistency of highly specific linguistic phenomena. although various paradigms of machine translation such as rule-based  statistics-based and example-based method have been advocated these days  there now seems to be a consensus that none of these paradigms are uniformly adequate in all aspects of the translation task. 
　in this article  we propose a hybrid interactive machine translation method that integrates various translation paradigms with an interactive man-machine interface. in section 1  we review the rule-based interactive translation method on which the proposed method is built. in section 1  the hybrid interactive machine translation method is described  and its basic architecture and the algorithm is presented. in section 1  the cur-
	yamabana  et al. 	1 
rent implementation status is described. section 1 is for discussions  and the final section concludes this article. 
1 an interactive japanese to english translation method 
an interactive machine-aided translation method was introduced to support non-natives of english to write english material  muraki et a/.  1; yamabana et a/.  
1 . the target user of the method is those people who have difficulty in writing down english sentences directly  in spite of the fact that s/he has a basic knowledge of english to read and understand it. in this section we show how the method works by an example. 
　suppose the user is writing e-mail in english  working on an editor of a mail program. our tool is running background as a daemon  watching the keyboard input by the user. while the user is typing english characters  the system lets them through to the editor window. the tool awakens when the user toggles on the japanese input. as soon as the first japanese character is typed in  the tool detects and fetches it from the input queue of the operating system  opens the main translation window  and puts it there. all the subsequent characters are captured in that window  instead of the editor window. succeeding translation is performed in this main translation window. 
　suppose the input sentence is the one shown in figure 1  a 1. as soon as  a  is entered  dictionary look-up process is started automatically. first the morphological analyzer recognizes word boundaries in the sentence  looks up corresponding entries in the system dictionary  and shows the result on the main window  b . at this time  content words are replaced by one of its translation equivalents assumed most plausible by the system  while functional words are left unchanged. 
   this representation step  in which english words  content words  and japanese words  functional words  are mixed  is one of important characteristics of the method. this step separates steps into word translation and later structural. transfer  making translation steps clearer. since word order and functional words carrying grammatical functions are unchanged  the user can easily recognize the skeleton of the sentence  and clearly grasp the correspondence between the original word and its translation equivalent. this representation also carries all interactive operations of the method on it  and has a double role in interactive operations  showing the information by the system and providing the objects for interactive manipulation. 
　translation equivalent alternatives for the cursor position word  focus word  are displayed in an alternatives 
   hereafter  slanted characters represent japanese words in japanese characters. 

figure 1: alternatives window for ronbun 
window  appearing nearby that word. figure 1 is a snapshot of the alternatives window for ronbun  paper . the second line is highlighted to show that it is the current selection. the user can change the selection simply by a cursor movement or a mouse click on this window  then corresponding translation equivalent on the main window changes synchronously. to see the alternatives for another word  the user has only to move the cursor to that word on the main window. in addition  the user can choose an inflection in a similar manner on an inflection selection window  opened by the user's request. 
   if the user needs only the result of dictionary lookup  s/he can signal the end of translation at this point. if syntactic transformation is necessary  the user needs to proceed another step. at the same time as the initial prediction of the translation equivalent  the system predicts an appropriate area for syntactic transformation  as shown by an underline in  b . just like the translation equivalent selection  the area can be freely changed by the user. after the user confirms the selection of translation equivalents and translation area on  b   s/he invokes translation. the system performs syntactic transfer using syntactic information in the dictionary such as verbal case frame and transfer rules encoded in the system  shows the result on the main window  and replaces the original sentence with the result  c . if there are more than one possible translations  they are shown in an alternatives window similar to figure 1  allowing the user to choose among them. when the user triggers the end of translation  the result is sent to the original editor window. 
1 	natural-language processing and graphical presentation    figure 1 shows translation steps for a sentence with a relative clause. this sentence has a dependency ambiguity  so we also show how to resolve it through the interactive operation. the original sentence  a  contains a relative clause with verb kau  buy  with an antecedent hon  book . since japanese is head-final  the sentenceinitial case element kare-ga  he-subj  can be the subject of either kau  buy  or yomu  read   causing syntactic 

figure 1: relative clause and syntactic ambiguity 
ambiguity. 
   first  let's suppose kare-ga is assumed to be the subject of the relative clause. then the system pauses showing  b   as soon as  a  is input. in  b   the translation area is assumed to be  he-ga buy-ta book . after translation trigger  the system pauses showing  c . please note that the underlined part in  b  is replaced by its equivalent english expression  the book he bought   and the whole sentence is underlined now. after another translation trigger   d  is obtained  with missing subject filled by some default word. 
　suppose just after obtaining  d  the user noticed that this interpretation is not what s/he wants  and the case element kare-ga should be the subject of the verb of the matrix sentence. then the user triggers undo of translation twice  returning to  b . then s/he notices that  he -ga buy -ta book  is treated as one phrase  against his/her interpretation. then s/he changes the underlined area to  buy -ta book   excluding  he -ga  from the area  e   because this is the  correct meaningful phrase  in the user's interpretation. after translation trigger   f  follows. note that the subject of the relative clause is augmented by a default element. finally  g   what the user wanted  follows. 
1 a hybrid approach to interactive machine-aided translation 
this section describes the model and the algorithm of the proposed method. first  the basic model of stepwise bottom-up interactive translation is described in the subsection 1. then the next subsection describes how different translation paradigms can be integrated in this model. there are also shown a brief description of respective translation modules. the subsection 1 shows that the basic interactive operations of the method are capable of controlling the example-based translation process as well as the rule-based translation process. this close connection between the interactive operation and the translation method is one of most important characteristics of this method. in the last subsection an online learning scheme is introduced. 
1 	basic model of interactive translation 
the basic model of the interactive translation method as described above is a bottom-up evaluation scheme of syntax-directed translation. in this scheme  the attribute of a syntax tree node is calculated from that of the children nodes by a semantic rule paired with the syntax rule used to build the node from the children. attributes represent a partial translation result for the structure below the node  and the attribute calculation proceeds from the lexical nodes to the root node in a bottom-up manner. user interaction is associated with the attribute calculation at each node. before each calculation  the tool pauses to show an interpretation of the underlying structure  and allows the user to examine and change it if necessary. interactive translation proceeds from a smaller component to a larger component in a bottom-up and inductive manner. as translation mechanism  any method can be used as long as it is compatible with the general scheme. in the current system  the node at which the system automatically pauses for interaction are restricted to contain at most one predicate in order to reduce the operation cost  while this restriction is not applied to the user operations. the system looks for a lowest such node  then pauses there for user operation. when user triggers translation  the attribute of the focus node and below are calculated in a bottom-up mariner  then the result replaces the tree rooted by the focus node. the node serves as a kind of lexical node in the subsequent translation. 
1 	hybrid translation module 
the basic idea about how to integrate different translation paradigms into the above basic model is to use respective translation submodules in parallel at each translation step  while each submoduie processes the input independently. all the results are sorted according to the priority  then presented to the user. by unifying the data structure of input and output of all submodules  the results can be freely combined in a subsequent translation step. 
the algorithm can be described as follows. 
repeat the following until the whole sentence is translated. 
1. find a minimal area for translation. 
1. show the area to the user. s/he can change the presented area if it is not appropriate. 
1. obtain possible translations of the area using respective translation modules. calculate priorities of the results. 
1. show the results to the user in the order of priority. s/he may change the selection or even directly edit the results. 
	yamabana  et al. 	1 
1. replace the area with the selected/modified result. 
rule-based module 
the rule-based transfer module is the backbone of the whole translation module. it provides a default result for all kind of inputs. for some linguistic constructs  it is the default translation method. for example  translation of a simple sentence is performed by a case frame transfer rule that reorders the case elements of the main verb using the verb case frame correspondence encoded in the dictionary. generally speaking  the skeleton of a simple sentence made of a main verb and its case elements are well described by the verbal case frame  and a rulebased treatment is suitable. for this kind of linguistic constructs  the corpus-based or example-based method would be rather useful in building the knowledge base  than being applied directly in the translation process. 
corpus-based module 
a corpus-based method will be mainly used for lexical translation. although words are translated using a bilingual dictionary  corpus-based  more precisely statisticsbased  method enters here for the translation equivalent selection through the dmax method  doi and muraki  1; 1 . this method uses the word cooccurrence frequencies gathered from independent source and target language corpora  and combines them in terms of the word to word correspondence in the bilingual dictionary  to eliminate an accidental cooccurrence between the translation equivalents of non-cooccurring words. a major advantage of this method is that the corpora need not to be parallel. 
example-based module 
an example-based method will be mainly used to translate a syntactically uniform structure such as compound noun or noun phrase. since these structures often lack a clear syntactic feature useful for the rule-based analysis or translation  example-oriented methods such as  sumita and lida  1; hisamitsu and nitta  1  have been proposed to capture their semantic and idiosyncratic property better. although the rule-based method provides the baseline  these example-based method can offer a better result that depends on appearance of a particular word. 
　an example will be stored as a pair of the source language expression and the target language expression  with word to word correspondences wherever possible. it also keeps the information about the head word  which determines the behavior of the phrase as a whole. the input phrase to be translated is expressed as a sequence of words  where respective word is associated with the translation determined by the previous bottom-up translation steps  if any. this is the common data structure used by all the translation modules of the method. a constituent sub-phrase is justly identified with its head word  since translation of that phrase is already fixed. the transfer module looks for the best matching examples  and outputs the target language expression  replacing the constituents with the translation specified in the matched phrase when necessary. 
　example-oriented method is also used in order to determine the translation equivalents of strongly cooccurring words  such as an idiomatic expression. this augments the statistics-based translation equivalent selection described before. 
idiomatic expressions 
there are some words that have special syntactic/semantic behavior  when appearing simultaneously. an example is denwa-wo kakeru  which usually means  make a phone call   not a literal word-by-word translation  hang a telephone . possible translations include  make a phone call    telephone  or expressions with similar meaning  but no literal translation can convey the proper meaning of the original expression. since the proper translation for an idiomatic expression is not predictable from the individual behavior of the constituent words  they are seemingly exceptions to the bottom-up compositional scheme of the method. however  they can be handled without modifying the method  by combining an example-oriented method and a rule-based method. 
   the key idea is to separate the step of translation equivalent selection for each constituent word from the syntactic transfer step  and attribute the idiomatic property entirely to the former. the former can be handled by an example-oriented augmentation of translation equivalent selection method  whereas the latter will be performed by a purely rule-based method. this separation is justified as long as the structure of the resulting expression obeys the common rules of the target language grammar. for example  the characteristics of the correspondence between denwa-wo kakeru and  make a phone call  can be reduced to particular correspondence between kakcru and  make . when the system detects cooccurrence between denwa and kakeru  it adds a translation equivalent  make  to the window of kakeru. the user can choose an idiomatic interpretation of this expression simply by choosing this alternative. later process can proceed entirely by a general transfer rule. similarly  the same expression can be translated into a verb  telephone  simply by giving translation  telephone  to kakeru  while denwa-wo is left without translation equivalent so that it disappears in the result. thus the essential task of idiom translation is reduced to an exampleoriented method of translation equivalent selection. 
1 	interactive operations 
1 	natural-language processing and graphical presentation as described before  the basic interactive operations of the method are translation area correction and translation equivalent selection. from the viewpoint of the rule-based method  the translation equivalent selection operation is more than simply choosing from among synonyms  as discussed in  yamabana et al.  1 . first  by specifying the translated area  one can directly resolve the dependency ambiguity. secondly  part-of-speech of the translation equivalent may be specified through this operation  since translation equivalents with different part-of-speech appear distinctly in the alternatives window. thirdly  the translation equivalent for functional words can be specified  and that can specify the syntactic behavior of the result. although functional words remain unchanged in the intermediate representation  some words provide an alternatives window when the cursor is located on them. 
　from the viewpoint of the example-based method  interactive operations have different meaning. by these operations the user can control two major decisions of the method  that is  how to cover the source sentence and which example should be used. changing the translation area implies changing the covering  and a new example that fits better to the expanded or shortened area will be chosen as a primary candidate. changing translation equivalent selection after translation implies changing the example used for translation. thus  the two ma-
jor decisions in the example-based translation method can be interactively controlled without ever introducing new kind of operation. 
1 	online learning of translation instances 
this scheme can offer a simple mechanism of online learning. as discussed above  the user has a control over the major decisions of either rule-based or examplebased translation. this control information can be used to learn better choice of rules or examples used. another source of information is the translation result itself. since the method allows interactive corrections of respective translation at each step  the correspondence between a source language expression and its translation is expected to make a satisfactory translation pair for the user. by accumulating these translation pairs  the system will grow and adapt to the environment  especially to the user's preference. 
1 	current status of implementation 
this method was implemented as an english writing support software on personal computers  with a rule-based translation module and an idiom processing mechanism. the system dictionary contains about 1 japanese entries and more than 1 idiomatic expressions  the latter built from scratch by the method in  tamura et a/.  1 . addition of the statistics-based lexical transfer module and example-based transfer modules are cur-

figure 1: relation to other programs 
rently under way  as well as the example learning module. 
　the current system consists of the interface module and the translation module  communicating through interprocess protocol. one important feature of this implementation from application viewpoint is that it works as a language conversion front-end to an arbitrary application  as described in section 1. the system works as a kind of a keyboard extension  converts a japanese input into an english equivalent  and send the result to an arbitrary application program  figure 1 . this feature allows the tool to be used as an add-on function of a familiar document writing environment. 
1 	discussion 
there have been several approaches to integrating different translation paradigms. the pangloss system  nirenburg ed.  1; brown  1  adopts a multi-engine architecture  in which knowledge-based mt  example-based mt and lexical transfer mt engines independently produce translations for a part of the input sentence. the translations are registered  selected and combined on a chart-like structure. translations from different modules are treated in a uniform manner  and selected by the priorities assigned by the respective translation engines.  chen and chen  1  proposes a hybrid transfer method that combines statistics-based transfer for smaller chunks and rule-based transfer for sentence-level chunks. translation method is changed according to the size and nature of the substructure to be translated. 
　our method shares the basic strategy with these previous works in that it divides the problem into subproblems of translating the substructures  and tries to use the most appropriate translation method for respective problem. the point of our method is that this scheme naturally fits into the interactive translation scheme formerly proposed and provides a common platform for integrating various approaches to translation. in the lexical translation step  statistics-based dmax method supplies the baseline  and example-oriented recognition of idiomatic expressions provides a fine improvement. at later steps of structural transfer  the hybrid translation 
	yamabana  et al. 	1 
module enables to employ the most appropriate translation method  depending on the nature of the focused structure. the interactive operations are not only used to confirm and correct the initial selection  but also they provide a means to control various decisions in the course of the translation process. 
   from an application point of view  the important thing about this hybridization is that it offers a systematic method to add example-based improvement to the baseline rule-based translation. as is well-known  some expressions used in communication are not subject to compositional principle of meaning interpretation. since the word sequence itself contains some meaning not calculable from meanings of constituent words  a direct translation of the original sentence does not necessarily convey the same meaning in the target language. this is one reason that many conventional foreign language writing support tools employ an approach based on translation examples. however  these tools are often too rigid to allow truly free composition  only allowing one to replace a word or two in the example sentence. on the other hand  our method allows to freely combine rule-based and example-based translation results. a rule-based result can be embedded in an example-based skeleton of sentence  or vice versa. in addition  the idiom dictionary mechanism enables to detect idiomatic expressions with far separated constituents. 
　finally we briefly discuss the cost of the interactive operation. although the method is interactive  the only indispensable operation is the  next  trigger to confirm that the system's choice is fine. all other operations such as translation equivalent selection are optional. if the user continues to simply confirm the system's choice  all the judgement by the system is employed and according result is obtained. if the user carries out a detailed interaction  changing the alternative or even editing directly  then a result comparable to a fully manual translation can be obtained. thus the method lies between the automatic machine translation and the dictionaryaided manual translation  where the precise location is determined by the user. 
1 	conclusion 
we proposed a hybrid interactive translation method  in which rule-based  corpus-based and example-based translation methods are integrated with an interactive man-machine interface for stepwise bottom-up translation. this integration will give the user a freedom to combine most appropriate results obtained from various strategies and resources. currently the example-based and statistics-based modules are being added to the current implementation as an english writing support tool  which is provided with the rule-based transfer module and the idiomatic expression processing function realized as a mixture of an example-oriented translation equivalent selection method and rule-based structural transfer. we are planning to measure the effectiveness of this method when the expansion is completed. 
